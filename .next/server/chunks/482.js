"use strict";exports.id=482,exports.ids=[482],exports.modules={4097:(e,t,a)=>{a.r(t),a.d(t,{DASHBOARD_EXPORT_FIELDS:()=>s,LEADS_EXPORT_FIELDS:()=>r});let s=[{key:"campaignName",label:"Campaign Name",type:"string",include:!0},{key:"totalLeads",label:"Total Leads",type:"number",include:!0},{key:"completedLeads",label:"Completed Leads",type:"number",include:!0},{key:"conversionRate",label:"Conversion Rate (%)",type:"number",formatter:e=>`${e.toFixed(2)}%`,include:!0},{key:"avgCompletionTime",label:"Avg Completion Time (min)",type:"number",formatter:e=>`${(e/60).toFixed(1)}`,include:!0},{key:"createdAt",label:"Created At",type:"date",include:!0},{key:"lastActivity",label:"Last Activity",type:"date",include:!0}],r=[{key:"name",label:"Name",type:"string",include:!0},{key:"email",label:"Email",type:"email",include:!0},{key:"phone",label:"Phone",type:"phone",include:!1},{key:"campaignName",label:"Campaign",type:"string",include:!0},{key:"status",label:"Status",type:"string",include:!0},{key:"completionPercentage",label:"Completion %",type:"number",formatter:e=>`${e}%`,include:!0},{key:"createdAt",label:"Created At",type:"date",include:!0},{key:"lastActivity",label:"Last Activity",type:"date",include:!1},{key:"source",label:"Source",type:"string",include:!1},{key:"ipAddress",label:"IP Address",type:"string",include:!1}]},15371:(e,t,a)=>{a.d(t,{F:()=>h});var s=a(60687),r=a(43210),l=a(40083),n=a(41550),i=a(58869),o=a(40228),d=a(99891),c=a(84027),m=a(24934),x=a(55192),p=a(59821),u=a(45126);function h({user:e,showActions:t=!0,variant:a="card"}){let{user:h,signOut:g}=(0,u.A)(),f=e||h,[y,j]=(0,r.useState)(!1);if(!f)return null;let v=async()=>{j(!0);try{await g()}finally{j(!1)}},N=e=>e.split("@")[0].split(".").map(e=>e.charAt(0).toUpperCase()).slice(0,2).join(""),b=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return"compact"===a?(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("div",{className:"h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-sm font-medium text-blue-600",children:N(f.email||"")})})}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:f.email}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:f.email_confirmed_at?"Verified":"Unverified"})]}),t&&(0,s.jsx)(m.$,{variant:"ghost",size:"sm",onClick:v,disabled:y,children:(0,s.jsx)(l.A,{className:"h-4 w-4"})})]}):(0,s.jsxs)(x.Zp,{className:"full"===a?"w-full":"w-full max-w-md",children:[(0,s.jsxs)(x.aR,{className:"text-center",children:[(0,s.jsx)("div",{className:"mx-auto mb-4",children:(0,s.jsx)("div",{className:"h-16 w-16 rounded-full bg-blue-100 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-xl font-semibold text-blue-600",children:N(f.email||"")})})}),(0,s.jsx)(x.ZB,{className:"text-lg",children:f.email}),(0,s.jsx)(x.BT,{children:(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,s.jsx)(p.E,{variant:f.email_confirmed_at?"default":"secondary",children:f.email_confirmed_at?"Verified":"Unverified"}),f.app_metadata?.provider&&(0,s.jsx)(p.E,{variant:"outline",children:f.app_metadata.provider})]})})]}),"full"===a&&(0,s.jsxs)(x.Wu,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-4 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(n.A,{className:"h-4 w-4 text-gray-400"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:"Email"}),(0,s.jsx)("p",{className:"text-gray-600",children:f.email})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(i.A,{className:"h-4 w-4 text-gray-400"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:"User ID"}),(0,s.jsx)("p",{className:"text-gray-600 font-mono text-xs",children:f.id})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(o.A,{className:"h-4 w-4 text-gray-400"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:"Member Since"}),(0,s.jsx)("p",{className:"text-gray-600",children:f.created_at?b(f.created_at):"Unknown"})]})]}),f.last_sign_in_at&&(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(d.A,{className:"h-4 w-4 text-gray-400"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:"Last Sign In"}),(0,s.jsx)("p",{className:"text-gray-600",children:b(f.last_sign_in_at)})]})]})]}),f.app_metadata&&Object.keys(f.app_metadata).length>0&&(0,s.jsxs)("div",{className:"border-t pt-4",children:[(0,s.jsx)("h4",{className:"font-medium text-sm mb-2",children:"Authentication Details"}),(0,s.jsxs)("div",{className:"space-y-2 text-xs",children:[f.app_metadata.provider&&(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Provider:"}),(0,s.jsx)("span",{className:"font-medium",children:f.app_metadata.provider})]}),f.role&&(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Role:"}),(0,s.jsx)("span",{className:"font-medium",children:f.role})]})]})]})]}),t&&(0,s.jsx)(x.Wu,{className:"full"===a?"pt-0":"",children:(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsxs)(m.$,{variant:"outline",size:"sm",className:"flex-1",disabled:!0,children:[(0,s.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Settings"]}),(0,s.jsxs)(m.$,{variant:"outline",size:"sm",onClick:v,disabled:y,className:"flex-1",children:[(0,s.jsx)(l.A,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]})})]})}},34428:(e,t,a)=>{a.d(t,{EX:()=>o,JN:()=>s,U8:()=>u,a3:()=>x,e_:()=>i,gs:()=>p,pN:()=>n,v7:()=>m});let s=()=>{try{return[]}catch(e){return console.error("Error loading export history:",e),[]}},r=e=>{try{let t={...e,id:c(),timestamp:new Date().toISOString()},a=s();return a.unshift(t),a.slice(0,50),t}catch(e){throw console.error("Error adding export history entry:",e),e}},l=(e,t)=>{try{let a=s(),r=a.findIndex(t=>t.id===e);if(-1===r)return console.warn(`Export history entry with id ${e} not found`),!1;return a[r]={...a[r],...t},!0}catch(e){return console.error("Error updating export history entry:",e),!1}},n=e=>{try{let t=s();if(t.filter(t=>t.id!==e).length===t.length)return console.warn(`Export history entry with id ${e} not found`),!1;return!0}catch(e){return console.error("Error removing export history entry:",e),!1}},i=()=>{},o=()=>{let e=s();if(0===e.length)return{totalExports:0,successfulExports:0,failedExports:0,totalRecords:0,averageDuration:0};let t=e.filter(e=>"completed"===e.status),a=e.filter(e=>"failed"===e.status),r=e.reduce((e,t)=>e+t.recordCount,0),l=t.filter(e=>e.duration&&e.duration>0),n=l.length>0?l.reduce((e,t)=>e+(t.duration||0),0)/l.length:0;return{totalExports:e.length,successfulExports:t.length,failedExports:a.length,totalRecords:r,averageDuration:n,lastExportDate:e[0]?.timestamp}},d=(e,t=5)=>{let a=s(),r=a;return e&&(r=a.filter(t=>t.source===e)),r.slice(0,t)},c=()=>Date.now().toString(36)+Math.random().toString(36).substr(2),m=e=>{if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(1))+" "+["Bytes","KB","MB","GB"][t]},x=e=>{if(e<1e3)return`${e}ms`;let t=Math.floor(e/1e3);if(t<60)return`${t}s`;let a=Math.floor(t/60),s=t%60;return 0===s?`${a}m`:`${a}m ${s}s`},p=e=>{let t=new Date,a=new Date(e),s=t.getTime()-a.getTime(),r=Math.floor(s/6e4),l=Math.floor(s/36e5),n=Math.floor(s/864e5);return r<1?"Just now":r<60?`${r} minute${1===r?"":"s"} ago`:l<24?`${l} hour${1===l?"":"s"} ago`:n<7?`${n} day${1===n?"":"s"} ago`:a.toLocaleDateString()},u=()=>({startExport:e=>r({...e,status:"in-progress"}).id,completeExport:(e,t)=>{l(e,{status:"completed",...t})},failExport:(e,t)=>{l(e,{status:"failed",error:t})},getHistory:s,getStats:o,getRecent:d})},39390:(e,t,a)=>{a.d(t,{J:()=>n});var s=a(60687);a(43210);var r=a(78148),l=a(96241);function n({className:e,...t}){return(0,s.jsx)(r.b,{"data-slot":"label",className:(0,l.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}},55629:(e,t,a)=>{a.d(t,{Hr:()=>x,Ht:()=>h,SQ:()=>p,_2:()=>u,mB:()=>g,rI:()=>c,ty:()=>m});var s=a(60687),r=a(43210),l=a(29398),n=a(14952),i=a(13964),o=a(65822),d=a(96241);let c=l.bL,m=l.l9;l.YJ,l.ZL,l.Pb;let x=l.z6;r.forwardRef(({className:e,inset:t,children:a,...r},i)=>(0,s.jsxs)(l.ZP,{ref:i,className:(0,d.cn)("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...r,children:[a,(0,s.jsx)(n.A,{className:"ml-auto"})]})).displayName=l.ZP.displayName,r.forwardRef(({className:e,...t},a)=>(0,s.jsx)(l.G5,{ref:a,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...t})).displayName=l.G5.displayName;let p=r.forwardRef(({className:e,sideOffset:t=4,...a},r)=>(0,s.jsx)(l.ZL,{children:(0,s.jsx)(l.UC,{ref:r,sideOffset:t,className:(0,d.cn)("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...a})}));p.displayName=l.UC.displayName;let u=r.forwardRef(({className:e,inset:t,...a},r)=>(0,s.jsx)(l.q7,{ref:r,className:(0,d.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",t&&"pl-8",e),...a}));u.displayName=l.q7.displayName,r.forwardRef(({className:e,children:t,checked:a,...r},n)=>(0,s.jsxs)(l.H_,{ref:n,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:a,...r,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(l.VF,{children:(0,s.jsx)(i.A,{className:"h-4 w-4"})})}),t]})).displayName=l.H_.displayName;let h=r.forwardRef(({className:e,children:t,...a},r)=>(0,s.jsxs)(l.hN,{ref:r,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(l.VF,{children:(0,s.jsx)(o.A,{className:"h-2 w-2 fill-current"})})}),t]}));h.displayName=l.hN.displayName,r.forwardRef(({className:e,inset:t,...a},r)=>(0,s.jsx)(l.JU,{ref:r,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...a})).displayName=l.JU.displayName;let g=r.forwardRef(({className:e,...t},a)=>(0,s.jsx)(l.wv,{ref:a,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",e),...t}));g.displayName=l.wv.displayName},63974:(e,t,a)=>{a.d(t,{bq:()=>m,eb:()=>p,gC:()=>x,l6:()=>d,yv:()=>c});var s=a(60687);a(43210);var r=a(25911),l=a(78272),n=a(13964),i=a(3589),o=a(96241);function d({...e}){return(0,s.jsx)(r.bL,{"data-slot":"select",...e})}function c({...e}){return(0,s.jsx)(r.WT,{"data-slot":"select-value",...e})}function m({className:e,size:t="default",children:a,...n}){return(0,s.jsxs)(r.l9,{"data-slot":"select-trigger","data-size":t,className:(0,o.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...n,children:[a,(0,s.jsx)(r.In,{asChild:!0,children:(0,s.jsx)(l.A,{className:"size-4 opacity-50"})})]})}function x({className:e,children:t,position:a="popper",...l}){return(0,s.jsx)(r.ZL,{children:(0,s.jsxs)(r.UC,{"data-slot":"select-content",className:(0,o.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...l,children:[(0,s.jsx)(u,{}),(0,s.jsx)(r.LM,{className:(0,o.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),(0,s.jsx)(h,{})]})})}function p({className:e,children:t,...a}){return(0,s.jsxs)(r.q7,{"data-slot":"select-item",className:(0,o.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...a,children:[(0,s.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,s.jsx)(r.VF,{children:(0,s.jsx)(n.A,{className:"size-4"})})}),(0,s.jsx)(r.p4,{children:t})]})}function u({className:e,...t}){return(0,s.jsx)(r.PP,{"data-slot":"select-scroll-up-button",className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,s.jsx)(i.A,{className:"size-4"})})}function h({className:e,...t}){return(0,s.jsx)(r.wn,{"data-slot":"select-scroll-down-button",className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,s.jsx)(l.A,{className:"size-4"})})}},66962:(e,t,a)=>{a.d(t,{H:()=>y});var s=a(60687),r=a(43210),l=a(55192),n=a(24934),i=a(59821),o=a(34428),d=a(5336),c=a(35071),m=a(48730),x=a(10022),p=a(82164),u=a(31158),h=a(53411),g=a(88233),f=a(80462);let y=({source:e="all",maxEntries:t=10,showStats:a=!0,compact:y=!1})=>{let[j,v]=(0,r.useState)([]),[N,b]=(0,r.useState)([]),[w,E]=(0,r.useState)(null),[S,_]=(0,r.useState)("all"),[A,k]=(0,r.useState)("all");(0,r.useEffect)(()=>{C()},[]),(0,r.useEffect)(()=>{D()},[j,e,S,A,t]);let C=()=>{let e=(0,o.JN)(),t=(0,o.EX)();v(e),E(t)},D=()=>{let a=[...j];"all"!==e&&(a=a.filter(t=>t.source===e)),"all"!==S&&(a=a.filter(e=>e.status===S)),"all"!==A&&(a=a.filter(e=>e.format===A)),b(a=a.slice(0,t))},R=e=>{(0,o.pN)(e),C()},L=()=>{window.confirm("Are you sure you want to clear all export history?")&&((0,o.e_)(),C())},F=e=>{switch(e){case"completed":return(0,s.jsx)(d.A,{className:"h-4 w-4 text-green-500"});case"failed":return(0,s.jsx)(c.A,{className:"h-4 w-4 text-red-500"});case"in-progress":return(0,s.jsx)(m.A,{className:"h-4 w-4 text-blue-500 animate-spin"});default:return(0,s.jsx)(m.A,{className:"h-4 w-4 text-gray-400"})}},$=e=>{switch(e){case"csv":return(0,s.jsx)(x.A,{className:"h-4 w-4 text-green-600"});case"excel":return(0,s.jsx)(p.A,{className:"h-4 w-4 text-blue-600"});default:return(0,s.jsx)(u.A,{className:"h-4 w-4 text-gray-400"})}},M=e=>(0,s.jsx)(i.E,{variant:{dashboard:"default",leads:"secondary"}[e],className:"text-xs",children:"dashboard"===e?"Dashboard":"Leads"});return y?(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Recent Exports"}),j.length>0&&(0,s.jsx)(n.$,{variant:"ghost",size:"sm",onClick:L,className:"text-xs text-gray-500 hover:text-gray-700",children:"Clear"})]}),0===N.length?(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"No exports yet"}):(0,s.jsx)("div",{className:"space-y-1",children:N.slice(0,3).map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded text-xs",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[F(e.status),$(e.format),(0,s.jsx)("span",{className:"font-medium",children:e.filename})]}),(0,s.jsx)("span",{className:"text-gray-500",children:(0,o.gs)(e.timestamp)})]},e.id))})]}):(0,s.jsxs)(l.Zp,{children:[(0,s.jsx)(l.aR,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)(l.ZB,{className:"flex items-center space-x-2",children:[(0,s.jsx)(h.A,{className:"h-5 w-5"}),(0,s.jsx)("span",{children:"Export History"})]}),(0,s.jsx)(l.BT,{children:"Track and manage your data export activities"})]}),j.length>0&&(0,s.jsxs)(n.$,{variant:"outline",size:"sm",onClick:L,className:"text-red-600 hover:text-red-700",children:[(0,s.jsx)(g.A,{className:"h-4 w-4 mr-2"}),"Clear All"]})]})}),(0,s.jsxs)(l.Wu,{children:[a&&w&&(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:w.totalExports}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Total Exports"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-green-600",children:w.successfulExports}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Successful"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:w.totalRecords.toLocaleString()}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Records Exported"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:(0,o.a3)(w.averageDuration)}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Avg Duration"})]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(f.A,{className:"h-4 w-4 text-gray-400"}),(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Filter:"})]}),(0,s.jsxs)("select",{value:S,onChange:e=>_(e.target.value),className:"text-sm border border-gray-300 rounded px-2 py-1",children:[(0,s.jsx)("option",{value:"all",children:"All Status"}),(0,s.jsx)("option",{value:"completed",children:"Completed"}),(0,s.jsx)("option",{value:"failed",children:"Failed"})]}),(0,s.jsxs)("select",{value:A,onChange:e=>k(e.target.value),className:"text-sm border border-gray-300 rounded px-2 py-1",children:[(0,s.jsx)("option",{value:"all",children:"All Formats"}),(0,s.jsx)("option",{value:"csv",children:"CSV"}),(0,s.jsx)("option",{value:"excel",children:"Excel"})]})]}),0===N.length?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)(u.A,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No exports found"}),(0,s.jsx)("p",{className:"text-gray-500",children:"all"===e?"Start exporting data to see your export history here.":`No ${e} exports found. Try changing your filters.`})]}):(0,s.jsx)("div",{className:"space-y-3",children:N.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[F(e.status),$(e.format)]}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:e.filename}),M(e.source)]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,s.jsxs)("span",{children:[e.recordCount.toLocaleString()," records"]}),e.fileSize&&(0,s.jsx)("span",{children:(0,o.v7)(e.fileSize)}),e.duration&&(0,s.jsx)("span",{children:(0,o.a3)(e.duration)}),(0,s.jsx)("span",{children:(0,o.gs)(e.timestamp)})]}),e.error&&(0,s.jsxs)("div",{className:"text-sm text-red-600 mt-1",children:["Error: ",e.error]})]})]}),(0,s.jsx)("div",{className:"flex items-center space-x-2",children:(0,s.jsx)(n.$,{variant:"ghost",size:"sm",onClick:()=>R(e.id),className:"text-gray-400 hover:text-red-600",children:(0,s.jsx)(g.A,{className:"h-4 w-4"})})})]},e.id))})]})]})}},68988:(e,t,a)=>{a.d(t,{p:()=>n});var s=a(60687),r=a(43210),l=a(96241);let n=r.forwardRef(({className:e,type:t,...a},r)=>(0,s.jsx)("input",{type:t,className:(0,l.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...a}));n.displayName="Input"},74505:(e,t,a)=>{a.d(t,{NV:()=>D});var s=a(60687),r=a(43210),l=a(24934),n=a(39390),i=a(63974),o=a(93437),d=a(68988),c=a(55192),m=a(41862),x=a(84027),p=a(10022),u=a(37911),h=a(31158),g=a(5336),f=a(93613),y=a(41312),j=a(80462),v=a(28947),N=a(96882),b=a(96241),w=a(4097);let E=({isOpen:e,onClose:t,children:a})=>e?(0,s.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",children:(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-lg max-w-2xl w-full max-h-[90vh] overflow-hidden",children:a})}):null,S=({className:e})=>(0,s.jsx)("div",{className:(0,b.cn)("border-b border-gray-200",e)}),_=({isOpen:e,onClose:t,onExport:a,data:b,source:_,title:A,defaultFields:k,filters:C=[],isLoading:D=!1,progress:R=null})=>{let[L,F]=(0,r.useState)("csv"),[$,M]=(0,r.useState)("all"),[z,I]=(0,r.useState)([]),[O,T]=(0,r.useState)(""),[U,H]=(0,r.useState)({startDate:"",endDate:""}),[B,P]=(0,r.useState)({}),[V,J]=(0,r.useState)(!1),W=(0,r.useMemo)(()=>k||("dashboard"===_?w.DASHBOARD_EXPORT_FIELDS:w.LEADS_EXPORT_FIELDS),[k,_]),Z=(0,r.useMemo)(()=>{if(!b||0===b.length)return 0;let e=z.filter(e=>!1!==e.include).length,t=b.length*e*20,a=15*e+t;return"excel"===L?Math.round(1.5*a):a},[b,z,L]),G=(0,r.useMemo)(()=>{if("all"===$)return b.length;if("filtered"===$){let e=b;return(U.startDate||U.endDate)&&(e=e.filter(()=>!0)),e.length}return 0},[b,$,U,B]);(0,r.useEffect)(()=>{e&&W.length>0&&I(W.map(e=>({...e})))},[e,W]),(0,r.useEffect)(()=>{e||(F("csv"),M("all"),T(""),H({startDate:"",endDate:""}),P({}),J(!1))},[e]);let q=(e,t)=>{I(a=>a.map(a=>a.key===e?{...a,include:t}:a))},X=(e,t)=>{P(a=>({...a,[e]:t}))},K=async()=>{try{await a({format:L,scope:$,fields:z,filename:O||void 0,includeHeaders:!0,dateFormat:"MM/dd/yyyy HH:mm:ss"})}catch(e){console.error("Export failed:",e)}},Y=()=>{D||t()};return((0,r.useEffect)(()=>{let a=a=>{"Escape"===a.key&&e&&!D&&t()};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},[e,D,t]),R&&D)?(0,s.jsx)(E,{isOpen:e,onClose:Y,children:(0,s.jsxs)("div",{className:"overflow-y-auto max-h-[90vh]",children:[(0,s.jsxs)(c.aR,{children:[(0,s.jsxs)(c.ZB,{className:"flex items-center gap-2",children:[(0,s.jsx)(m.A,{className:"h-5 w-5 animate-spin"}),"Exporting Data"]}),(0,s.jsx)(c.BT,{children:R.message})]}),(0,s.jsxs)(c.Wu,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{children:"Progress"}),(0,s.jsxs)("span",{children:[R.progress,"%"]})]}),(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,s.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${R.progress}%`}})})]}),R.totalRecords&&(0,s.jsx)("div",{className:"text-sm text-gray-600",children:R.processedRecords?`${R.processedRecords} of ${R.totalRecords} records processed`:`${R.totalRecords} records to process`}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:["preparing"===R.stage&&(0,s.jsx)(x.A,{className:"h-4 w-4"}),"fetching"===R.stage&&(0,s.jsx)(m.A,{className:"h-4 w-4 animate-spin"}),"formatting"===R.stage&&(0,s.jsx)(p.A,{className:"h-4 w-4"}),"generating"===R.stage&&(0,s.jsx)(u.A,{className:"h-4 w-4"}),"downloading"===R.stage&&(0,s.jsx)(h.A,{className:"h-4 w-4"}),"complete"===R.stage&&(0,s.jsx)(g.A,{className:"h-4 w-4 text-green-500"}),"error"===R.stage&&(0,s.jsx)(f.A,{className:"h-4 w-4 text-red-500"}),(0,s.jsx)("span",{className:"capitalize",children:R.stage})]})]}),"complete"===R.stage&&(0,s.jsx)(c.wL,{children:(0,s.jsx)(l.$,{onClick:Y,children:"Close"})})]})}):(0,s.jsx)(E,{isOpen:e,onClose:Y,children:(0,s.jsxs)("div",{className:"overflow-y-auto max-h-[90vh]",children:[(0,s.jsxs)(c.aR,{children:[(0,s.jsxs)(c.ZB,{className:"flex items-center gap-2",children:[(0,s.jsx)(h.A,{className:"h-5 w-5"}),A||`Export ${"dashboard"===_?"Dashboard":"Leads"} Data`]}),(0,s.jsx)(c.BT,{children:"Choose your export format and customize the data to include."})]}),(0,s.jsxs)(c.Wu,{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(n.J,{className:"text-sm font-medium",children:"Export Format"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)(l.$,{variant:"csv"===L?"default":"outline",onClick:()=>F("csv"),className:"justify-start",children:[(0,s.jsx)(p.A,{className:"h-4 w-4 mr-2"}),"CSV File"]}),(0,s.jsxs)(l.$,{variant:"excel"===L?"default":"outline",onClick:()=>F("excel"),className:"justify-start",children:[(0,s.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Excel File"]})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(n.J,{className:"text-sm font-medium",children:"Data to Export"}),(0,s.jsxs)(i.l6,{value:$,onValueChange:e=>M(e),children:[(0,s.jsx)(i.bq,{children:(0,s.jsx)(i.yv,{placeholder:"Select data scope"})}),(0,s.jsxs)(i.gC,{children:[(0,s.jsx)(i.eb,{value:"all",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(y.A,{className:"h-4 w-4"}),"All Data (",b.length," records)"]})}),(0,s.jsx)(i.eb,{value:"filtered",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(j.A,{className:"h-4 w-4"}),"Filtered Data (",G," records)"]})}),(0,s.jsx)(i.eb,{value:"selected",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 opacity-50",children:[(0,s.jsx)(v.A,{className:"h-4 w-4"}),"Selected Items (0 records)"]})})]})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(n.J,{className:"text-sm font-medium",children:"Fields to Include"}),(0,s.jsx)(l.$,{variant:"ghost",size:"sm",onClick:()=>{let e=z.every(e=>!1!==e.include);I(t=>t.map(t=>({...t,include:!e})))},className:"text-xs",children:z.every(e=>!1!==e.include)?"Deselect All":"Select All"})]}),(0,s.jsx)("div",{className:"border rounded-lg p-3 max-h-48 overflow-y-auto",children:(0,s.jsx)("div",{className:"space-y-2",children:z.map(e=>(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(o.Checkbox,{id:e.key,checked:!1!==e.include,onCheckedChange:t=>q(e.key,t)}),(0,s.jsx)(n.J,{htmlFor:e.key,className:"text-sm flex-1 cursor-pointer",children:e.label}),e.type&&(0,s.jsx)("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded",children:e.type})]},e.key))})})]}),(C.length>0||"filtered"===$)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(S,{}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)(n.J,{className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(j.A,{className:"h-4 w-4"}),"Filters"]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(n.J,{htmlFor:"startDate",className:"text-xs",children:"Start Date"}),(0,s.jsx)(d.p,{id:"startDate",type:"date",value:U.startDate,onChange:e=>H(t=>({...t,startDate:e.target.value}))})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(n.J,{htmlFor:"endDate",className:"text-xs",children:"End Date"}),(0,s.jsx)(d.p,{id:"endDate",type:"date",value:U.endDate,onChange:e=>H(t=>({...t,endDate:e.target.value}))})]})]}),C.map(e=>(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(n.J,{className:"text-xs",children:e.label}),"select"===e.type&&e.options&&(0,s.jsxs)(i.l6,{value:B[e.key]||"",onValueChange:t=>X(e.key,t),children:[(0,s.jsx)(i.bq,{children:(0,s.jsx)(i.yv,{placeholder:e.placeholder||`Select ${e.label}`})}),(0,s.jsx)(i.gC,{children:e.options.map(e=>(0,s.jsx)(i.eb,{value:e.value,children:e.label},e.value))})]}),"text"===e.type&&(0,s.jsx)(d.p,{value:B[e.key]||"",onChange:t=>X(e.key,t.target.value),placeholder:e.placeholder||`Enter ${e.label}`})]},e.key))]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)(l.$,{variant:"ghost",size:"sm",onClick:()=>J(!V),className:"flex items-center gap-2 p-0 h-auto",children:[(0,s.jsx)(x.A,{className:"h-4 w-4"}),"Advanced Options",(0,s.jsx)("span",{className:"text-xs text-gray-500",children:V?"(Hide)":"(Show)"})]}),V&&(0,s.jsx)("div",{className:"space-y-3 pl-6 border-l-2 border-gray-200",children:(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(n.J,{htmlFor:"customFilename",className:"text-xs",children:"Custom Filename"}),(0,s.jsx)(d.p,{id:"customFilename",value:O,onChange:e=>T(e.target.value),placeholder:`${_}-export-${new Date().toISOString().split("T")[0]}.${"excel"===L?"xlsx":"csv"}`})]})})]}),(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium",children:[(0,s.jsx)(N.A,{className:"h-4 w-4"}),"Export Summary"]}),(0,s.jsxs)("div",{className:"text-xs text-gray-600 space-y-1",children:[(0,s.jsxs)("div",{children:["Format: ",L.toUpperCase()]}),(0,s.jsxs)("div",{children:["Records: ",G]}),(0,s.jsxs)("div",{children:["Fields: ",z.filter(e=>!1!==e.include).length]}),(0,s.jsxs)("div",{children:["Estimated Size: ",(e=>{if(0===e)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(1))+" "+["B","KB","MB","GB"][t]})(Z)]})]})]})]}),(0,s.jsxs)(c.wL,{className:"flex justify-end gap-3",children:[(0,s.jsx)(l.$,{variant:"outline",onClick:Y,disabled:D,children:"Cancel"}),(0,s.jsx)(l.$,{onClick:K,disabled:D||0===z.filter(e=>!1!==e.include).length,className:"min-w-24",children:D?(0,s.jsx)(m.A,{className:"h-4 w-4 animate-spin"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Export"]})})]})]})})};var A=a(55629),k=a(78272),C=a(79215);let D=({data:e,source:t,title:a,defaultFields:n,filters:i,onExportStart:o,onExportComplete:d,onExportError:c,className:m,variant:g="default",size:f="default",showDropdown:y=!0,disabled:j=!1})=>{let[v,N]=(0,r.useState)(!1),[b,w]=(0,r.useState)(!1),[E,S]=(0,r.useState)(null),{startExport:D,completeExport:R,failExport:L}=(0,C.U8)(),F=async a=>{if(j||0===e.length)return;let s={format:a,scope:"all",fields:n||[],includeHeaders:!0,dateFormat:"MM/dd/yyyy HH:mm:ss"},r=null,l=Date.now();try{w(!0),o?.(),r=D({source:t,format:a,filename:s.filename||`${t}-export-${Date.now()}.${a}`,recordCount:e.length,filters:i?Object.fromEntries(i.map(e=>[e.key,e.value])):void 0,fieldSelection:s.fields.map(e=>e.key),metadata:{scope:s.scope,includeHeaders:s.includeHeaders,dateFormat:s.dateFormat}});let n="csv"===a?C.GF:C.bJ,m=await n(e,s,S);if(m.success&&m.filename){let t=Date.now()-l,a=100*e.length;r&&R(r,{duration:t,fileSize:a}),d?.(m.filename)}else r&&L(r,m.error||"Export failed"),c?.(m.error||"Export failed")}catch(t){let e=t instanceof Error?t.message:"Export failed";r&&L(r,e),c?.(e)}finally{w(!1),S(null)}},$=async a=>{if(j||0===e.length)return;let s=null,r=Date.now();try{w(!0),o?.(),s=D({source:t,format:a.format,filename:a.filename||`${t}-custom-export-${Date.now()}.${a.format}`,recordCount:e.length,filters:i?Object.fromEntries(i.map(e=>[e.key,e.value])):void 0,fieldSelection:a.fields.map(e=>e.key),metadata:{scope:a.scope,includeHeaders:a.includeHeaders,dateFormat:a.dateFormat,customExport:!0}});let l="csv"===a.format?C.GF:C.bJ,n=await l(e,a,S);if(n.success&&n.filename){let t=Date.now()-r,a=100*e.length;s&&R(s,{duration:t,fileSize:a}),d?.(n.filename),N(!1)}else s&&L(s,n.error||"Export failed"),c?.(n.error||"Export failed")}catch(t){let e=t instanceof Error?t.message:"Export failed";s&&L(s,e),c?.(e)}finally{w(!1),S(null)}};return y?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(A.rI,{children:[(0,s.jsx)(A.ty,{asChild:!0,children:(0,s.jsxs)(l.$,{variant:g,size:f,disabled:j||0===e.length||b,className:m,children:[(0,s.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Export",(0,s.jsx)(k.A,{className:"h-4 w-4 ml-2"})]})}),(0,s.jsxs)(A.SQ,{align:"end",className:"w-48",children:[(0,s.jsxs)(A._2,{onClick:()=>F("csv"),children:[(0,s.jsx)(p.A,{className:"h-4 w-4 mr-2"}),"Export as CSV"]}),(0,s.jsxs)(A._2,{onClick:()=>F("excel"),children:[(0,s.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Export as Excel"]}),(0,s.jsxs)(A._2,{onClick:()=>N(!0),children:[(0,s.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"Custom Export..."]})]})]}),(0,s.jsx)(_,{isOpen:v,onClose:()=>N(!1),onExport:$,data:e,source:t,title:a,defaultFields:n,filters:i,isLoading:b,progress:E})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(l.$,{variant:g,size:f,onClick:()=>N(!0),disabled:j||0===e.length||b,className:m,children:[(0,s.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Export"]}),(0,s.jsx)(_,{isOpen:v,onClose:()=>N(!1),onExport:$,data:e,source:t,title:a,defaultFields:n,filters:i,isLoading:b,progress:E})]})}},79215:(e,t,a)=>{a.d(t,{exportMultiSheetExcel:()=>g,GF:()=>m,bJ:()=>h,rA:()=>w,gw:()=>_,K:()=>A,Dj:()=>k,U8:()=>C.U8});var s=a(84430),r=a.n(s);let l=(e,t,a)=>{let s=t.fields.filter(e=>!1!==e.include),r=s.map(e=>e.label),l=e.map(e=>s.map(a=>{let s=d(e,a.key);return null!=s?a.formatter?a.formatter(s):i(s,a.type,t.dateFormat):""})),n={totalRecords:e.length,exportedRecords:l.length,timestamp:new Date().toISOString(),source:a?.source||"dashboard",filters:a?.filters,exportedBy:a?.exportedBy};return{headers:r,rows:l,metadata:n}},n=(e,t)=>{let a=[];return e&&Array.isArray(e)?0===e.length?(a.push("Data array is empty"),{isValid:!1,errors:a}):t.fields&&0!==t.fields.length?0===t.fields.filter(e=>!1!==e.include).length?(a.push("No fields selected for export"),{isValid:!1,errors:a}):{isValid:0===a.length,errors:a}:(a.push("No fields specified for export"),{isValid:!1,errors:a}):(a.push("Data must be an array"),{isValid:!1,errors:a})},i=(e,t,a)=>{if(null==e)return"";switch(t){case"date":if(e instanceof Date)return o(e,a);if("string"==typeof e){let t=new Date(e);return isNaN(t.getTime())?e:o(t,a)}return String(e);case"number":return"number"==typeof e?e.toString():String(e);case"boolean":return e?"Yes":"No";default:return String(e)}},o=(e,t)=>{if(!t)return e.toLocaleDateString()+" "+e.toLocaleTimeString();let a=e.getDate().toString().padStart(2,"0"),s=(e.getMonth()+1).toString().padStart(2,"0"),r=e.getFullYear(),l=e.getHours().toString().padStart(2,"0"),n=e.getMinutes().toString().padStart(2,"0"),i=e.getSeconds().toString().padStart(2,"0");return t.replace("MM",s).replace("dd",a).replace("yyyy",r.toString()).replace("HH",l).replace("mm",n).replace("ss",i)},d=(e,t)=>{if(!e||"object"!=typeof e)return;let a=t.split("."),s=e;for(let e of a){if(null==s)return;s=s[e]}return s},c=e=>{let t=[];return e.headers&&e.headers.length>0&&t.push(e.headers),t.push(...e.rows),t},m=async(e,t,a)=>{try{a?.({stage:"preparing",progress:10,message:"Preparing data for export...",totalRecords:e.length});let s=n(e,t);if(!s.isValid)throw Error(`Export validation failed: ${s.errors.join(", ")}`);a?.({stage:"formatting",progress:30,message:"Formatting data...",totalRecords:e.length});let r=l(e,t,{source:t.filename?.includes("dashboard")?"dashboard":"leads"});a?.({stage:"generating",progress:60,message:"Generating CSV file...",totalRecords:e.length,processedRecords:r.rows.length});let i=x(r,t);a?.({stage:"downloading",progress:90,message:"Initiating download...",totalRecords:e.length,processedRecords:r.rows.length});let o=t.filename||"export.csv";return await p(i,o),a?.({stage:"complete",progress:100,message:"Export complete!",totalRecords:e.length,processedRecords:r.rows.length}),{success:!0,filename:o,metadata:r.metadata}}catch(e){return a?.({stage:"error",progress:0,message:e instanceof Error?e.message:"Export failed"}),{success:!1,error:e instanceof Error?e.message:"Unknown error occurred"}}},x=(e,t)=>{let{headers:a,rows:s}=e,l=[...!1!==t.includeHeaders?[a]:[],...s];return r().unparse(l,{header:!1,quotes:!0,quoteChar:'"',escapeChar:'"',delimiter:",",newline:"\n",skipEmptyLines:!1})},p=(e,t)=>new Promise((a,s)=>{try{let s=new Blob(["\uFEFF"+e],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(s),l=document.createElement("a");l.href=r,l.download=t,l.style.display="none",document.body.appendChild(l),l.click(),document.body.removeChild(l),setTimeout(()=>{URL.revokeObjectURL(r),a()},100)}catch(e){s(e)}});var u=a(33103);let h=async(e,t,a)=>{try{a?.({stage:"preparing",progress:10,message:"Preparing data for Excel export...",totalRecords:e.length});let s=n(e,t);if(!s.isValid)throw Error(`Export validation failed: ${s.errors.join(", ")}`);a?.({stage:"formatting",progress:30,message:"Formatting data for Excel...",totalRecords:e.length});let r=l(e,t,{source:t.filename?.includes("dashboard")?"dashboard":"leads"});a?.({stage:"generating",progress:60,message:"Generating Excel file...",totalRecords:e.length,processedRecords:r.rows.length});let i=f(r,t);a?.({stage:"downloading",progress:90,message:"Initiating download...",totalRecords:e.length,processedRecords:r.rows.length});let o=t.filename||"export.xlsx";return await v(i,o),a?.({stage:"complete",progress:100,message:"Excel export complete!",totalRecords:e.length,processedRecords:r.rows.length}),{success:!0,filename:o,metadata:r.metadata}}catch(e){return a?.({stage:"error",progress:0,message:e instanceof Error?e.message:"Excel export failed"}),{success:!1,error:e instanceof Error?e.message:"Unknown error occurred"}}},g=async(e,t="multi-sheet-export.xlsx",a)=>{try{let s=e.reduce((e,t)=>e+t.data.length,0);a?.({stage:"preparing",progress:5,message:"Preparing multi-sheet Excel export...",totalRecords:s});let r=u.Wp.book_new(),i=0;for(let t=0;t<e.length;t++){let o=e[t];a?.({stage:"generating",progress:Math.round(10+70*t/e.length),message:`Processing sheet: ${o.name}...`,totalRecords:s,processedRecords:i});let d=n(o.data,o.config);if(!d.isValid)throw Error(`Sheet "${o.name}" validation failed: ${d.errors.join(", ")}`);let c=l(o.data,o.config),m=y(c,o.config);u.Wp.book_append_sheet(r,m,o.name),i+=o.data.length}return a?.({stage:"downloading",progress:90,message:"Generating Excel file...",totalRecords:s,processedRecords:i}),await v(r,t),a?.({stage:"complete",progress:100,message:"Multi-sheet Excel export complete!",totalRecords:s,processedRecords:i}),{success:!0,filename:t,metadata:{totalRecords:s,exportedRecords:i,timestamp:new Date().toISOString(),source:"dashboard"}}}catch(e){return a?.({stage:"error",progress:0,message:e instanceof Error?e.message:"Multi-sheet export failed"}),{success:!1,error:e instanceof Error?e.message:"Unknown error occurred"}}},f=(e,t)=>{let a=u.Wp.book_new(),s=y(e,t),r=t.sheetName||"Data";return u.Wp.book_append_sheet(a,s,r),a},y=(e,t)=>{let a=c(e),s=u.Wp.aoa_to_sheet(a);return j(s,e,t),s},j=(e,t,a)=>{let s=u.Wp.decode_range(e["!ref"]||"A1"),r=[];for(let e=s.s.c;e<=s.e.c;e++){let a=10;t.headers[e]&&(a=Math.max(a,t.headers[e].length)),t.rows.slice(0,10).forEach(t=>{t[e]&&"string"==typeof t[e]&&(a=Math.max(a,t[e].length))}),r.push({width:Math.min(a+2,50)})}if(e["!cols"]=r,!1!==a.includeHeaders&&t.headers.length>0)for(let t=s.s.c;t<=s.e.c;t++){let a=e[u.Wp.encode_cell({r:0,c:t})];a&&(a.s={font:{bold:!0,color:{rgb:"FFFFFF"}},fill:{fgColor:{rgb:"366092"}},alignment:{horizontal:"center",vertical:"center"},border:{top:{style:"thin"},bottom:{style:"thin"},left:{style:"thin"},right:{style:"thin"}}})}if(!1!==a.includeHeaders&&(e["!freeze"]={xSplit:0,ySplit:1}),t.rows.length>0){let t=s.e.r,a=s.e.c;e["!autofilter"]={ref:`A1:${u.Wp.encode_cell({r:t,c:a})}`}}},v=(e,t)=>new Promise((a,s)=>{try{let s=u.M9(e,{bookType:"xlsx",type:"array",compression:!0}),r=new Blob([s],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),l=URL.createObjectURL(r),n=document.createElement("a");n.href=l,n.download=t,n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n),setTimeout(()=>{URL.revokeObjectURL(l),a()},100)}catch(e){s(e)}});var N=a(4097),b=a(28254);let w=async(e="all",t)=>{try{let a=await (0,b.ME)({page:1,per_page:100});if(!a.success||!a.data)return{success:!1,error:"Failed to load campaigns data"};let s=a.data.data||[],r=E(s,e),l=[],n=0,i=0;for(let e of r)try{let t=await (0,b.KT)(e.id);if(t.success&&t.data){let{total:a,completed:s,conversion_rate:r}=t.data;l.push({campaignId:e.id,campaignName:e.name,totalLeads:a,completedLeads:s,conversionRate:r,avgCompletionTime:0,createdAt:e.created_at,lastActivity:e.updated_at||e.created_at}),n+=a,i+=s}else l.push({campaignId:e.id,campaignName:e.name,totalLeads:0,completedLeads:0,conversionRate:0,avgCompletionTime:0,createdAt:e.created_at,lastActivity:e.updated_at||e.created_at})}catch(t){console.error(`Error loading stats for campaign ${e.id}:`,t)}let o=n>0?i/n*100:0,d=l.sort((e,t)=>t.totalLeads-e.totalLeads).slice(0,5),c=l.map(e=>({campaignName:e.campaignName,totalLeads:e.totalLeads,completedLeads:e.completedLeads,conversionRate:e.conversionRate,avgCompletionTime:e.avgCompletionTime,createdAt:e.createdAt,lastActivity:e.lastActivity})),m={analytics:{totalLeads:n,totalCampaigns:r.length,conversionRate:o,avgCompletionTime:0,topCampaigns:d.map(e=>({name:e.campaignName,leads:e.totalLeads,conversion:e.conversionRate}))},filters:{timeFilter:e,dateRange:S(e)},userInfo:t?{monthlyUsage:t.monthly_campaigns_used,monthlyLimit:t.monthly_campaign_limit,usagePercentage:Math.round(t.monthly_campaigns_used/t.monthly_campaign_limit*100)}:null,exportedAt:new Date().toISOString(),source:"dashboard"};return{success:!0,data:c,metadata:m}}catch(e){return console.error("Error preparing dashboard export data:",e),{success:!1,error:e instanceof Error?e.message:"Failed to prepare export data"}}},E=(e,t)=>{if("all"===t)return e;let a=new Date,s=new Date;switch(t){case"today":s.setHours(0,0,0,0);break;case"week":s.setDate(a.getDate()-7);break;case"month":s.setMonth(a.getMonth()-1)}return e.filter(e=>new Date(e.created_at)>=s)},S=e=>{let t=new Date,a=new Date;switch(e){case"today":return a.setHours(0,0,0,0),{start:a.toISOString(),end:t.toISOString(),description:"Today"};case"week":return a.setDate(t.getDate()-7),{start:a.toISOString(),end:t.toISOString(),description:"Last 7 days"};case"month":return a.setMonth(t.getMonth()-1),{start:a.toISOString(),end:t.toISOString(),description:"Last 30 days"};default:return{start:"2020-01-01T00:00:00.000Z",end:t.toISOString(),description:"All time"}}},_=()=>[...N.DASHBOARD_EXPORT_FIELDS],A=async(e={},t)=>{try{let{searchTerm:a="",selectedCampaign:s="all",sortField:r="created_at",sortDirection:l="desc",includeCompleted:n=!0,maxRecords:i=1e3}=e,o={page:1,per_page:i,sort_by:r,sort_order:l,..."all"!==s&&{campaign_id:s},...a&&{search:a},...void 0!==n&&{completed:n}},[d,c]=await Promise.all([(0,b.ah)(o),(0,b.ME)({page:1,per_page:100})]);if(!d.success||!d.data)return{success:!1,error:"Failed to load leads data"};if(!c.success||!c.data)return{success:!1,error:"Failed to load campaigns data"};let m=d.data.data||[],x=c.data.data||[],p=new Map;x.forEach(e=>{p.set(e.id,e)});let u=m.map(e=>{let t=p.get(e.campaign_id)||null;return{...e,campaign:t}});a&&!o.search&&(u=u.filter(e=>e.email?.toLowerCase().includes(a.toLowerCase())||e.phone?.includes(a)||e.campaign?.name?.toLowerCase().includes(a.toLowerCase())));let h=u.map(e=>({email:e.email||"",phone:e.phone||"",name:e.name||"",campaignName:e.campaign?.name||"Unknown Campaign",campaignStatus:e.campaign?.status||"unknown",leadSource:e.utm_source||"Direct",utmSource:e.utm_source||"",utmMedium:e.utm_medium||"",utmCampaign:e.utm_campaign||"",utmContent:e.utm_content||"",utmTerm:e.utm_term||"",createdAt:e.created_at,completedAt:e.completed_at||"",isCompleted:!!e.completed_at,leadId:e.id,campaignId:e.campaign_id})),g=u.length,f=u.filter(e=>e.completed_at).length,y=new Map;u.forEach(e=>{let t=e.campaign_id,a=e.campaign?.name||"Unknown Campaign";y.has(t)||y.set(t,{name:a,leads:0,completed:0,conversionRate:0});let s=y.get(t);s.leads+=1,e.completed_at&&(s.completed+=1),s.conversionRate=s.leads>0?s.completed/s.leads*100:0});let j=new Map;u.forEach(e=>{let t=e.utm_source||"Direct";j.set(t,(j.get(t)||0)+1)});let v={analytics:{totalLeads:g,completedLeads:f,completionRate:Math.round(100*(g>0?f/g*100:0))/100,campaignBreakdown:Array.from(y.values()),sourceBreakdown:Array.from(j.entries()).map(([e,t])=>({source:e,count:t,percentage:Math.round(t/g*1e4)/100}))},filters:{searchTerm:a||null,selectedCampaign:"all"!==s?s:null,sortField:r,sortDirection:l,includeCompleted:n,maxRecords:i},userInfo:t?{monthlyLeadsCaptured:t.monthly_leads_captured||0,monthlyLeadsLimit:t.monthly_leads_limit||1e3,usagePercentage:Math.round((t.monthly_leads_captured||0)/(t.monthly_leads_limit||1e3)*100)}:null,exportedAt:new Date().toISOString(),source:"leads"};return{success:!0,data:h,metadata:v}}catch(e){return console.error("Error preparing leads export data:",e),{success:!1,error:e instanceof Error?e.message:"Failed to prepare export data"}}},k=()=>[...N.LEADS_EXPORT_FIELDS];var C=a(34428)},93437:(e,t,a)=>{a.d(t,{Checkbox:()=>o});var s=a(60687),r=a(43210),l=a(40211),n=a(13964),i=a(96241);let o=r.forwardRef(({className:e,...t},a)=>(0,s.jsx)(l.bL,{ref:a,className:(0,i.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:(0,s.jsx)(l.C1,{className:(0,i.cn)("flex items-center justify-center text-current"),children:(0,s.jsx)(n.A,{className:"h-4 w-4"})})}));o.displayName=l.bL.displayName}};