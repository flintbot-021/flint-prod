(()=>{var e={};e.id=105,e.ids=[105],e.modules={60:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(41552).A)("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]])},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},8525:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>l.a,__next_app__:()=>m,pages:()=>o,routeModule:()=>x,tree:()=>c});var t=a(65239),r=a(48088),i=a(88170),l=a.n(i),n=a(30893),d={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);a.d(s,d);let c={children:["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,64118)),"/Users/kevindunbar/Desktop/Design Club/Clients/Flint/Lead Magnet/flint-prod/app/dashboard/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,46055))).default(e)],apple:[],openGraph:[async e=>(await Promise.resolve().then(a.bind(a,90253))).default(e)],twitter:[async e=>(await Promise.resolve().then(a.bind(a,59479))).default(e)],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,58014)),"/Users/kevindunbar/Desktop/Design Club/Clients/Flint/Lead Magnet/flint-prod/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,46055))).default(e)],apple:[],openGraph:[async e=>(await Promise.resolve().then(a.bind(a,90253))).default(e)],twitter:[async e=>(await Promise.resolve().then(a.bind(a,59479))).default(e)],manifest:void 0}}]}.children,o=["/Users/kevindunbar/Desktop/Design Club/Clients/Flint/Lead Magnet/flint-prod/app/dashboard/page.tsx"],m={require:a,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},25541:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(41552).A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},46836:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>A});var t=a(60687),r=a(43210),i=a(16189),l=a(24934),n=a(55192),d=a(15371),c=a(45126),o=a(28254),m=a(74505),x=a(66962),p=a(79215),h=a(80462),u=a(96474),g=a(28947),j=a(41312),f=a(60),v=a(25541),b=a(58559),N=a(5336),y=a(48730),w=a(53411),C=a(31158);let k=[{value:"today",label:"Today"},{value:"week",label:"This Week"},{value:"month",label:"This Month"},{value:"all",label:"All Time"}];function A(){let{user:e,loading:s,signOut:a}=(0,c.A)(),A=(0,i.useRouter)(),[P,_]=(0,r.useState)(null),[E,R]=(0,r.useState)({totalCampaigns:0,totalLeads:0,completionRate:0,recentCampaigns:[]}),[q,M]=(0,r.useState)("month"),[D,$]=(0,r.useState)(!0),[Z,F]=(0,r.useState)(null),[L,z]=(0,r.useState)([]),[T,S]=(0,r.useState)(!1),B=async()=>{try{let e;$(!0),F(null);let[s,a]=await Promise.all([(0,o.Rk)(),(0,o.ME)({page:1,per_page:10})]);if(!s.success)throw Error(s.error||"Failed to load profile");if(!a.success)throw Error(a.error||"Failed to load campaigns");_(s.data||null);let t=a.data?.data||[],r=0,i=0;await Promise.all(t.map(async s=>{let a=await (0,o.KT)(s.id);if(a.success&&a.data){let{total:t,completed:l,conversion_rate:n}=a.data;r+=t,i+=l;let d={...s,leadCount:t,completionRate:n};return(!e||t>e.leadCount)&&(e=d),d}return{...s,leadCount:0,completionRate:0}}));let l=r>0?i/r*100:0;R({totalCampaigns:t.length,totalLeads:r,completionRate:Math.round(100*l)/100,recentCampaigns:t.slice(0,5),topPerformingCampaign:e})}catch(e){console.error("Error loading dashboard data:",e),F(e instanceof Error?e.message:"An error occurred")}finally{$(!1)}},W=()=>{console.log("Export started...")};return s?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):e?(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("header",{className:"bg-white shadow",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"})}),(0,t.jsx)("div",{className:"flex items-center space-x-4",children:(0,t.jsx)(d.F,{variant:"compact"})})]})})}),(0,t.jsx)("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"px-4 py-6 sm:px-0",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 space-y-4 sm:space-y-0",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.A,{className:"h-4 w-4 text-gray-500"}),(0,t.jsx)("select",{value:q,onChange:e=>M(e.target.value),className:"border border-gray-300 rounded-md px-3 py-1 text-sm",children:k.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})]}),P&&(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,t.jsxs)("span",{className:"font-medium",children:[P.monthly_campaigns_used," / ",P.monthly_campaign_limit]}),(0,t.jsx)("span",{className:"ml-1",children:"campaigns used this month"})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(m.NV,{data:L,source:"dashboard",title:"Export Dashboard Analytics",defaultFields:(0,p.gw)(),onExportStart:W,onExportComplete:e=>{console.log(`Export completed: ${e}`)},onExportError:e=>{console.error("Export error:",e),F(`Export failed: ${e}`)},variant:"outline",size:"sm",disabled:T,showDropdown:!0}),(0,t.jsxs)(l.$,{onClick:()=>A.push("/dashboard/campaigns/create"),className:"flex items-center space-x-2",children:[(0,t.jsx)(u.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"New Campaign"})]})]})]}),Z&&(0,t.jsx)(n.Zp,{className:"mb-6 border-red-200 bg-red-50",children:(0,t.jsx)(n.Wu,{className:"pt-6",children:(0,t.jsxs)("div",{className:"text-red-800",children:[(0,t.jsx)("p",{className:"font-medium",children:"Error loading dashboard data"}),(0,t.jsx)("p",{className:"text-sm mt-1",children:Z}),(0,t.jsx)(l.$,{variant:"outline",size:"sm",className:"mt-2",onClick:B,children:"Try Again"})]})})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,t.jsxs)(n.Zp,{children:[(0,t.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(n.ZB,{className:"text-sm font-medium",children:"Total Campaigns"}),(0,t.jsx)(g.A,{className:"h-4 w-4 text-blue-600"})]}),(0,t.jsxs)(n.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:D?"...":E.totalCampaigns}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(0,t.jsxs)("span",{className:"text-green-600",children:["+",E.recentCampaigns.length]})," this period"]})]})]}),(0,t.jsxs)(n.Zp,{children:[(0,t.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(n.ZB,{className:"text-sm font-medium",children:"Total Leads"}),(0,t.jsx)(j.A,{className:"h-4 w-4 text-green-600"})]}),(0,t.jsxs)(n.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:D?"...":E.totalLeads.toLocaleString()}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(0,t.jsxs)("span",{className:"text-green-600",children:[(0,t.jsx)(f.A,{className:"h-3 w-3 inline"}),"12%"]})," from last period"]})]})]}),(0,t.jsxs)(n.Zp,{children:[(0,t.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(n.ZB,{className:"text-sm font-medium",children:"Completion Rate"}),(0,t.jsx)(v.A,{className:"h-4 w-4 text-purple-600"})]}),(0,t.jsxs)(n.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:D?"...":`${E.completionRate.toFixed(1)}%`}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(0,t.jsxs)("span",{className:"text-green-600",children:[(0,t.jsx)(f.A,{className:"h-3 w-3 inline"}),"3.2%"]})," improvement"]})]})]}),(0,t.jsxs)(n.Zp,{children:[(0,t.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(n.ZB,{className:"text-sm font-medium",children:"Monthly Usage"}),(0,t.jsx)(b.A,{className:"h-4 w-4 text-orange-600"})]}),(0,t.jsxs)(n.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:D||!P?"...":`${Math.round(P.monthly_campaigns_used/P.monthly_campaign_limit*100)}%`}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:P&&`${P.monthly_campaigns_used} of ${P.monthly_campaign_limit} campaigns`})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsx)("div",{className:"lg:col-span-2",children:(0,t.jsxs)(n.Zp,{children:[(0,t.jsx)(n.aR,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(n.ZB,{children:"Recent Campaigns"}),(0,t.jsx)(n.BT,{children:"Your latest lead magnet campaigns"})]}),(0,t.jsx)(l.$,{variant:"outline",size:"sm",onClick:()=>A.push("/dashboard/campaigns"),children:"View All"})]})}),(0,t.jsx)(n.Wu,{children:D?(0,t.jsx)("div",{className:"space-y-3",children:[void 0,void 0,void 0].map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center space-x-4 p-3 border rounded-lg animate-pulse",children:[(0,t.jsx)("div",{className:"h-8 w-8 bg-gray-200 rounded"}),(0,t.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,t.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]},s))}):E.recentCampaigns.length>0?(0,t.jsx)("div",{className:"space-y-3",children:E.recentCampaigns.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50 cursor-pointer",onClick:()=>A.push(`/dashboard/campaigns/${e.id}`),children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:"published"===e.status?(0,t.jsx)(N.A,{className:"h-5 w-5 text-green-600"}):"draft"===e.status?(0,t.jsx)(y.A,{className:"h-5 w-5 text-yellow-600"}):(0,t.jsx)(b.A,{className:"h-5 w-5 text-gray-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-sm",children:e.name}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 capitalize",children:[e.status," • ",new Date(e.created_at).toLocaleDateString()]})]})]}),(0,t.jsx)(f.A,{className:"h-4 w-4 text-gray-400"})]},e.id))}):(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(g.A,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-500 mb-4",children:"No campaigns yet"}),(0,t.jsx)(l.$,{onClick:()=>A.push("/dashboard/campaigns/create"),size:"sm",children:"Create Your First Campaign"})]})})]})}),(0,t.jsxs)("div",{className:"space-y-6",children:[E.topPerformingCampaign&&(0,t.jsxs)(n.Zp,{children:[(0,t.jsxs)(n.aR,{children:[(0,t.jsx)(n.ZB,{className:"text-lg",children:"Top Performer"}),(0,t.jsx)(n.BT,{children:"Your best converting campaign"})]}),(0,t.jsx)(n.Wu,{children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:E.topPerformingCampaign.name}),(0,t.jsx)("p",{className:"text-sm text-gray-500 capitalize",children:E.topPerformingCampaign.status})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-lg font-bold text-green-600",children:E.topPerformingCampaign.leadCount}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Leads"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"text-lg font-bold text-purple-600",children:[E.topPerformingCampaign.completionRate.toFixed(1),"%"]}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Rate"})]})]}),(0,t.jsx)(l.$,{variant:"outline",size:"sm",className:"w-full",onClick:()=>A.push(`/dashboard/campaigns/${E.topPerformingCampaign?.id}`),children:"View Details"})]})})]}),(0,t.jsxs)(n.Zp,{children:[(0,t.jsx)(n.aR,{children:(0,t.jsx)(n.ZB,{className:"text-lg",children:"Quick Actions"})}),(0,t.jsxs)(n.Wu,{className:"space-y-3",children:[(0,t.jsxs)(l.$,{variant:"outline",className:"w-full justify-start",onClick:()=>A.push("/dashboard/campaigns"),children:[(0,t.jsx)(w.A,{className:"h-4 w-4 mr-2"}),"View All Campaigns"]}),(0,t.jsxs)(l.$,{variant:"outline",className:"w-full justify-start",onClick:()=>A.push("/dashboard/campaigns/create"),children:[(0,t.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Create New Campaign"]}),(0,t.jsxs)(l.$,{variant:"outline",className:"w-full justify-start",onClick:()=>{W()},disabled:T||0===L.length,children:[(0,t.jsx)(C.A,{className:"h-4 w-4 mr-2"}),"Export Analytics"]})]})]}),(0,t.jsx)(d.F,{variant:"full"}),(0,t.jsx)(x.H,{source:"dashboard",maxEntries:5,showStats:!1,compact:!0})]})]})]})})]}):null}},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},55645:(e,s,a)=>{Promise.resolve().then(a.bind(a,64118))},58559:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(41552).A)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64118:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>t});let t=(0,a(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/kevindunbar/Desktop/Design Club/Clients/Flint/Lead Magnet/flint-prod/app/dashboard/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/kevindunbar/Desktop/Design Club/Clients/Flint/Lead Magnet/flint-prod/app/dashboard/page.tsx","default")},74075:e=>{"use strict";e.exports=require("zlib")},74205:(e,s,a)=>{Promise.resolve().then(a.bind(a,46836))},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},96474:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(41552).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])}};var s=require("../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[243,247,658,928,53,181,414,177,599,482],()=>a(8525));module.exports=t})();