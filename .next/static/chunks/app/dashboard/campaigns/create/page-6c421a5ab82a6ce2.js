(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[650],{12152:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>N});var i=a(95155),l=a(12115),n=a(35695),t=a(97168),r=a(88482),c=a(89852),d=a(66220),o=a(99474),m=a(62533),h=a(76052),x=a(17712),p=a(5196),u=a(35169),g=a(85339),j=a(92138),v=a(4229);let y=[{id:"basic",title:"Basic Information",description:"Set up your campaign name and description"},{id:"theme",title:"Theme & Branding",description:"Customize the look and feel of your campaign"},{id:"settings",title:"Campaign Settings",description:"Configure completion and notification settings"},{id:"review",title:"Review & Create",description:"Review your campaign settings and create"}];function N(){let{user:e,loading:s}=(0,h.A)(),a=(0,n.useRouter)(),[N,f]=(0,l.useState)("basic"),[b,w]=(0,l.useState)(!1),[_,F]=(0,l.useState)(null),[C,k]=(0,l.useState)(null),[B,S]=(0,l.useState)({name:"",description:"",settings:{theme:{primary_color:"#3B82F6",secondary_color:"#10B981",background_color:"#FFFFFF",font_family:"Inter, sans-serif"},branding:{show_powered_by:!0},completion:{email_notifications:!0}}});(0,l.useEffect)(()=>{s||e||a.push("/auth/login")},[e,s,a]),(0,l.useEffect)(()=>{e&&E()},[e]);let E=async()=>{try{let e=await (0,x.Rk)();e.success&&e.data&&(F(e.data),e.data.monthly_campaigns_used>=e.data.monthly_campaign_limit&&k("You have reached your monthly campaign limit. Please upgrade your plan to create more campaigns."))}catch(e){console.error("Error loading profile:",e)}},A=e=>{S(s=>({...s,...e}))},R=e=>{S(s=>({...s,settings:{...s.settings,...e}}))},Z=()=>y.findIndex(e=>e.id===N),J=async()=>{if(_){if(_.monthly_campaigns_used>=_.monthly_campaign_limit)return void k("You have reached your monthly campaign limit.");try{var e;w(!0),k(null);let s=await (0,x.Tq)({name:B.name,description:B.description,status:"draft",settings:B.settings,published_at:null,published_url:null});if(!s.success)throw Error(s.error||"Failed to create campaign");a.push("/dashboard/campaigns/".concat(null==(e=s.data)?void 0:e.id))}catch(e){console.error("Error creating campaign:",e),k(e instanceof Error?e.message:"An error occurred")}finally{w(!1)}}};return s?(0,i.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,i.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):e?(0,i.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,i.jsx)("header",{className:"bg-white shadow",children:(0,i.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,i.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,i.jsxs)(t.$,{variant:"ghost",onClick:()=>a.push("/dashboard/campaigns"),className:"text-gray-600 hover:text-gray-900",children:[(0,i.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Back to Campaigns"]}),(0,i.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Create New Campaign"})]}),(0,i.jsx)("div",{className:"flex items-center space-x-4",children:(0,i.jsx)(m.F,{variant:"compact"})})]})})}),(0,i.jsx)("main",{className:"max-w-4xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,i.jsxs)("div",{className:"px-4 py-6 sm:px-0",children:[(0,i.jsx)("div",{className:"mb-8",children:(0,i.jsx)("nav",{"aria-label":"Progress",children:(0,i.jsx)("ol",{className:"flex items-center",children:y.map((e,s)=>(0,i.jsxs)("li",{className:"relative ".concat(s!==y.length-1?"pr-8 sm:pr-20":""),children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"\n                        flex h-8 w-8 items-center justify-center rounded-full border-2 \n                        ".concat(Z()>s?"bg-blue-600 border-blue-600 text-white":Z()===s?"border-blue-600 text-blue-600":"border-gray-300 text-gray-400","\n                      "),children:Z()>s?(0,i.jsx)(p.A,{className:"h-5 w-5"}):(0,i.jsx)("span",{className:"text-sm font-medium",children:s+1})}),(0,i.jsx)("div",{className:"ml-3",children:(0,i.jsx)("span",{className:"text-sm font-medium ".concat(Z()>=s?"text-gray-900":"text-gray-400"),children:e.title})})]}),s!==y.length-1&&(0,i.jsx)("div",{className:"absolute top-4 left-8 -ml-px h-0.5 w-full bg-gray-300"})]},e.id))})})}),C&&(0,i.jsx)(r.Zp,{className:"mb-6 border-red-200 bg-red-50",children:(0,i.jsx)(r.Wu,{className:"pt-6",children:(0,i.jsxs)("div",{className:"flex items-start space-x-3 text-red-800",children:[(0,i.jsx)(g.A,{className:"h-5 w-5 mt-0.5"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-medium",children:"Error creating campaign"}),(0,i.jsx)("p",{className:"text-sm mt-1",children:C})]})]})})}),(0,i.jsxs)(r.Zp,{className:"mb-8",children:[(0,i.jsxs)(r.aR,{children:[(0,i.jsx)(r.ZB,{children:y[Z()].title}),(0,i.jsx)(r.BT,{children:y[Z()].description})]}),(0,i.jsx)(r.Wu,{children:(()=>{var e,s,a,l,n,t,m,h,x,u,g,j,v,y,f,b,w,_;switch(N){case"basic":return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(d.J,{htmlFor:"name",children:"Campaign Name *"}),(0,i.jsx)(c.p,{id:"name",value:B.name,onChange:e=>A({name:e.target.value}),placeholder:"Enter your campaign name",className:"text-lg"}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Give your lead magnet campaign a clear, descriptive name"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(d.J,{htmlFor:"description",children:"Description"}),(0,i.jsx)(o.T,{id:"description",value:B.description,onChange:e=>A({description:e.target.value}),placeholder:"Describe what your campaign is about (optional)",rows:4}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Help your team understand the purpose of this campaign"})]})]});case"theme":return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(d.J,{htmlFor:"primary-color",children:"Primary Color"}),(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)("input",{type:"color",id:"primary-color",value:(null==(e=B.settings.theme)?void 0:e.primary_color)||"#3B82F6",onChange:e=>R({theme:{...B.settings.theme,primary_color:e.target.value}}),className:"w-12 h-12 rounded border border-gray-300"}),(0,i.jsx)(c.p,{value:(null==(s=B.settings.theme)?void 0:s.primary_color)||"#3B82F6",onChange:e=>R({theme:{...B.settings.theme,primary_color:e.target.value}}),placeholder:"#3B82F6",className:"flex-1"})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(d.J,{htmlFor:"secondary-color",children:"Secondary Color"}),(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)("input",{type:"color",id:"secondary-color",value:(null==(a=B.settings.theme)?void 0:a.secondary_color)||"#10B981",onChange:e=>R({theme:{...B.settings.theme,secondary_color:e.target.value}}),className:"w-12 h-12 rounded border border-gray-300"}),(0,i.jsx)(c.p,{value:(null==(l=B.settings.theme)?void 0:l.secondary_color)||"#10B981",onChange:e=>R({theme:{...B.settings.theme,secondary_color:e.target.value}}),placeholder:"#10B981",className:"flex-1"})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(d.J,{htmlFor:"background-color",children:"Background Color"}),(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)("input",{type:"color",id:"background-color",value:(null==(n=B.settings.theme)?void 0:n.background_color)||"#FFFFFF",onChange:e=>R({theme:{...B.settings.theme,background_color:e.target.value}}),className:"w-12 h-12 rounded border border-gray-300"}),(0,i.jsx)(c.p,{value:(null==(t=B.settings.theme)?void 0:t.background_color)||"#FFFFFF",onChange:e=>R({theme:{...B.settings.theme,background_color:e.target.value}}),placeholder:"#FFFFFF",className:"flex-1"})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(d.J,{htmlFor:"font-family",children:"Font Family"}),(0,i.jsxs)("select",{id:"font-family",value:(null==(m=B.settings.theme)?void 0:m.font_family)||"Inter, sans-serif",onChange:e=>R({theme:{...B.settings.theme,font_family:e.target.value}}),className:"w-full p-2 border border-gray-300 rounded-md",children:[(0,i.jsx)("option",{value:"Inter, sans-serif",children:"Inter"}),(0,i.jsx)("option",{value:"system-ui, sans-serif",children:"System UI"}),(0,i.jsx)("option",{value:"Georgia, serif",children:"Georgia"}),(0,i.jsx)("option",{value:"Times New Roman, serif",children:"Times New Roman"}),(0,i.jsx)("option",{value:"Arial, sans-serif",children:"Arial"}),(0,i.jsx)("option",{value:"Helvetica, sans-serif",children:"Helvetica"})]})]})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("h3",{className:"text-lg font-medium",children:"Branding Options"}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)("input",{type:"checkbox",id:"show-powered-by",checked:null==(x=null==(h=B.settings.branding)?void 0:h.show_powered_by)||x,onChange:e=>R({branding:{...B.settings.branding,show_powered_by:e.target.checked}}),className:"rounded"}),(0,i.jsx)(d.J,{htmlFor:"show-powered-by",children:'Show "Powered by Flint" attribution'})]})]})]});case"settings":return(0,i.jsx)("div",{className:"space-y-6",children:(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("h3",{className:"text-lg font-medium",children:"Completion Settings"}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)("input",{type:"checkbox",id:"email-notifications",checked:null==(g=null==(u=B.settings.completion)?void 0:u.email_notifications)||g,onChange:e=>R({completion:{...B.settings.completion,email_notifications:e.target.checked}}),className:"rounded"}),(0,i.jsx)(d.J,{htmlFor:"email-notifications",children:"Send email notifications when leads complete the campaign"})]})]})});case"review":return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)(r.Zp,{children:[(0,i.jsx)(r.aR,{children:(0,i.jsx)(r.ZB,{className:"text-lg",children:"Campaign Details"})}),(0,i.jsxs)(r.Wu,{className:"space-y-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium",children:"Name:"})," ",B.name]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium",children:"Description:"})," ",B.description||"No description"]})]})]}),(0,i.jsxs)(r.Zp,{children:[(0,i.jsx)(r.aR,{children:(0,i.jsx)(r.ZB,{className:"text-lg",children:"Theme Preview"})}),(0,i.jsx)(r.Wu,{children:(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)("div",{className:"w-6 h-6 rounded border",style:{backgroundColor:null==(j=B.settings.theme)?void 0:j.primary_color}}),(0,i.jsxs)("span",{className:"text-sm",children:["Primary: ",null==(v=B.settings.theme)?void 0:v.primary_color]})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)("div",{className:"w-6 h-6 rounded border",style:{backgroundColor:null==(y=B.settings.theme)?void 0:y.secondary_color}}),(0,i.jsxs)("span",{className:"text-sm",children:["Secondary: ",null==(f=B.settings.theme)?void 0:f.secondary_color]})]}),(0,i.jsxs)("div",{className:"text-sm",children:[(0,i.jsx)("span",{className:"font-medium",children:"Font:"})," ",null==(b=B.settings.theme)?void 0:b.font_family]})]})})]})]}),(0,i.jsxs)(r.Zp,{children:[(0,i.jsx)(r.aR,{children:(0,i.jsx)(r.ZB,{className:"text-lg",children:"Settings Summary"})}),(0,i.jsx)(r.Wu,{children:(0,i.jsxs)("ul",{className:"space-y-1 text-sm",children:[(0,i.jsxs)("li",{children:[(0,i.jsx)(p.A,{className:"h-4 w-4 inline mr-2 text-green-600"}),(null==(w=B.settings.branding)?void 0:w.show_powered_by)?"Show":"Hide"," Flint attribution"]}),(0,i.jsxs)("li",{children:[(0,i.jsx)(p.A,{className:"h-4 w-4 inline mr-2 text-green-600"}),"Email notifications: ",(null==(_=B.settings.completion)?void 0:_.email_notifications)?"Enabled":"Disabled"]})]})})]})]});default:return null}})()})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsxs)(t.$,{variant:"outline",onClick:()=>{let e=Z();e>0&&f(y[e-1].id)},disabled:0===Z(),children:[(0,i.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Previous"]}),(0,i.jsx)("div",{className:"flex space-x-3",children:"review"!==N?(0,i.jsxs)(t.$,{onClick:()=>{let e=Z();e<y.length-1&&f(y[e+1].id)},disabled:!(()=>{switch(N){case"basic":return B.name.trim().length>0;case"theme":case"settings":return!0;default:return!1}})(),children:["Next",(0,i.jsx)(j.A,{className:"h-4 w-4 ml-2"})]}):(0,i.jsx)(t.$,{onClick:J,disabled:b||!B.name.trim(),className:"min-w-[120px]",children:b?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating..."]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(v.A,{className:"h-4 w-4 mr-2"}),"Create Campaign"]})})})]}),_&&(0,i.jsx)(r.Zp,{className:"mt-6 bg-blue-50 border-blue-200",children:(0,i.jsx)(r.Wu,{className:"pt-6",children:(0,i.jsxs)("div",{className:"text-blue-800",children:[(0,i.jsxs)("p",{className:"text-sm",children:[(0,i.jsx)("strong",{children:"Usage:"})," ",_.monthly_campaigns_used," of ",_.monthly_campaign_limit," campaigns used this month"]}),_.monthly_campaigns_used>=_.monthly_campaign_limit&&(0,i.jsxs)("p",{className:"text-sm mt-1",children:["You've reached your monthly limit.",(0,i.jsx)(t.$,{variant:"link",className:"text-blue-800 underline p-0 ml-1",onClick:()=>a.push("/dashboard/settings/billing"),children:"Upgrade your plan"}),"to create more campaigns."]})]})})})]})})]}):null}},48050:(e,s,a)=>{Promise.resolve().then(a.bind(a,12152))}},e=>{var s=s=>e(e.s=s);e.O(0,[935,352,463,98,441,684,358],()=>s(48050)),_N_E=e.O()}]);