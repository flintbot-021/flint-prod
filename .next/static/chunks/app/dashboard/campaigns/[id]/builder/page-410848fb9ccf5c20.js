(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[569],{1154:(e,s,r)=>{"use strict";r.d(s,{A:()=>a});let a=(0,r(9946).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},2657:(e,s,r)=>{"use strict";r.d(s,{A:()=>a});let a=(0,r(9946).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},3127:(e,s,r)=>{"use strict";r.d(s,{A:()=>a});let a=(0,r(9946).A)("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]])},4229:(e,s,r)=>{"use strict";r.d(s,{A:()=>a});let a=(0,r(9946).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},4869:(e,s,r)=>{"use strict";r.d(s,{A:()=>a});let a=(0,r(9946).A)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]])},5196:(e,s,r)=>{"use strict";r.d(s,{A:()=>a});let a=(0,r(9946).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},5339:(e,s,r)=>{"use strict";r.d(s,{A:()=>a});let a=(0,r(9946).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},5695:(e,s,r)=>{"use strict";var a=r(8999);r.o(a,"useParams")&&r.d(s,{useParams:function(){return a.useParams}}),r.o(a,"useRouter")&&r.d(s,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(s,{useSearchParams:function(){return a.useSearchParams}})},6251:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>E});var a=r(5155),t=r(2115),l=r(5695),i=r(6052),n=r(7712),c=r(7168),d=r(9852),o=r(7550),m=r(5196),x=r(9946);let u=(0,x.A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),h=(0,x.A)("pen-line",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);var p=r(1154),g=r(4229),y=r(2657),f=r(4869),b=r(3999);function j(e){let{campaignName:s,campaignStatus:r,isPublished:i=!1,isSaving:n=!1,canPublish:x=!0,onCampaignNameChange:j,onSave:v,onPreview:N,onPublish:w,className:k}=e,A=(0,l.useRouter)(),[C,E]=(0,t.useState)(!1),[z,S]=(0,t.useState)(s),[M,P]=(0,t.useState)(!1),R=(0,t.useRef)(null),B=(0,t.useRef)(null);(0,t.useEffect)(()=>{S(s)},[s]),(0,t.useEffect)(()=>{let e=()=>{B.current&&P(B.current.getBoundingClientRect().top<=0)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),(0,t.useEffect)(()=>{C&&R.current&&(R.current.focus(),R.current.select())},[C]);let F=()=>{z.trim()&&z!==s&&(null==j||j(z.trim())),E(!1)},_=()=>{S(s),E(!1)};return(0,a.jsxs)("div",{ref:B,className:(0,b.cn)("bg-white border-b border-gray-200 transition-all duration-200",M&&"shadow-md",k),style:{position:"sticky",top:0,zIndex:50},children:[(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)(c.$,{variant:"ghost",size:"sm",onClick:()=>{A.push("/dashboard/campaigns")},className:"text-gray-600 hover:text-gray-900",children:[(0,a.jsx)(o.A,{className:"h-4 w-4 mr-2"}),"Back to Campaigns"]}),(0,a.jsx)("div",{className:"h-6 w-px bg-gray-300"}),(0,a.jsx)("div",{className:"flex items-center space-x-2",children:C?(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.p,{ref:R,value:z,onChange:e=>S(e.target.value),onKeyDown:e=>{"Enter"===e.key?F():"Escape"===e.key&&_()},onBlur:F,className:"h-8 text-lg font-semibold min-w-[200px]",placeholder:"Campaign name"}),(0,a.jsx)(c.$,{variant:"ghost",size:"sm",onClick:F,className:"h-8 w-8 p-0 text-green-600 hover:text-green-700",children:(0,a.jsx)(m.A,{className:"h-4 w-4"})}),(0,a.jsx)(c.$,{variant:"ghost",size:"sm",onClick:_,className:"h-8 w-8 p-0 text-red-600 hover:text-red-700",children:(0,a.jsx)(u,{className:"h-4 w-4"})})]}):(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("h1",{className:"text-lg font-semibold text-gray-900",children:s}),(0,a.jsx)(c.$,{variant:"ghost",size:"sm",onClick:()=>{E(!0)},className:"h-8 w-8 p-0 text-gray-400 hover:text-gray-600",children:(0,a.jsx)(h,{className:"h-3 w-3"})})]})}),(0,a.jsx)("div",{className:(0,b.cn)("px-2 py-1 rounded-full text-xs font-medium border",(()=>{switch(r){case"published":return"bg-green-100 text-green-800 border-green-200";case"draft":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}})()),children:(()=>{switch(r){case"published":return"Published";case"draft":return"Draft";case"archived":return"Archived";default:return"Unknown"}})()})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[v&&(0,a.jsx)(c.$,{variant:"outline",size:"sm",onClick:v,disabled:n,className:"text-gray-600 border-gray-300 hover:text-gray-900 hover:border-gray-400",children:n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.A,{className:"h-4 w-4 mr-2"}),"Save"]})}),N&&(0,a.jsxs)(c.$,{variant:"outline",size:"sm",onClick:N,className:"text-blue-600 border-blue-300 hover:text-blue-700 hover:border-blue-400",children:[(0,a.jsx)(y.A,{className:"h-4 w-4 mr-2"}),"Preview"]}),w&&(0,a.jsxs)(c.$,{size:"sm",onClick:w,disabled:!x||n,className:(0,b.cn)(i?"bg-orange-600 hover:bg-orange-700 text-white":"bg-green-600 hover:bg-green-700 text-white"),children:[(0,a.jsx)(f.A,{className:"h-4 w-4 mr-2"}),i?"Unpublish":"Publish"]})]})]})}),n&&(0,a.jsx)("div",{className:"h-1 bg-gray-200",children:(0,a.jsx)("div",{className:"h-full bg-blue-600 animate-pulse",style:{width:"100%"}})})]})}var v=r(8482),N=r(5339);let w=(0,x.A)("panels-top-left",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);var k=r(3127);let A=(0,x.A)("type",[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]]);var C=r(381);function E(){let{user:e,loading:s}=(0,i.A)(),r=(0,l.useRouter)(),c=(0,l.useParams)(),d=null==c?void 0:c.id,[o,m]=(0,t.useState)(null),[x,u]=(0,t.useState)(!0),[h,g]=(0,t.useState)(!1),[y,f]=(0,t.useState)(null);(0,t.useEffect)(()=>{s||e||r.push("/auth/login")},[e,s,r]),(0,t.useEffect)(()=>{e&&d&&b()},[e,d]);let b=async()=>{try{u(!0),f(null);let e=await (0,n.jz)(d);if(!e.success)throw Error(e.error||"Failed to load campaign");if(!e.data)throw Error("Campaign not found");m(e.data)}catch(e){console.error("Error loading campaign:",e),f(e instanceof Error?e.message:"An error occurred")}finally{u(!1)}},E=async e=>{if(o)try{g(!0);let s=await (0,n.SX)(o.id,{name:e});if(!s.success)throw Error(s.error||"Failed to update campaign name");m(s=>s?{...s,name:e}:null)}catch(e){console.error("Error updating campaign name:",e),f(e instanceof Error?e.message:"Failed to update campaign name")}finally{g(!1)}},z=async()=>{if(o)try{g(!0),f(null),await new Promise(e=>setTimeout(e,1e3)),console.log("Campaign saved:",o.id)}catch(e){console.error("Error saving campaign:",e),f(e instanceof Error?e.message:"Failed to save campaign")}finally{g(!1)}},S=async()=>{if(o)try{if(g(!0),f(null),"published"===o.status){let e=await (0,n.SX)(o.id,{status:"draft"});if(!e.success)throw Error(e.error||"Failed to unpublish campaign");m(e=>e?{...e,status:"draft",published_at:null}:null)}else{let e=await (0,n.s2)(o.id);if(!e.success)throw Error(e.error||"Failed to publish campaign");m(e=>e?{...e,status:"published",published_at:new Date().toISOString()}:null)}}catch(e){console.error("Error publishing/unpublishing campaign:",e),f(e instanceof Error?e.message:"Failed to update campaign status")}finally{g(!1)}};return s||x?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(p.A,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading campaign builder..."})]})}):e?y?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,a.jsx)("div",{className:"px-4 py-6 sm:px-0",children:(0,a.jsx)(v.Zp,{className:"border-red-200 bg-red-50",children:(0,a.jsx)(v.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3 text-red-800",children:[(0,a.jsx)(N.A,{className:"h-5 w-5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Error loading campaign"}),(0,a.jsx)("p",{className:"text-sm mt-1",children:y}),(0,a.jsx)("button",{onClick:b,className:"mt-2 text-sm underline hover:no-underline",children:"Try Again"})]})]})})})})})}):o?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(j,{campaignName:o.name,campaignStatus:o.status,isPublished:"published"===o.status,isSaving:h,canPublish:!0,onCampaignNameChange:E,onSave:z,onPreview:()=>{if(!o)return;let e="/campaigns/".concat(o.id,"/preview");window.open(e,"_blank","noopener,noreferrer")},onPublish:S}),(0,a.jsx)("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"px-4 py-6 sm:px-0",children:[y&&(0,a.jsx)(v.Zp,{className:"mb-6 border-red-200 bg-red-50",children:(0,a.jsx)(v.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3 text-red-800",children:[(0,a.jsx)(N.A,{className:"h-5 w-5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Error"}),(0,a.jsx)("p",{className:"text-sm mt-1",children:y}),(0,a.jsx)("button",{onClick:()=>f(null),className:"mt-2 text-sm underline hover:no-underline",children:"Dismiss"})]})]})})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsxs)(v.Zp,{children:[(0,a.jsxs)(v.aR,{children:[(0,a.jsx)(v.ZB,{className:"text-lg",children:"Builder Tools"}),(0,a.jsx)(v.BT,{children:"Customize your campaign sections and design"})]}),(0,a.jsx)(v.Wu,{className:"space-y-4",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("button",{className:"w-full flex items-center space-x-3 p-3 text-left rounded-lg border border-gray-200 hover:border-blue-300 hover:bg-blue-50 transition-colors",children:[(0,a.jsx)(w,{className:"h-5 w-5 text-gray-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:"Sections"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Add & organize content"})]})]}),(0,a.jsxs)("button",{className:"w-full flex items-center space-x-3 p-3 text-left rounded-lg border border-gray-200 hover:border-blue-300 hover:bg-blue-50 transition-colors",children:[(0,a.jsx)(k.A,{className:"h-5 w-5 text-gray-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:"Design"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Colors & styling"})]})]}),(0,a.jsxs)("button",{className:"w-full flex items-center space-x-3 p-3 text-left rounded-lg border border-gray-200 hover:border-blue-300 hover:bg-blue-50 transition-colors",children:[(0,a.jsx)(A,{className:"h-5 w-5 text-gray-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:"Typography"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Fonts & text styles"})]})]}),(0,a.jsxs)("button",{className:"w-full flex items-center space-x-3 p-3 text-left rounded-lg border border-gray-200 hover:border-blue-300 hover:bg-blue-50 transition-colors",children:[(0,a.jsx)(C.A,{className:"h-5 w-5 text-gray-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:"Settings"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Campaign options"})]})]})]})})]})}),(0,a.jsx)("div",{className:"lg:col-span-3",children:(0,a.jsxs)(v.Zp,{children:[(0,a.jsxs)(v.aR,{children:[(0,a.jsx)(v.ZB,{className:"text-lg",children:"Campaign Preview"}),(0,a.jsx)(v.BT,{children:"This is how your campaign will appear to visitors"})]}),(0,a.jsx)(v.Wu,{children:(0,a.jsx)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center min-h-[400px] flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-gray-500",children:[(0,a.jsx)(w,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),(0,a.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Start Building Your Campaign"}),(0,a.jsx)("p",{className:"text-sm",children:"Select a tool from the sidebar to begin customizing your campaign. Add sections, customize the design, and create an engaging experience for your visitors."})]})})})]})})]})]})})]}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,a.jsx)("div",{className:"px-4 py-6 sm:px-0",children:(0,a.jsx)(v.Zp,{children:(0,a.jsx)(v.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-gray-600",children:"Campaign not found"}),(0,a.jsx)("button",{onClick:()=>r.push("/dashboard/campaigns"),className:"mt-2 text-blue-600 underline hover:no-underline",children:"Back to Campaigns"})]})})})})})}):null}},7011:(e,s,r)=>{Promise.resolve().then(r.bind(r,6251))},7550:(e,s,r)=>{"use strict";r.d(s,{A:()=>a});let a=(0,r(9946).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},9852:(e,s,r)=>{"use strict";r.d(s,{p:()=>i});var a=r(5155),t=r(2115),l=r(3999);let i=t.forwardRef((e,s)=>{let{className:r,type:t,...i}=e;return(0,a.jsx)("input",{type:t,className:(0,l.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:s,...i})});i.displayName="Input"},9946:(e,s,r)=>{"use strict";r.d(s,{A:()=>m});var a=r(2115);let t=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,r)=>r?r.toUpperCase():s.toLowerCase()),i=e=>{let s=l(e);return s.charAt(0).toUpperCase()+s.slice(1)},n=function(){for(var e=arguments.length,s=Array(e),r=0;r<e;r++)s[r]=arguments[r];return s.filter((e,s,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===s).join(" ").trim()},c=e=>{for(let s in e)if(s.startsWith("aria-")||"role"===s||"title"===s)return!0};var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,a.forwardRef)((e,s)=>{let{color:r="currentColor",size:t=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:o="",children:m,iconNode:x,...u}=e;return(0,a.createElement)("svg",{ref:s,...d,width:t,height:t,stroke:r,strokeWidth:i?24*Number(l)/Number(t):l,className:n("lucide",o),...!m&&!c(u)&&{"aria-hidden":"true"},...u},[...x.map(e=>{let[s,r]=e;return(0,a.createElement)(s,r)}),...Array.isArray(m)?m:[m]])}),m=(e,s)=>{let r=(0,a.forwardRef)((r,l)=>{let{className:c,...d}=r;return(0,a.createElement)(o,{ref:l,iconNode:s,className:n("lucide-".concat(t(i(e))),"lucide-".concat(e),c),...d})});return r.displayName=i(e),r}}},e=>{var s=s=>e(e.s=s);e.O(0,[935,352,139,441,684,358],()=>s(7011)),_N_E=e.O()}]);