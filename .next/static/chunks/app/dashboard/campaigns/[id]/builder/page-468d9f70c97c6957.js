(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[569],{18530:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>eG});var a=t(95155),l=t(12115),r=t(35695),i=t(76052),n=t(17712);let c=[{id:"question-multiple-choice",name:"Multiple Choice",description:"Single or multiple selection questions",icon:"CheckSquare",category:"input",color:"bg-blue-100 text-blue-800 border-blue-200",defaultSettings:{question:"What is your preference?",options:["Option 1","Option 2","Option 3"],allowMultiple:!1,required:!0}},{id:"question-text",name:"Text Input",description:"Short text or long text responses",icon:"Type",category:"input",color:"bg-blue-100 text-blue-800 border-blue-200",defaultSettings:{question:"Please provide your answer",placeholder:"Type your answer here...",maxLength:500,required:!0,inputType:"text"}},{id:"question-rating",name:"Rating Scale",description:"Star ratings or numeric scales",icon:"Star",category:"input",color:"bg-blue-100 text-blue-800 border-blue-200",defaultSettings:{question:"How would you rate this?",scale:5,scaleType:"stars",required:!0}},{id:"capture-email",name:"Email Capture",description:"Collect email addresses",icon:"Mail",category:"input",color:"bg-green-100 text-green-800 border-green-200",defaultSettings:{label:"Email Address",placeholder:"Enter your email...",required:!0,validation:"email"}},{id:"capture-contact",name:"Contact Form",description:"Full contact information collection",icon:"UserPlus",category:"input",color:"bg-green-100 text-green-800 border-green-200",defaultSettings:{fields:["name","email","phone"],requiredFields:["name","email"],title:"Get in Touch"}},{id:"capture",name:"Lead Capture",description:"Flexible lead data collection form",icon:"Users",category:"input",color:"bg-green-100 text-green-800 border-green-200",defaultSettings:{title:"Get Your Results",subheading:"Enter your information to unlock your personalized results",enabledFields:{name:!0,email:!0,phone:!1},requiredFields:{name:!0,email:!0,phone:!1},fieldLabels:{name:"Full Name",email:"Email Address",phone:"Phone Number"},fieldPlaceholders:{name:"Enter your full name",email:"your@email.com",phone:"+1 (555) 123-4567"},submitButtonText:"Get My Results",gdprConsent:!1,marketingConsent:!1}},{id:"info-text",name:"Text Block",description:"Rich text content and paragraphs",icon:"FileText",category:"content",color:"bg-purple-100 text-purple-800 border-purple-200",defaultSettings:{title:"Information",content:"Add your content here...",alignment:"left"}},{id:"info-image",name:"Image",description:"Images with optional captions",icon:"Image",category:"content",color:"bg-purple-100 text-purple-800 border-purple-200",defaultSettings:{src:"",alt:"",caption:"",alignment:"center"}},{id:"info-video",name:"Video",description:"Embedded videos and media",icon:"Play",category:"content",color:"bg-purple-100 text-purple-800 border-purple-200",defaultSettings:{src:"",title:"",autoplay:!1,controls:!0}},{id:"logic-conditional",name:"Conditional Logic",description:"Show/hide content based on answers",icon:"GitBranch",category:"logic",color:"bg-orange-100 text-orange-800 border-orange-200",defaultSettings:{conditions:[],actions:[]}},{id:"logic-calculator",name:"Score Calculator",description:"Calculate scores based on responses",icon:"Calculator",category:"logic",color:"bg-orange-100 text-orange-800 border-orange-200",defaultSettings:{scoring:{},showScore:!0}},{id:"output-results",name:"Results Page",description:"Display personalized results",icon:"Target",category:"output",color:"bg-emerald-100 text-emerald-800 border-emerald-200",defaultSettings:{title:"Your Results",content:"Based on your answers...",showScore:!1}},{id:"output-download",name:"Download Link",description:"Provide downloadable resources",icon:"Download",category:"output",color:"bg-emerald-100 text-emerald-800 border-emerald-200",defaultSettings:{title:"Download Your Resource",description:"Click below to download",fileUrl:"",fileName:"resource.pdf"}},{id:"output-redirect",name:"Redirect",description:"Redirect to external URL",icon:"ExternalLink",category:"output",color:"bg-emerald-100 text-emerald-800 border-emerald-200",defaultSettings:{url:"",delay:0,message:"Redirecting..."}}],d=e=>c.find(s=>s.id===e),o=e=>c.filter(s=>s.category===e),m=[{id:"input",name:"Input & Questions",icon:"HelpCircle"},{id:"content",name:"Content",icon:"FileText"},{id:"logic",name:"Logic & Flow",icon:"GitBranch"},{id:"output",name:"Output & Results",icon:"Target"}];var x=t(97168),u=t(89852),h=t(35169),p=t(5196),g=t(54416),j=t(44940),b=t(51154),v=t(4229),f=t(92657),y=t(34869),N=t(53999);function w(e){let{campaignName:s,campaignStatus:t,isPublished:i=!1,isSaving:n=!1,canPublish:c=!0,onCampaignNameChange:d,onSave:o,onPreview:m,onPublish:w,className:S}=e,C=(0,r.useRouter)(),[k,A]=(0,l.useState)(!1),[E,T]=(0,l.useState)(s),[L,z]=(0,l.useState)(!1),q=(0,l.useRef)(null),P=(0,l.useRef)(null);(0,l.useEffect)(()=>{T(s)},[s]),(0,l.useEffect)(()=>{let e=()=>{P.current&&z(P.current.getBoundingClientRect().top<=0)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),(0,l.useEffect)(()=>{k&&q.current&&(q.current.focus(),q.current.select())},[k]);let F=()=>{E.trim()&&E!==s&&(null==d||d(E.trim())),A(!1)},I=()=>{T(s),A(!1)};return(0,a.jsxs)("div",{ref:P,className:(0,N.cn)("bg-white border-b border-gray-200 transition-all duration-200",L&&"shadow-md",S),style:{position:"sticky",top:0,zIndex:50},children:[(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)(x.$,{variant:"ghost",size:"sm",onClick:()=>{C.push("/dashboard/campaigns")},className:"text-gray-600 hover:text-gray-900",children:[(0,a.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Back to Campaigns"]}),(0,a.jsx)("div",{className:"h-6 w-px bg-gray-300"}),(0,a.jsx)("div",{className:"flex items-center space-x-2",children:k?(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(u.p,{ref:q,value:E,onChange:e=>T(e.target.value),onKeyDown:e=>{"Enter"===e.key?F():"Escape"===e.key&&I()},onBlur:F,className:"h-8 text-lg font-semibold min-w-[200px]",placeholder:"Campaign name"}),(0,a.jsx)(x.$,{variant:"ghost",size:"sm",onClick:F,className:"h-8 w-8 p-0 text-green-600 hover:text-green-700",children:(0,a.jsx)(p.A,{className:"h-4 w-4"})}),(0,a.jsx)(x.$,{variant:"ghost",size:"sm",onClick:I,className:"h-8 w-8 p-0 text-red-600 hover:text-red-700",children:(0,a.jsx)(g.A,{className:"h-4 w-4"})})]}):(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("h1",{className:"text-lg font-semibold text-gray-900",children:s}),(0,a.jsx)(x.$,{variant:"ghost",size:"sm",onClick:()=>{A(!0)},className:"h-8 w-8 p-0 text-gray-400 hover:text-gray-600",children:(0,a.jsx)(j.A,{className:"h-3 w-3"})})]})}),(0,a.jsx)("div",{className:(0,N.cn)("px-2 py-1 rounded-full text-xs font-medium border",(()=>{switch(t){case"published":return"bg-green-100 text-green-800 border-green-200";case"draft":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}})()),children:(()=>{switch(t){case"published":return"Published";case"draft":return"Draft";case"archived":return"Archived";default:return"Unknown"}})()})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[o&&(0,a.jsx)(x.$,{variant:"outline",size:"sm",onClick:o,disabled:n,className:"text-gray-600 border-gray-300 hover:text-gray-900 hover:border-gray-400",children:n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v.A,{className:"h-4 w-4 mr-2"}),"Save"]})}),m&&(0,a.jsxs)(x.$,{variant:"outline",size:"sm",onClick:m,className:"text-blue-600 border-blue-300 hover:text-blue-700 hover:border-blue-400",children:[(0,a.jsx)(f.A,{className:"h-4 w-4 mr-2"}),"Preview"]}),w&&(0,a.jsxs)(x.$,{size:"sm",onClick:w,disabled:!c||n,className:(0,N.cn)(i?"bg-orange-600 hover:bg-orange-700 text-white":"bg-green-600 hover:bg-green-700 text-white"),children:[(0,a.jsx)(y.A,{className:"h-4 w-4 mr-2"}),i?"Unpublish":"Publish"]})]})]})}),n&&(0,a.jsx)("div",{className:"h-1 bg-gray-200",children:(0,a.jsx)("div",{className:"h-full bg-blue-600 animate-pulse",style:{width:"100%"}})})]})}var S=t(88145),C=t(75143),k=t(47937);function A(e){let{sectionType:s,className:t}=e,{attributes:l,listeners:r,setNodeRef:i,transform:n,isDragging:c}=(0,C.PM)({id:"section-type-".concat(s.id),data:{type:"section-type",sectionType:s}}),d=n?{transform:"translate3d(".concat(n.x,"px, ").concat(n.y,"px, 0)")}:void 0,o=k[s.icon];return(0,a.jsxs)("div",{ref:i,style:d,...r,...l,className:(0,N.cn)("group relative cursor-grab active:cursor-grabbing","p-3 rounded-lg border-2 border-dashed border-gray-200","hover:border-gray-300 hover:bg-gray-50","transition-all duration-200","bg-white",c&&"opacity-50 scale-95 shadow-lg border-blue-300",t),children:[(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:(0,N.cn)("flex-shrink-0 w-8 h-8 rounded-md flex items-center justify-center",s.color),children:o&&(0,a.jsx)(o,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900 truncate",children:s.name}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:s.description})]})]}),(0,a.jsx)("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,a.jsx)("div",{className:"grid grid-cols-2 gap-0.5",children:[...Array(6)].map((e,s)=>(0,a.jsx)("div",{className:"w-1 h-1 bg-gray-400 rounded-full"},s))})}),c&&(0,a.jsx)("div",{className:"absolute inset-0 bg-blue-100 bg-opacity-50 rounded-lg border-2 border-blue-300 border-dashed"})]})}var E=t(47924),T=t(66474),L=t(13052);function z(e){let{className:s}=e,[t,r]=(0,l.useState)(""),[i,n]=(0,l.useState)(new Set(["input"])),d=c.filter(e=>e.name.toLowerCase().includes(t.toLowerCase())||e.description.toLowerCase().includes(t.toLowerCase())),x=e=>{n(s=>{let t=new Set(s);return t.has(e)?t.delete(e):t.add(e),t})},h=e=>{let s=o(e);return t?s.filter(e=>e.name.toLowerCase().includes(t.toLowerCase())||e.description.toLowerCase().includes(t.toLowerCase())).length:s.length},p=e=>{let s=o(e);return t?s.filter(e=>e.name.toLowerCase().includes(t.toLowerCase())||e.description.toLowerCase().includes(t.toLowerCase())):s};return(0,a.jsxs)("div",{className:(0,N.cn)("h-full flex flex-col",s),children:[(0,a.jsxs)("div",{className:"p-4 border-b border-gray-200",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Section Components"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(E.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)(u.p,{placeholder:"Search sections...",value:t,onChange:e=>r(e.target.value),className:"pl-10"})]}),t&&(0,a.jsxs)("div",{className:"mt-2 text-sm text-gray-500",children:[d.length," section",1!==d.length?"s":""," found"]})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto",children:t?(0,a.jsx)("div",{className:"p-4 space-y-3",children:d.length>0?d.map(e=>(0,a.jsx)(A,{sectionType:e},e.id)):(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(E.A,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,a.jsx)("p",{children:"No sections found"}),(0,a.jsx)("p",{className:"text-sm",children:"Try a different search term"})]})}):(0,a.jsx)("div",{className:"divide-y divide-gray-200",children:m.map(e=>{let s=h(e.id),t=i.has(e.id),l=k[e.icon];return 0===s?null:(0,a.jsxs)("div",{children:[(0,a.jsx)("button",{onClick:()=>x(e.id),className:"w-full px-4 py-3 text-left hover:bg-gray-50 transition-colors",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[t?(0,a.jsx)(T.A,{className:"h-4 w-4 text-gray-400"}):(0,a.jsx)(L.A,{className:"h-4 w-4 text-gray-400"}),l&&(0,a.jsx)(l,{className:"h-4 w-4 text-gray-600"})]}),(0,a.jsx)("span",{className:"font-medium text-gray-900",children:e.name})]}),(0,a.jsx)(S.E,{variant:"secondary",className:"text-xs",children:s})]})}),t&&(0,a.jsx)("div",{className:"px-4 pb-4 space-y-3",children:p(e.id).map(e=>(0,a.jsx)(A,{sectionType:e},e.id))})]},e.id)})})}),(0,a.jsx)("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:(0,a.jsxs)("div",{className:"text-xs text-gray-500 space-y-1",children:[(0,a.jsxs)("p",{children:["\uD83D\uDCA1 ",(0,a.jsx)("strong",{children:"Tip:"})," Drag sections to the canvas to add them"]}),(0,a.jsx)("p",{children:"\uD83D\uDD0D Use search to quickly find specific section types"})]})})]})}var q=t(50402),P=t(78266),F=t(88482),I=t(99474),D=t(85339);let J={default:"text-sm text-gray-900",heading:"text-xl font-semibold text-gray-900",subheading:"text-lg font-medium text-gray-900",body:"text-sm text-gray-700",caption:"text-xs text-gray-500"},O={sm:"text-xs",md:"text-sm",lg:"text-base"},R=(0,l.forwardRef)((e,s)=>{let{value:t,onSave:r,className:i,inputClassName:n,editClassName:c,errorClassName:d,placeholder:o="Click to edit...",disabled:m=!1,variant:x="default",size:h="md",showEditIcon:g=!1,showSaveStatus:j=!0,truncate:v=!1,multiline:f=!1,maxLength:y,required:w=!1,validation:S,autoSave:C=!0,autoSaveDelay:k=500,...A}=e,{isEditing:E,value:T,displayValue:L,error:z,isSaving:q,isDirty:P,startEdit:F,setValue:R,handleKeyDown:V,handleBlur:U,inputRef:_}=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{autoSave:t=!0,autoSaveDelay:a=500,validation:r,onSave:i,onCancel:n,onEdit:c,placeholder:d="",multiline:o=!1,maxLength:m,required:x=!1}=s,[u,h]=(0,l.useState)(!1),[p,g]=(0,l.useState)(e),[j,b]=(0,l.useState)(null),[v,f]=(0,l.useState)(!1),[y,N]=(0,l.useState)(e),w=(0,l.useRef)(null),S=function(e,s){let[t,a]=(0,l.useState)(e);return(0,l.useEffect)(()=>{let t=setTimeout(()=>{a(e)},s);return()=>{clearTimeout(t)}},[e,s]),t}(p,a),C=p!==y;(0,l.useEffect)(()=>{u||e===y||(g(e),N(e))},[e,u,y]);let k=(0,l.useCallback)(e=>x&&!e.trim()?"This field is required":m&&e.length>m?"Maximum length is ".concat(m," characters"):r?r(e):null,[x,m,r]);(0,l.useEffect)(()=>{t&&u&&C&&!j&&(k(S)||E())},[S,t,u,C,j,k]),(0,l.useEffect)(()=>{u&&b(k(p))},[p,u,k]);let A=(0,l.useCallback)(()=>{h(!0),N(p),b(null),null==c||c(),setTimeout(()=>{var e;null==(e=w.current)||e.focus(),w.current&&"select"in w.current&&w.current.select()},0)},[p,c]),E=(0,l.useCallback)(async()=>{if(j)return;let e=k(p);if(e)return void b(e);try{f(!0),await (null==i?void 0:i(p)),N(p),h(!1),b(null)}catch(e){b(e instanceof Error?e.message:"Failed to save")}finally{f(!1)}},[p,j,k,i]),T=(0,l.useCallback)(()=>{g(y),h(!1),b(null),null==n||n()},[y,n]),L=(0,l.useCallback)(e=>{switch(e.key){case"Enter":(!o||o&&e.ctrlKey)&&(e.preventDefault(),E());break;case"Escape":e.preventDefault(),T();break;case"Tab":j||E()}},[E,T,o,j]),z=(0,l.useCallback)(()=>{!j&&C?E():C||h(!1)},[j,C,E]),q=p||d;return{isEditing:u,value:p,displayValue:q,error:j,isSaving:v,isDirty:C,startEdit:A,save:E,cancel:T,setValue:g,handleKeyDown:L,handleBlur:z,inputRef:w}}(t,{onSave:r,placeholder:o,multiline:f,maxLength:y,required:w,validation:S,autoSave:C,autoSaveDelay:k,...A}),B=!t&&!o;if(m)return(0,a.jsx)("div",{ref:s,className:(0,N.cn)(J[x],O[h],v&&"truncate","cursor-not-allowed opacity-50",i),children:L});if(E){let e=f?I.T:u.p;return(0,a.jsxs)("div",{ref:s,className:(0,N.cn)("relative",c),children:[(0,a.jsx)(e,{ref:_,value:T,onChange:e=>R(e.target.value),onKeyDown:V,onBlur:U,placeholder:o,maxLength:y,className:(0,N.cn)("w-full",J[x],O[h],z&&"border-red-500 focus:ring-red-500",n),disabled:q,autoFocus:!0}),j&&(q||P)&&(0,a.jsx)("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 flex items-center",children:q?(0,a.jsx)(b.A,{className:"h-3 w-3 animate-spin text-blue-500"}):P?(0,a.jsx)("div",{className:"w-2 h-2 bg-orange-400 rounded-full"}):(0,a.jsx)(p.A,{className:"h-3 w-3 text-green-500"})}),z&&(0,a.jsxs)("div",{className:(0,N.cn)("absolute top-full left-0 mt-1 flex items-center space-x-1 text-xs text-red-600",d),children:[(0,a.jsx)(D.A,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:z})]}),y&&(0,a.jsxs)("div",{className:"absolute top-full right-0 mt-1 text-xs text-gray-400",children:[T.length,"/",y]})]})}return(0,a.jsxs)("div",{ref:s,onClick:F,className:(0,N.cn)("group relative cursor-text transition-colors",J[x],O[h],v&&"truncate",B&&"text-gray-400 italic","hover:bg-gray-50 rounded px-2 py-1 -mx-2 -my-1","focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1",i),tabIndex:0,role:"button","aria-label":"Edit ".concat(L||"text"),onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),F())},children:[L,g&&(0,a.jsx)("span",{className:"ml-2 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,a.jsx)("svg",{className:"w-3 h-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),B&&(0,a.jsx)("span",{className:"text-gray-300 select-none",children:o||"Click to add text..."})]})});R.displayName="InlineEditableText";var V=t(57434),U=t(67133),_=t(48021),B=t(78749),M=t(381),$=t(44020),H=t(24357),Z=t(62525);function Q(e){let{section:s,onUpdate:t,onDelete:r,onDuplicate:i,onConfigure:n,className:c,showConfiguration:o=!0}=e,[m,u]=(0,l.useState)(!1),{attributes:h,listeners:p,setNodeRef:g,transform:j,transition:v,isDragging:y}=(0,q.gl)({id:s.id,data:{type:"campaign-section",section:s}}),w={transform:P.Ks.Transform.toString(j),transition:v},S=d(s.type),C=S?k[S.icon]:V.A,A=async e=>{if(e.trim()!==s.title){u(!0);try{await t(s.id,{title:e.trim()})}catch(e){throw e}finally{u(!1)}}},E=async()=>{u(!0);try{await t(s.id,{isVisible:!s.isVisible})}catch(e){console.error("Failed to update visibility:",e)}finally{u(!1)}},T=()=>{null==n||n(s.id)};return(0,a.jsx)(F.Zp,{ref:g,style:w,className:(0,N.cn)("group relative transition-all duration-200",y&&"opacity-50 shadow-lg scale-105 rotate-2",!s.isVisible&&"opacity-60","hover:shadow-md",c),children:(0,a.jsx)(F.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("button",{...h,...p,className:"mt-2 p-1 text-gray-400 hover:text-gray-600 cursor-grab active:cursor-grabbing opacity-0 group-hover:opacity-100 transition-opacity",disabled:m,children:(0,a.jsx)(_.A,{className:"h-4 w-4"})}),(0,a.jsx)("div",{className:(0,N.cn)("flex-shrink-0 w-10 h-10 rounded-lg flex items-center justify-center mt-1",(null==S?void 0:S.color)||"bg-gray-100 text-gray-600",!s.isVisible&&"opacity-60"),children:C&&(0,a.jsx)(C,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,a.jsx)(R,{value:s.title,onSave:A,variant:"subheading",placeholder:"Enter section title...",className:(0,N.cn)("font-medium",s.isVisible?"text-gray-900":"text-gray-500"),showEditIcon:!1,showSaveStatus:!0,validation:e=>e.trim()?e.length>100?"Title must be 100 characters or less":null:"Section title is required",maxLength:100,required:!0,disabled:m}),m&&(0,a.jsx)(b.A,{className:"h-4 w-4 animate-spin text-blue-500"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-xs text-gray-500",children:[(0,a.jsx)("span",{className:"font-medium",children:(null==S?void 0:S.name)||s.type}),(0,a.jsx)("span",{children:"•"}),(0,a.jsxs)("span",{children:["Order ",s.order]}),(0,a.jsx)("span",{children:"•"}),(0,a.jsx)("span",{className:(0,N.cn)("px-2 py-1 rounded-full text-xs font-medium",(null==S?void 0:S.category)==="input"&&"bg-blue-100 text-blue-700",(null==S?void 0:S.category)==="content"&&"bg-green-100 text-green-700",(null==S?void 0:S.category)==="logic"&&"bg-purple-100 text-purple-700",(null==S?void 0:S.category)==="output"&&"bg-orange-100 text-orange-700"),children:null==S?void 0:S.category})]}),!s.isVisible&&(0,a.jsxs)("div",{className:"flex items-center space-x-1 text-xs text-orange-600 bg-orange-50 px-2 py-1 rounded-full",children:[(0,a.jsx)(B.A,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:"Hidden"})]})]}),(null==S?void 0:S.description)&&(0,a.jsx)("p",{className:"text-xs text-gray-500 mb-3 leading-relaxed",children:S.description}),s.settings&&Object.keys(s.settings).length>0&&(0,a.jsxs)("div",{className:"bg-gray-50 rounded-md p-3 mb-3",children:[(0,a.jsx)("div",{className:"text-xs text-gray-500 mb-2 font-medium",children:"Configuration:"}),(0,a.jsxs)("div",{className:"space-y-1",children:[Object.entries(s.settings).slice(0,3).map(e=>{let[s,t]=e;return(0,a.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,a.jsxs)("span",{className:"text-gray-600 capitalize",children:[s.replace(/([A-Z])/g," $1"),":"]}),(0,a.jsx)("span",{className:"text-gray-900 font-medium truncate ml-2 max-w-32",children:String(t)})]},s)}),Object.keys(s.settings).length>3&&(0,a.jsxs)("div",{className:"text-xs text-gray-400 pt-1 border-t border-gray-200",children:["+",Object.keys(s.settings).length-3," more settings"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(x.$,{variant:"ghost",size:"sm",onClick:E,disabled:m,className:"h-7 px-2 text-xs",children:s.isVisible?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.A,{className:"h-3 w-3 mr-1"}),"Visible"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(B.A,{className:"h-3 w-3 mr-1"}),"Hidden"]})}),o&&(0,a.jsxs)(x.$,{variant:"ghost",size:"sm",onClick:T,disabled:m,className:"h-7 px-2 text-xs",children:[(0,a.jsx)(M.A,{className:"h-3 w-3 mr-1"}),"Configure"]})]})]}),(0,a.jsxs)(U.rI,{children:[(0,a.jsx)(U.ty,{asChild:!0,children:(0,a.jsx)(x.$,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-gray-400 hover:text-gray-600 opacity-0 group-hover:opacity-100 transition-opacity",disabled:m,children:(0,a.jsx)($.A,{className:"h-4 w-4"})})}),(0,a.jsxs)(U.SQ,{align:"end",className:"w-48",children:[o&&(0,a.jsxs)(U._2,{onClick:T,children:[(0,a.jsx)(M.A,{className:"h-4 w-4 mr-2"}),"Configure Section"]}),(0,a.jsx)(U._2,{onClick:E,children:s.isVisible?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(B.A,{className:"h-4 w-4 mr-2"}),"Hide Section"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.A,{className:"h-4 w-4 mr-2"}),"Show Section"]})}),(0,a.jsxs)(U._2,{onClick:()=>{i(s.id)},children:[(0,a.jsx)(H.A,{className:"h-4 w-4 mr-2"}),"Duplicate"]}),(0,a.jsx)(U.mB,{}),(0,a.jsxs)(U._2,{onClick:()=>{confirm('Are you sure you want to delete "'.concat(s.title,'"?'))&&r(s.id)},className:"text-red-600 focus:text-red-600",children:[(0,a.jsx)(Z.A,{className:"h-4 w-4 mr-2"}),"Delete Section"]})]})]})]})})})}let W=0,G=[],Y=[],K=()=>{G.forEach(e=>e(Y))},X=e=>{let{title:s,description:t,variant:a="default",duration:l=4e3}=e,r=(++W).toString();return Y=[...Y,{id:r,title:s,description:t,variant:a,duration:l,isVisible:!0}],K(),setTimeout(()=>{Y=Y.filter(e=>e.id!==r),K()},l),r};var ee=t(22918),es=t(47863);function et(e){let{...s}=e;return(0,a.jsx)(ee.bL,{"data-slot":"select",...s})}function ea(e){let{...s}=e;return(0,a.jsx)(ee.WT,{"data-slot":"select-value",...s})}function el(e){let{className:s,size:t="default",children:l,...r}=e;return(0,a.jsxs)(ee.l9,{"data-slot":"select-trigger","data-size":t,className:(0,N.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...r,children:[l,(0,a.jsx)(ee.In,{asChild:!0,children:(0,a.jsx)(T.A,{className:"size-4 opacity-50"})})]})}function er(e){let{className:s,children:t,position:l="popper",...r}=e;return(0,a.jsx)(ee.ZL,{children:(0,a.jsxs)(ee.UC,{"data-slot":"select-content",className:(0,N.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:l,...r,children:[(0,a.jsx)(en,{}),(0,a.jsx)(ee.LM,{className:(0,N.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),(0,a.jsx)(ec,{})]})})}function ei(e){let{className:s,children:t,...l}=e;return(0,a.jsxs)(ee.q7,{"data-slot":"select-item",className:(0,N.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",s),...l,children:[(0,a.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,a.jsx)(ee.VF,{children:(0,a.jsx)(p.A,{className:"size-4"})})}),(0,a.jsx)(ee.p4,{children:t})]})}function en(e){let{className:s,...t}=e;return(0,a.jsx)(ee.PP,{"data-slot":"select-scroll-up-button",className:(0,N.cn)("flex cursor-default items-center justify-center py-1",s),...t,children:(0,a.jsx)(es.A,{className:"size-4"})})}function ec(e){let{className:s,...t}=e;return(0,a.jsx)(ee.wn,{"data-slot":"select-scroll-down-button",className:(0,N.cn)("flex cursor-default items-center justify-center py-1",s),...t,children:(0,a.jsx)(T.A,{className:"size-4"})})}function ed(e){let{section:s,isPreview:t=!1,isCollapsed:r=!1,onNameChange:i,onTypeChange:n,onPreviewToggle:o,onVisibilityToggle:m,onDelete:u,onConfigure:h,onCollapseToggle:p,className:g,dragHandleProps:j}=e,[b,v]=(0,l.useState)(!1),y=d(s.type),w=y?k[y.icon]:V.A,C=c.filter(e=>e.id!==s.type),A=async e=>{v(!0);try{n(e)}finally{v(!1)}};return(0,a.jsxs)("div",{className:(0,N.cn)("flex items-center justify-between p-3 bg-white border-b border-gray-200","hover:bg-gray-50 transition-colors group",g),children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[(0,a.jsx)("button",{...j,className:"text-gray-400 hover:text-gray-600 cursor-grab active:cursor-grabbing opacity-0 group-hover:opacity-100 transition-opacity",children:(0,a.jsx)(_.A,{className:"h-4 w-4"})}),(0,a.jsx)("div",{className:(0,N.cn)("flex-shrink-0 w-8 h-8 rounded-md flex items-center justify-center",(null==y?void 0:y.color)||"bg-gray-100 text-gray-600"),children:w&&(0,a.jsx)(w,{className:"h-4 w-4"})}),(0,a.jsx)("div",{className:"flex-1 min-w-0",children:(0,a.jsx)(R,{value:s.title,onSave:i,variant:"body",placeholder:"Enter section name...",className:"font-medium text-gray-900",showEditIcon:!1,showSaveStatus:!0,validation:e=>e.trim()?e.length>50?"Name must be 50 characters or less":/^[a-zA-Z][a-zA-Z0-9_]*$/.test(e.trim())?null:"Name must be a valid variable name (letters, numbers, underscores)":"Section name is required",maxLength:50,required:!0})}),(0,a.jsxs)(et,{value:s.type,onValueChange:A,disabled:b,children:[(0,a.jsx)(el,{className:"w-40 h-8 text-xs",children:(0,a.jsx)(ea,{children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[w&&(0,a.jsx)(w,{className:"h-3 w-3"}),(0,a.jsx)("span",{className:"truncate",children:(null==y?void 0:y.name)||s.type})]})})}),(0,a.jsxs)(er,{children:[(0,a.jsx)(ei,{value:s.type,children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[w&&(0,a.jsx)(w,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:(null==y?void 0:y.name)||s.type}),(0,a.jsx)(S.E,{variant:"secondary",className:"ml-2 text-xs",children:"Current"})]})}),C.map(e=>{let s=k[e.icon];return(0,a.jsx)(ei,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(s,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:e.name}),(0,a.jsx)(S.E,{variant:"outline",className:(0,N.cn)("ml-2 text-xs","input"===e.category&&"border-blue-200 text-blue-700","content"===e.category&&"border-green-200 text-green-700","logic"===e.category&&"border-purple-200 text-purple-700","output"===e.category&&"border-orange-200 text-orange-700"),children:e.category})]})},e.id)})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsxs)(S.E,{variant:"outline",className:"text-xs font-mono",children:["#",s.order]}),(0,a.jsx)(x.$,{variant:t?"default":"ghost",size:"sm",onClick:o,className:"h-7 px-2 text-xs",children:t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.A,{className:"h-3 w-3 mr-1"}),"Preview"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(M.A,{className:"h-3 w-3 mr-1"}),"Edit"]})}),(0,a.jsx)(x.$,{variant:"ghost",size:"sm",onClick:m,className:(0,N.cn)("h-7 px-2 text-xs",!s.isVisible&&"text-orange-600 bg-orange-50 hover:bg-orange-100"),children:s.isVisible?(0,a.jsx)(f.A,{className:"h-3 w-3"}):(0,a.jsx)(B.A,{className:"h-3 w-3"})}),(0,a.jsx)(x.$,{variant:"ghost",size:"sm",onClick:p,className:"h-7 px-2 text-xs",children:r?(0,a.jsx)(T.A,{className:"h-3 w-3"}):(0,a.jsx)(es.A,{className:"h-3 w-3"})}),(0,a.jsxs)(U.rI,{children:[(0,a.jsx)(U.ty,{asChild:!0,children:(0,a.jsx)(x.$,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 text-gray-400 hover:text-gray-600",children:(0,a.jsx)($.A,{className:"h-4 w-4"})})}),(0,a.jsxs)(U.SQ,{align:"end",className:"w-48",children:[(0,a.jsxs)(U._2,{onClick:h,children:[(0,a.jsx)(M.A,{className:"h-4 w-4 mr-2"}),"Configure Section"]}),(0,a.jsx)(U._2,{onClick:m,children:s.isVisible?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(B.A,{className:"h-4 w-4 mr-2"}),"Hide Section"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.A,{className:"h-4 w-4 mr-2"}),"Show Section"]})}),(0,a.jsxs)(U._2,{onClick:u,className:"text-red-600 focus:text-red-600",children:[(0,a.jsx)(Z.A,{className:"h-4 w-4 mr-2"}),"Delete Section"]})]})]})]})]})}var eo=t(4884);function em(e){let{className:s,...t}=e;return(0,a.jsx)(eo.bL,{"data-slot":"switch",className:(0,N.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...t,children:(0,a.jsx)(eo.zi,{"data-slot":"switch-thumb",className:(0,N.cn)("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}var ex=t(82714);function eu(e){let{section:s,isQuestion:t=!1,isRequired:l=!1,buttonLabel:r="Next",onRequiredChange:i,onButtonLabelChange:n,className:c,showButtonPreview:o=!0}=e,m=d(s.type),u=(null==m?void 0:m.category)==="input"||["multiple-choice","text-input","rating-scale","email-capture","contact-form"].includes(s.type);return u||o?(0,a.jsxs)("div",{className:(0,N.cn)("flex items-center justify-between p-3 bg-gray-50 border-t border-gray-200","rounded-b-lg",c),children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[u&&i&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(em,{id:"required-".concat(s.id),checked:l,onCheckedChange:i,className:"data-[state=checked]:bg-red-500"}),(0,a.jsx)(ex.J,{htmlFor:"required-".concat(s.id),className:"text-sm font-medium cursor-pointer",children:"Required"}),l&&(0,a.jsxs)(S.E,{variant:"outline",className:"text-xs text-red-600 border-red-200",children:[(0,a.jsx)(D.A,{className:"h-3 w-3 mr-1"}),"Required"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-xs text-gray-500",children:[(0,a.jsx)("span",{className:"font-medium",children:(null==m?void 0:m.name)||s.type}),(null==m?void 0:m.category)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"•"}),(0,a.jsx)(S.E,{variant:"outline",className:(0,N.cn)("text-xs","input"===m.category&&"border-blue-200 text-blue-700","content"===m.category&&"border-green-200 text-green-700","logic"===m.category&&"border-purple-200 text-purple-700","output"===m.category&&"border-orange-200 text-orange-700"),children:m.category})]})]})]}),o&&(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-xs text-gray-500 font-medium",children:"Button:"}),n?(0,a.jsx)(R,{value:r,onSave:n,variant:"caption",placeholder:"Enter button text...",className:"font-medium text-gray-700 px-2 py-1 bg-white border border-gray-200 rounded",showEditIcon:!1,showSaveStatus:!0,validation:e=>e.trim()?e.length>30?"Button label must be 30 characters or less":null:"Button label is required",maxLength:30,required:!0}):(0,a.jsx)("span",{className:"text-xs font-medium text-gray-700 px-2 py-1 bg-white border border-gray-200 rounded",children:r})]}),(0,a.jsxs)(x.$,{size:"sm",className:"h-7 px-3 text-xs pointer-events-none",disabled:!0,children:[r,(0,a.jsx)(L.A,{className:"h-3 w-3 ml-1"})]})]})]}):null}var eh=t(87325),ep=t(28883),eg=t(19420),ej=t(15448),eb=t(69074),ev=t(93500);function ef(e){let{section:s,isPreview:t=!1,onUpdate:r,className:i}=e,[n,c]=(0,l.useState)(!1),d=s.settings||{},{content:o="",placeholder:m="Type your answer here...",inputType:x="text",minLength:h=0,maxLength:p=500,required:g=!1,buttonLabel:j="Next",helpText:b="",validation:v={}}=d,f=async e=>{c(!0);try{await r({settings:{...d,...e}})}catch(e){throw console.error("Failed to update text question settings:",e),e}finally{c(!1)}},y=async e=>{await f({content:e})},w=async e=>{await f({placeholder:e})},S=async e=>{await f({helpText:e})},C=e=>{switch(e){case"textarea":return eh.A;case"email":return ep.A;case"phone":return eg.A;case"number":return ej.A;case"date":return eb.A;default:return ev.A}};return t?(0,a.jsx)("div",{className:(0,N.cn)("p-6",i),children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-medium mb-2",children:[o||"Your question text here...",g&&(0,a.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),b&&(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:b})]}),(0,a.jsxs)("div",{className:"space-y-2",children:["textarea"===x?(0,a.jsx)(I.T,{placeholder:m,disabled:!0,className:"min-h-[100px] resize-none",maxLength:p}):(0,a.jsx)(u.p,{type:"text"===x?"text":x,placeholder:m,disabled:!0,maxLength:p}),p>0&&(0,a.jsxs)("div",{className:"text-xs text-gray-500 text-right",children:["0 / ",p," characters"]})]}),v.pattern&&(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[(0,a.jsx)("strong",{children:"Format:"})," ",v.message||"Must match required pattern"]})]})}):(0,a.jsxs)("div",{className:(0,N.cn)("p-6",i),children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(ex.J,{className:"text-sm font-medium text-gray-700 mb-2 block",children:["Question Text ",g&&(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)(R,{value:o,onSave:y,variant:"body",placeholder:"Enter your question text...",className:"min-h-[60px] p-3 border border-gray-200 rounded-lg w-full",showEditIcon:!1,showSaveStatus:!0,multiline:!0,maxLength:200,required:!0,validation:e=>e.trim()?e.length>200?"Question text must be 200 characters or less":null:"Question text is required"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(ex.J,{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Input Type"}),(0,a.jsxs)(et,{value:x,onValueChange:e=>f({inputType:e}),disabled:n,children:[(0,a.jsx)(el,{children:(0,a.jsx)(ea,{children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(()=>{let e=C(x);return(0,a.jsx)(e,{className:"h-4 w-4"})})(),(0,a.jsx)("span",{className:"capitalize",children:"textarea"===x?"Long Text":x})]})})}),(0,a.jsxs)(er,{children:[(0,a.jsx)(ei,{value:"text",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(ev.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Short Text"})]})}),(0,a.jsx)(ei,{value:"textarea",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(eh.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Long Text"})]})}),(0,a.jsx)(ei,{value:"email",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(ep.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Email"})]})}),(0,a.jsx)(ei,{value:"phone",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(eg.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Phone"})]})}),(0,a.jsx)(ei,{value:"number",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(ej.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Number"})]})}),(0,a.jsx)(ei,{value:"date",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(eb.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Date"})]})})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(ex.J,{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Character Limit"}),(0,a.jsx)(u.p,{type:"number",value:p,onChange:e=>f({maxLength:parseInt(e.target.value)||0}),min:0,max:2e3,className:"w-full",disabled:n})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(ex.J,{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Placeholder Text"}),(0,a.jsx)(R,{value:m,onSave:w,variant:"body",placeholder:"Enter placeholder text...",className:"p-3 border border-gray-200 rounded-lg w-full text-gray-500",showEditIcon:!1,showSaveStatus:!0,maxLength:100})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(ex.J,{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Help Text (Optional)"}),(0,a.jsx)(R,{value:b,onSave:S,variant:"body",placeholder:"Add helpful instructions for users...",className:"p-3 border border-gray-200 rounded-lg w-full text-gray-600",showEditIcon:!1,showSaveStatus:!0,maxLength:200,multiline:!0})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(em,{id:"required",checked:g,onCheckedChange:e=>f({required:e}),disabled:n}),(0,a.jsx)(ex.J,{htmlFor:"required",className:"text-sm font-medium cursor-pointer",children:"Required field"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(ex.J,{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Min Length"}),(0,a.jsx)(u.p,{type:"number",value:h,onChange:e=>f({minLength:parseInt(e.target.value)||0}),min:0,max:p,disabled:n})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(ex.J,{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Validation Pattern (Regex)"}),(0,a.jsx)(u.p,{type:"text",value:v.pattern||"",onChange:e=>f({validation:{...v,pattern:e.target.value}}),placeholder:"^[A-Za-z]+$",disabled:n})]})]})]}),(0,a.jsxs)("div",{className:"border-t pt-4",children:[(0,a.jsx)(ex.J,{className:"text-sm font-medium text-gray-700 mb-3 block",children:"Preview"}),(0,a.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"font-medium",children:[o||"Your question text here...",g&&(0,a.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),b&&(0,a.jsx)("div",{className:"text-sm text-gray-600",children:b}),"textarea"===x?(0,a.jsx)(I.T,{placeholder:m,disabled:!0,className:"bg-white"}):(0,a.jsx)(u.p,{type:x,placeholder:m,disabled:!0,className:"bg-white"})]})})]})]}),n&&(0,a.jsx)("div",{className:"absolute top-4 right-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-blue-600 bg-blue-50 px-3 py-1 rounded-full",children:[(0,a.jsx)("div",{className:"w-3 h-3 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),(0,a.jsx)("span",{className:"text-xs font-medium",children:"Saving..."})]})})]})}var ey=t(9428),eN=t(18979),ew=t(19145),eS=t(84616);function eC(e){let{option:s,onUpdate:t,onDelete:l,isPreview:r=!1,selectionType:i="single"}=e,{attributes:n,listeners:c,setNodeRef:d,transform:o,transition:m,isDragging:u}=(0,q.gl)({id:s.id}),h={transform:P.Ks.Transform.toString(o),transition:m};return r?(0,a.jsxs)("label",{className:(0,N.cn)("flex items-center space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",u&&"opacity-50"),children:["single"===i?(0,a.jsx)("input",{type:"radio",name:"preview-options",className:"h-4 w-4"}):(0,a.jsx)("input",{type:"checkbox",className:"h-4 w-4"}),(0,a.jsx)("span",{className:"flex-1",children:s.text||"Option ".concat(s.order)})]}):(0,a.jsxs)("div",{ref:d,style:h,className:(0,N.cn)("flex items-center space-x-3 p-3 border border-gray-200 rounded-lg bg-white",u&&"opacity-50 shadow-lg"),children:[(0,a.jsx)("div",{...n,...c,className:"cursor-grab hover:cursor-grabbing",children:(0,a.jsx)(_.A,{className:"h-4 w-4 text-gray-400"})}),(0,a.jsx)("div",{className:"flex-shrink-0",children:"single"===i?(0,a.jsx)(ey.A,{className:"h-4 w-4 text-gray-400"}):(0,a.jsx)(eN.A,{className:"h-4 w-4 text-gray-400"})}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)(R,{value:s.text,onSave:e=>t(s.id,e),variant:"body",placeholder:"Option ".concat(s.order),className:"w-full",showEditIcon:!1,showSaveStatus:!1,maxLength:100})}),(0,a.jsx)(x.$,{variant:"ghost",size:"sm",onClick:()=>l(s.id),className:"text-gray-400 hover:text-red-500 p-1",children:(0,a.jsx)(g.A,{className:"h-4 w-4"})})]})}function ek(e){let{section:s,isPreview:t=!1,onUpdate:r,className:i}=e,[n,c]=(0,l.useState)(!1),d=s.settings||{},{content:o="",options:m=[{id:"1",text:"Option 1",order:1},{id:"2",text:"Option 2",order:2},{id:"3",text:"Option 3",order:3}],selectionType:h="single",minSelections:p=1,maxSelections:g=1,required:j=!1,buttonLabel:b="Next",helpText:v="",randomizeOrder:f=!1,allowOther:y=!1,otherLabel:w="Other"}=d,S=(0,C.FR)((0,C.MS)(C.AN),(0,C.MS)(C.uN,{coordinateGetter:q.JR})),k=async e=>{c(!0);try{await r({settings:{...d,...e}})}catch(e){throw console.error("Failed to update multiple choice settings:",e),e}finally{c(!1)}},A=async e=>{await k({content:e})},E=async e=>{await k({helpText:e})},T=(e,s)=>{k({options:m.map(t=>t.id===e?{...t,text:s}:t)})},L=e=>{if(m.length<=2)return void alert("You must have at least 2 options");k({options:m.filter(s=>s.id!==e).map((e,s)=>({...e,order:s+1}))})},z=[...m].sort((e,s)=>e.order-s.order);return t?(0,a.jsx)("div",{className:(0,N.cn)("p-6",i),children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-medium mb-2",children:[o||"Your question text here...",j&&(0,a.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),v&&(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:v}),"multiple"===h&&(0,a.jsxs)("p",{className:"text-sm text-gray-500 mb-4",children:["Select ",p===g?"exactly ".concat(p):"".concat(p,"-").concat(g)," option",1!==g?"s":""]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(f?[...z].sort(()=>Math.random()-.5):z).map(e=>(0,a.jsx)(eC,{option:e,onUpdate:T,onDelete:L,isPreview:!0,selectionType:h},e.id)),y&&(0,a.jsxs)("label",{className:"flex items-center space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:["single"===h?(0,a.jsx)("input",{type:"radio",name:"preview-options",className:"h-4 w-4"}):(0,a.jsx)("input",{type:"checkbox",className:"h-4 w-4"}),(0,a.jsx)("span",{className:"flex-1",children:w}),(0,a.jsx)(u.p,{placeholder:"Please specify...",className:"w-32",disabled:!0})]})]})]})}):(0,a.jsxs)("div",{className:(0,N.cn)("p-6",i),children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(ex.J,{className:"text-sm font-medium text-gray-700 mb-2 block",children:["Question Text ",j&&(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)(R,{value:o,onSave:A,variant:"body",placeholder:"Enter your question text...",className:"min-h-[60px] p-3 border border-gray-200 rounded-lg w-full",showEditIcon:!1,showSaveStatus:!0,multiline:!0,maxLength:200,required:!0,validation:e=>e.trim()?e.length>200?"Question text must be 200 characters or less":null:"Question text is required"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(ex.J,{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Selection Type"}),(0,a.jsxs)(et,{value:h,onValueChange:e=>{let s={selectionType:e};"single"===e?s.maxSelections=1:s.maxSelections=m.length,s.minSelections=1,k(s)},disabled:n,children:[(0,a.jsx)(el,{children:(0,a.jsx)(ea,{children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:["single"===h?(0,a.jsx)(ey.A,{className:"h-4 w-4"}):(0,a.jsx)(ew.A,{className:"h-4 w-4"}),(0,a.jsxs)("span",{className:"capitalize",children:[h," Choice"]})]})})}),(0,a.jsxs)(er,{children:[(0,a.jsx)(ei,{value:"single",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(ey.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Single Choice"})]})}),(0,a.jsx)(ei,{value:"multiple",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(ew.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Multiple Choice"})]})})]})]})]}),"multiple"===h&&(0,a.jsxs)("div",{children:[(0,a.jsx)(ex.J,{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Selection Limits"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(u.p,{type:"number",value:p,onChange:e=>k({minSelections:parseInt(e.target.value)||1}),min:1,max:g,placeholder:"Min",className:"w-20",disabled:n}),(0,a.jsx)("span",{className:"self-center text-gray-500",children:"to"}),(0,a.jsx)(u.p,{type:"number",value:g,onChange:e=>k({maxSelections:parseInt(e.target.value)||1}),min:p,max:m.length,placeholder:"Max",className:"w-20",disabled:n})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)(ex.J,{className:"text-sm font-medium text-gray-700",children:["Answer Options (",m.length,")"]}),(0,a.jsxs)(x.$,{onClick:()=>{let e={id:"option-".concat(Date.now()),text:"",order:m.length+1};k({options:[...m,e]})},size:"sm",variant:"outline",disabled:n||m.length>=10,children:[(0,a.jsx)(eS.A,{className:"h-4 w-4 mr-1"}),"Add Option"]})]}),(0,a.jsx)(C.Mp,{sensors:S,collisionDetection:C.fp,onDragEnd:e=>{let{active:s,over:t}=e;if(s.id!==t.id){let e=m.findIndex(e=>e.id===s.id),a=m.findIndex(e=>e.id===t.id);k({options:(0,q.be)(m,e,a).map((e,s)=>({...e,order:s+1}))})}},children:(0,a.jsx)(q.gB,{items:m.map(e=>e.id),strategy:q._G,children:(0,a.jsx)("div",{className:"space-y-2",children:z.map(e=>(0,a.jsx)(eC,{option:e,onUpdate:T,onDelete:L,selectionType:h},e.id))})})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(em,{id:"required",checked:j,onCheckedChange:e=>k({required:e}),disabled:n}),(0,a.jsx)(ex.J,{htmlFor:"required",className:"text-sm font-medium cursor-pointer",children:"Required field"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(em,{id:"randomize",checked:f,onCheckedChange:e=>k({randomizeOrder:e}),disabled:n}),(0,a.jsx)(ex.J,{htmlFor:"randomize",className:"text-sm font-medium cursor-pointer",children:"Randomize option order"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(em,{id:"allowOther",checked:y,onCheckedChange:e=>k({allowOther:e}),disabled:n}),(0,a.jsx)(ex.J,{htmlFor:"allowOther",className:"text-sm font-medium cursor-pointer",children:'Allow "Other" option'})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(ex.J,{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Help Text (Optional)"}),(0,a.jsx)(R,{value:v,onSave:E,variant:"body",placeholder:"Add helpful instructions for users...",className:"p-3 border border-gray-200 rounded-lg w-full text-gray-600",showEditIcon:!1,showSaveStatus:!0,maxLength:200,multiline:!0})]}),(0,a.jsxs)("div",{className:"border-t pt-4",children:[(0,a.jsx)(ex.J,{className:"text-sm font-medium text-gray-700 mb-3 block",children:"Preview"}),(0,a.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,a.jsx)(ek,{section:s,isPreview:!0,onUpdate:r})})]})]}),n&&(0,a.jsx)("div",{className:"absolute top-4 right-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-blue-600 bg-blue-50 px-3 py-1 rounded-full",children:[(0,a.jsx)("div",{className:"w-3 h-3 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),(0,a.jsx)("span",{className:"text-xs font-medium",children:"Saving..."})]})})]})}var eA=t(54073);function eE(e){let{className:s,defaultValue:t,value:r,min:i=0,max:n=100,...c}=e,d=l.useMemo(()=>Array.isArray(r)?r:Array.isArray(t)?t:[i,n],[r,t,i,n]);return(0,a.jsxs)(eA.bL,{"data-slot":"slider",defaultValue:t,value:r,min:i,max:n,className:(0,N.cn)("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",s),...c,children:[(0,a.jsx)(eA.CC,{"data-slot":"slider-track",className:(0,N.cn)("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:(0,a.jsx)(eA.Q6,{"data-slot":"slider-range",className:(0,N.cn)("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:d.length},(e,s)=>(0,a.jsx)(eA.zi,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},s))]})}var eT=t(38564),eL=t(51976),ez=t(70333),eq=t(99424),eP=t(16785),eF=t(71539);function eI(e){let{section:s,isPreview:t=!1,onUpdate:r,className:i}=e,[n,c]=(0,l.useState)(!1),[d,o]=(0,l.useState)([]),m=s.settings||{},{content:x="",scaleType:h="numbers",minValue:p=1,maxValue:g=5,step:j=1,showLabels:b=!0,minLabel:v="Poor",maxLabel:f="Excellent",centerLabel:y="",required:w=!1,buttonLabel:S="Next",helpText:C="",defaultValue:k,showNumbers:A=!0}=m;(0,l.useState)(()=>{void 0!==k&&o([k])});let E=async e=>{c(!0);try{await r({settings:{...m,...e}})}catch(e){throw console.error("Failed to update rating scale settings:",e),e}finally{c(!1)}},T=async e=>{await E({content:e})},L=async e=>{await E({helpText:e})},z=async e=>{await E({minLabel:e})},q=async e=>{await E({maxLabel:e})},P=async e=>{await E({centerLabel:e})},F=e=>{switch(e){case"stars":return eT.A;case"hearts":return eL.A;case"thumbs":return ez.A;case"smileys":return eq.A;case"custom":return eP.A;default:return eF.A}},I=[{label:"1-3 Scale",min:1,max:3},{label:"1-5 Scale",min:1,max:5},{label:"1-7 Scale",min:1,max:7},{label:"1-10 Scale",min:1,max:10},{label:"0-10 Scale",min:0,max:10}];return t?(0,a.jsx)("div",{className:(0,N.cn)("p-6",i),children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-medium mb-2",children:[x||"Your question text here...",w&&(0,a.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),C&&(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:C})]}),b&&(0,a.jsxs)("div",{className:"flex justify-between text-sm text-gray-600",children:[(0,a.jsx)("span",{children:v}),y&&g-p>=4&&(0,a.jsx)("span",{children:y}),(0,a.jsx)("span",{children:f})]}),g-p<=7?(0,a.jsx)("div",{className:"flex justify-between items-center",children:function(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=[];for(let l=p;l<=g;l+=j){let r=e===l,i=s&&d[0]>=l;t.push((0,a.jsxs)("div",{className:(0,N.cn)("flex flex-col items-center space-y-2 p-2 rounded-lg transition-all cursor-pointer",s&&"hover:bg-gray-100",r&&"bg-blue-50 border-2 border-blue-300",!r&&"border-2 border-transparent"),onClick:s?()=>o([l]):void 0,children:[(0,a.jsxs)("div",{className:(0,N.cn)("flex items-center justify-center w-8 h-8 rounded-full transition-colors",r||i?"text-blue-600":"text-gray-400"),children:["numbers"===h&&(0,a.jsx)("span",{className:"text-lg font-medium",children:l}),"stars"===h&&(0,a.jsx)(eT.A,{className:(0,N.cn)("h-6 w-6",(r||i)&&"fill-current")}),"hearts"===h&&(0,a.jsx)(eL.A,{className:(0,N.cn)("h-6 w-6",(r||i)&&"fill-current")}),"thumbs"===h&&(0,a.jsx)(ez.A,{className:(0,N.cn)("h-6 w-6",(r||i)&&"fill-current")}),"smileys"===h&&(0,a.jsx)(eq.A,{className:(0,N.cn)("h-6 w-6",(r||i)&&"fill-current")}),"custom"===h&&(0,a.jsx)("div",{className:(0,N.cn)("w-6 h-6 rounded-full border-2",r||i?"bg-blue-600 border-blue-600":"border-gray-300")})]}),A&&"numbers"!==h&&(0,a.jsx)("span",{className:"text-xs text-gray-500",children:l})]},l))}return t}(d[0],!0)}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(eE,{value:d.length>0?d:k?[k]:[p],onValueChange:o,min:p,max:g,step:j,className:"w-full",disabled:!t}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("span",{className:"text-lg font-medium text-blue-600",children:d[0]||k||p})})]}),d.length>0&&(0,a.jsx)("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:(0,a.jsxs)("p",{className:"text-sm text-blue-700",children:["Selected: ",(0,a.jsx)("span",{className:"font-medium",children:d[0]})]})})]})}):(0,a.jsxs)("div",{className:(0,N.cn)("p-6",i),children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(ex.J,{className:"text-sm font-medium text-gray-700 mb-2 block",children:["Question Text ",w&&(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)(R,{value:x,onSave:T,variant:"body",placeholder:"Enter your question text...",className:"min-h-[60px] p-3 border border-gray-200 rounded-lg w-full",showEditIcon:!1,showSaveStatus:!0,multiline:!0,maxLength:200,required:!0,validation:e=>e.trim()?e.length>200?"Question text must be 200 characters or less":null:"Question text is required"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(ex.J,{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Scale Type"}),(0,a.jsxs)(et,{value:h,onValueChange:e=>E({scaleType:e}),disabled:n,children:[(0,a.jsx)(el,{children:(0,a.jsx)(ea,{children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(()=>{let e=F(h);return(0,a.jsx)(e,{className:"h-4 w-4"})})(),(0,a.jsx)("span",{className:"capitalize",children:h})]})})}),(0,a.jsxs)(er,{children:[(0,a.jsx)(ei,{value:"numbers",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(eF.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Numbers"})]})}),(0,a.jsx)(ei,{value:"stars",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(eT.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Stars"})]})}),(0,a.jsx)(ei,{value:"hearts",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(eL.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Hearts"})]})}),(0,a.jsx)(ei,{value:"thumbs",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(ez.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Thumbs Up"})]})}),(0,a.jsx)(ei,{value:"smileys",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(eq.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Smileys"})]})}),(0,a.jsx)(ei,{value:"custom",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(eP.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Custom"})]})})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(ex.J,{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Scale Preset"}),(0,a.jsxs)(et,{value:"".concat(p,"-").concat(g),onValueChange:e=>{let s=I.find(s=>"".concat(s.min,"-").concat(s.max)===e);s&&E({minValue:s.min,maxValue:s.max,defaultValue:void 0})},disabled:n,children:[(0,a.jsx)(el,{children:(0,a.jsx)(ea,{})}),(0,a.jsx)(er,{children:I.map(e=>(0,a.jsx)(ei,{value:"".concat(e.min,"-").concat(e.max),children:e.label},"".concat(e.min,"-").concat(e.max)))})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(ex.J,{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Min Value"}),(0,a.jsx)(u.p,{type:"number",value:p,onChange:e=>{let s=parseInt(e.target.value);!isNaN(s)&&s<g&&E({minValue:s})},min:0,max:g-1,disabled:n})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(ex.J,{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Max Value"}),(0,a.jsx)(u.p,{type:"number",value:g,onChange:e=>{let s=parseInt(e.target.value);!isNaN(s)&&s>p&&E({maxValue:s})},min:p+1,max:20,disabled:n})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(ex.J,{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Step"}),(0,a.jsx)(u.p,{type:"number",value:j,onChange:e=>{E({step:parseInt(e.target.value)||1})},min:1,max:g-p,disabled:n})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(em,{id:"showLabels",checked:b,onCheckedChange:e=>E({showLabels:e}),disabled:n}),(0,a.jsx)(ex.J,{htmlFor:"showLabels",className:"text-sm font-medium cursor-pointer",children:"Show scale labels"})]}),b&&(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(ex.J,{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Min Label"}),(0,a.jsx)(R,{value:v,onSave:z,variant:"body",placeholder:"e.g., Poor, Disagree",className:"p-3 border border-gray-200 rounded-lg w-full",showEditIcon:!1,showSaveStatus:!0,maxLength:50})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(ex.J,{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Max Label"}),(0,a.jsx)(R,{value:f,onSave:q,variant:"body",placeholder:"e.g., Excellent, Agree",className:"p-3 border border-gray-200 rounded-lg w-full",showEditIcon:!1,showSaveStatus:!0,maxLength:50})]})]}),b&&g-p>=4&&(0,a.jsxs)("div",{children:[(0,a.jsx)(ex.J,{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Center Label (Optional)"}),(0,a.jsx)(R,{value:y,onSave:P,variant:"body",placeholder:"e.g., Neutral, Okay",className:"p-3 border border-gray-200 rounded-lg w-full",showEditIcon:!1,showSaveStatus:!0,maxLength:50})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(em,{id:"required",checked:w,onCheckedChange:e=>E({required:e}),disabled:n}),(0,a.jsx)(ex.J,{htmlFor:"required",className:"text-sm font-medium cursor-pointer",children:"Required field"})]}),"numbers"!==h&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(em,{id:"showNumbers",checked:A,onCheckedChange:e=>E({showNumbers:e}),disabled:n}),(0,a.jsx)(ex.J,{htmlFor:"showNumbers",className:"text-sm font-medium cursor-pointer",children:"Show numbers below icons"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(ex.J,{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Default Value (Optional)"}),(0,a.jsx)(u.p,{type:"number",value:k||"",onChange:e=>{E({defaultValue:e.target.value?parseInt(e.target.value):void 0})},min:p,max:g,placeholder:"No default",disabled:n})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(ex.J,{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Help Text (Optional)"}),(0,a.jsx)(R,{value:C,onSave:L,variant:"body",placeholder:"Add helpful instructions for users...",className:"p-3 border border-gray-200 rounded-lg w-full text-gray-600",showEditIcon:!1,showSaveStatus:!0,maxLength:200,multiline:!0})]}),(0,a.jsxs)("div",{className:"border-t pt-4",children:[(0,a.jsx)(ex.J,{className:"text-sm font-medium text-gray-700 mb-3 block",children:"Preview"}),(0,a.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,a.jsx)(eI,{section:s,isPreview:!0,onUpdate:r})})]})]}),n&&(0,a.jsx)("div",{className:"absolute top-4 right-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-blue-600 bg-blue-50 px-3 py-1 rounded-full",children:[(0,a.jsx)("div",{className:"w-3 h-3 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),(0,a.jsx)("span",{className:"text-xs font-medium",children:"Saving..."})]})})]})}var eD=t(32417),eJ=t(27213),eO=t(67733),eR=t(88702),eV=t(29869);function eU(e){let{section:s,isPreview:t=!1,onUpdate:r,className:i}=e,[n,c]=(0,l.useState)(!1),[d,o]=(0,l.useState)(!1),m=(0,l.useRef)(null),h=s.settings||{},{title:p="",content:j="",imageUrl:b="",imageAlt:v="",textAlign:f="left",imagePosition:y="top",layout:w="text-only",backgroundColor:S="",textColor:C="",titleSize:k="large",showTitle:A=!0,buttonLabel:E="Continue",buttonUrl:T="",showButton:L=!1}=h,z=async e=>{c(!0);try{await r({settings:{...h,...e}})}catch(e){throw console.error("Failed to update info section settings:",e),e}finally{c(!1)}},q=async e=>{await z({title:e})},P=async e=>{await z({content:e})},F=async e=>{await z({imageAlt:e})},I=async e=>{await z({buttonLabel:e})},D=async e=>{var s;let t=null==(s=e.target.files)?void 0:s[0];if(t){if(!t.type.startsWith("image/"))return void alert("Please select an image file");if(t.size>5242880)return void alert("Image must be smaller than 5MB");o(!0);try{let e=new FileReader;e.onload=async e=>{var s;let a=null==(s=e.target)?void 0:s.result;await z({imageUrl:a,imageAlt:v||t.name.replace(/\.[^/.]+$/,"")})},e.readAsDataURL(t)}catch(e){console.error("Failed to upload image:",e),alert("Failed to upload image. Please try again.")}finally{o(!1)}}},J=async()=>{await z({imageUrl:"",imageAlt:""})},O=()=>{switch(k){case"small":return"text-lg";case"medium":return"text-xl";case"large":default:return"text-2xl";case"xl":return"text-3xl"}},V=()=>{switch(f){case"center":return"text-center";case"right":return"text-right";default:return"text-left"}};return t?(0,a.jsxs)("div",{className:(0,N.cn)("relative overflow-hidden",i),style:{backgroundColor:S||void 0,color:C||void 0},children:["full-background"===w&&b&&(0,a.jsx)("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url(".concat(b,")")},children:(0,a.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-40"})}),(0,a.jsx)("div",{className:(0,N.cn)("relative z-10 p-6","full-background"===w&&"text-white min-h-[400px] flex flex-col justify-center"),children:"text-with-image"===w&&"left"===y?(0,a.jsxs)("div",{className:"flex items-start space-x-6",children:[b&&(0,a.jsx)("div",{className:"flex-shrink-0 w-1/3",children:(0,a.jsx)("img",{src:b,alt:v,className:"w-full h-auto rounded-lg object-cover"})}),(0,a.jsxs)("div",{className:(0,N.cn)("flex-1",V()),children:[A&&p&&(0,a.jsx)("h2",{className:(0,N.cn)("font-bold mb-4",O()),children:p}),j&&(0,a.jsx)("div",{className:"prose max-w-none",children:(0,a.jsx)("p",{className:"whitespace-pre-wrap",children:j})}),L&&E&&(0,a.jsx)(x.$,{className:"mt-6",disabled:!0,children:E})]})]}):"text-with-image"===w&&"right"===y?(0,a.jsxs)("div",{className:"flex items-start space-x-6",children:[(0,a.jsxs)("div",{className:(0,N.cn)("flex-1",V()),children:[A&&p&&(0,a.jsx)("h2",{className:(0,N.cn)("font-bold mb-4",O()),children:p}),j&&(0,a.jsx)("div",{className:"prose max-w-none",children:(0,a.jsx)("p",{className:"whitespace-pre-wrap",children:j})}),L&&E&&(0,a.jsx)(x.$,{className:"mt-6",disabled:!0,children:E})]}),b&&(0,a.jsx)("div",{className:"flex-shrink-0 w-1/3",children:(0,a.jsx)("img",{src:b,alt:v,className:"w-full h-auto rounded-lg object-cover"})})]}):(0,a.jsxs)("div",{className:(0,N.cn)("space-y-6",V()),children:[("image-only"===w||"text-with-image"===w&&"top"===y)&&b&&(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)("img",{src:b,alt:v,className:"w-full h-auto rounded-lg object-cover max-h-80"})}),"image-only"!==w&&(0,a.jsxs)("div",{children:[A&&p&&(0,a.jsx)("h2",{className:(0,N.cn)("font-bold mb-4",O()),children:p}),j&&(0,a.jsx)("div",{className:"prose max-w-none",children:(0,a.jsx)("p",{className:"whitespace-pre-wrap",children:j})}),L&&E&&(0,a.jsx)(x.$,{className:"mt-6",disabled:!0,children:E})]})]})})]}):(0,a.jsxs)("div",{className:(0,N.cn)("p-6",i),children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(ex.J,{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Section Layout"}),(0,a.jsxs)(et,{value:w,onValueChange:e=>z({layout:e}),disabled:n,children:[(0,a.jsx)(el,{children:(0,a.jsx)(ea,{children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(eD.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"capitalize",children:w.replace("-"," ")})]})})}),(0,a.jsxs)(er,{children:[(0,a.jsx)(ei,{value:"text-only",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(ev.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Text Only"})]})}),(0,a.jsx)(ei,{value:"image-only",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(eJ.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Image Only"})]})}),(0,a.jsx)(ei,{value:"text-with-image",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(eD.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Text with Image"})]})}),(0,a.jsx)(ei,{value:"full-background",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(eJ.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Full Background"})]})})]})]})]}),"image-only"!==w&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(em,{id:"showTitle",checked:A,onCheckedChange:e=>z({showTitle:e}),disabled:n}),(0,a.jsx)(ex.J,{htmlFor:"showTitle",className:"text-sm font-medium cursor-pointer",children:"Show title"})]}),A&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(ex.J,{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Title"}),(0,a.jsx)(R,{value:p,onSave:q,variant:"heading",placeholder:"Enter section title...",className:"p-3 border border-gray-200 rounded-lg w-full font-medium",showEditIcon:!1,showSaveStatus:!0,maxLength:100,required:A,validation:e=>A&&!e.trim()?"Title is required when title display is enabled":e.length>100?"Title must be 100 characters or less":null})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(ex.J,{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Title Size"}),(0,a.jsxs)(et,{value:k,onValueChange:e=>z({titleSize:e}),disabled:n,children:[(0,a.jsx)(el,{children:(0,a.jsx)(ea,{})}),(0,a.jsxs)(er,{children:[(0,a.jsx)(ei,{value:"small",children:"Small"}),(0,a.jsx)(ei,{value:"medium",children:"Medium"}),(0,a.jsx)(ei,{value:"large",children:"Large"}),(0,a.jsx)(ei,{value:"xl",children:"Extra Large"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(ex.J,{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Text Alignment"}),(0,a.jsxs)(et,{value:f,onValueChange:e=>z({textAlign:e}),disabled:n,children:[(0,a.jsx)(el,{children:(0,a.jsx)(ea,{children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:["left"===f&&(0,a.jsx)(eh.A,{className:"h-4 w-4"}),"center"===f&&(0,a.jsx)(eO.A,{className:"h-4 w-4"}),"right"===f&&(0,a.jsx)(eR.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"capitalize",children:f})]})})}),(0,a.jsxs)(er,{children:[(0,a.jsx)(ei,{value:"left",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(eh.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Left"})]})}),(0,a.jsx)(ei,{value:"center",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(eO.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Center"})]})}),(0,a.jsx)(ei,{value:"right",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(eR.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Right"})]})})]})]})]})]})]})]}),"image-only"!==w&&(0,a.jsxs)("div",{children:[(0,a.jsx)(ex.J,{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Content"}),(0,a.jsx)(R,{value:j,onSave:P,variant:"body",placeholder:"Enter your content text...",className:"min-h-[120px] p-3 border border-gray-200 rounded-lg w-full",showEditIcon:!1,showSaveStatus:!0,multiline:!0,maxLength:2e3,required:!0,validation:e=>e.trim()?e.length>2e3?"Content must be 2000 characters or less":null:"Content is required"})]}),"text-only"!==w&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(ex.J,{className:"text-sm font-medium text-gray-700 block",children:"Image"}),b?(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("img",{src:b,alt:v,className:"w-full h-48 object-cover rounded-lg border border-gray-200"}),(0,a.jsx)(x.$,{variant:"destructive",size:"sm",className:"absolute top-2 right-2",onClick:J,disabled:n,children:(0,a.jsx)(g.A,{className:"h-4 w-4"})})]}):(0,a.jsx)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-gray-400 transition-colors",onClick:()=>{var e;return null==(e=m.current)?void 0:e.click()},children:d?(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,a.jsx)("div",{className:"w-5 h-5 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),(0,a.jsx)("span",{className:"text-blue-600",children:"Uploading..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eV.A,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Click to upload an image"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"JPG, PNG up to 5MB"})]})}),(0,a.jsx)("input",{ref:m,type:"file",accept:"image/*",onChange:D,className:"hidden"}),b&&(0,a.jsxs)("div",{children:[(0,a.jsx)(ex.J,{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Image Alt Text"}),(0,a.jsx)(R,{value:v,onSave:F,variant:"body",placeholder:"Describe this image for accessibility...",className:"p-3 border border-gray-200 rounded-lg w-full text-gray-600",showEditIcon:!1,showSaveStatus:!0,maxLength:200})]}),"text-with-image"===w&&(0,a.jsxs)("div",{children:[(0,a.jsx)(ex.J,{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Image Position"}),(0,a.jsxs)(et,{value:y,onValueChange:e=>z({imagePosition:e}),disabled:n,children:[(0,a.jsx)(el,{children:(0,a.jsx)(ea,{})}),(0,a.jsxs)(er,{children:[(0,a.jsx)(ei,{value:"top",children:"Top"}),(0,a.jsx)(ei,{value:"left",children:"Left"}),(0,a.jsx)(ei,{value:"right",children:"Right"})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(em,{id:"showButton",checked:L,onCheckedChange:e=>z({showButton:e}),disabled:n}),(0,a.jsx)(ex.J,{htmlFor:"showButton",className:"text-sm font-medium cursor-pointer",children:"Show button"})]}),L&&(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(ex.J,{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Button Label"}),(0,a.jsx)(R,{value:E,onSave:I,variant:"body",placeholder:"Continue",className:"p-3 border border-gray-200 rounded-lg w-full",showEditIcon:!1,showSaveStatus:!0,maxLength:50})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(ex.J,{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Button URL (Optional)"}),(0,a.jsx)(u.p,{value:T,onChange:e=>z({buttonUrl:e.target.value}),placeholder:"https://example.com",disabled:n})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(ex.J,{className:"text-sm font-medium text-gray-700 block",children:"Style Options"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(ex.J,{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Background Color"}),(0,a.jsx)(u.p,{type:"color",value:S,onChange:e=>z({backgroundColor:e.target.value}),className:"w-full h-10",disabled:n})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(ex.J,{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Text Color"}),(0,a.jsx)(u.p,{type:"color",value:C,onChange:e=>z({textColor:e.target.value}),className:"w-full h-10",disabled:n})]})]})]}),(0,a.jsxs)("div",{className:"border-t pt-4",children:[(0,a.jsx)(ex.J,{className:"text-sm font-medium text-gray-700 mb-3 block",children:"Preview"}),(0,a.jsx)("div",{className:"bg-gray-50 rounded-lg overflow-hidden",children:(0,a.jsx)(eU,{section:s,isPreview:!0,onUpdate:r})})]})]}),n&&(0,a.jsx)("div",{className:"absolute top-4 right-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-blue-600 bg-blue-50 px-3 py-1 rounded-full",children:[(0,a.jsx)("div",{className:"w-3 h-3 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),(0,a.jsx)("span",{className:"text-xs font-medium",children:"Saving..."})]})})]})}function e_(e){let{section:s,isPreview:t=!1,onUpdate:l,className:r}=e;switch(s.type){case"info":case"text-block":case"image-block":case"hero":case"content":return(0,a.jsx)(eU,{section:s,isPreview:t,onUpdate:l,className:r});case"video":return(0,a.jsx)(eB,{section:s,isPreview:t,onUpdate:l,className:r,icon:(0,a.jsx)(V.A,{className:"h-8 w-8"}),message:"Video section component coming soon"});case"divider":if(t)return(0,a.jsx)("div",{className:(0,N.cn)("py-6",r),children:(0,a.jsx)("hr",{className:"border-gray-300"})});return(0,a.jsx)(eM,{section:s,onUpdate:l,className:r});case"spacer":var i;let n=(null==(i=s.settings)?void 0:i.height)||40;if(t)return(0,a.jsx)("div",{className:(0,N.cn)("w-full",r),style:{height:"".concat(n,"px")}});return(0,a.jsx)(e$,{section:s,onUpdate:l,className:r});default:return(0,a.jsx)(eB,{section:s,isPreview:t,onUpdate:l,className:r,icon:(0,a.jsx)(V.A,{className:"h-8 w-8"}),message:'Content component for "'.concat(s.type,'" not implemented yet')})}}function eB(e){var s,t;let{section:l,isPreview:r=!1,onUpdate:i,className:n,icon:c,message:d}=e;return r?(0,a.jsx)("div",{className:(0,N.cn)("p-6",n),children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("div",{className:"text-gray-400",children:c}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:l.title}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[l.type," section"]})]}),(null==(t=l.settings)?void 0:t.content)&&"string"==typeof l.settings.content&&(0,a.jsx)("div",{className:"text-gray-700 max-w-md mx-auto",children:l.settings.content})]})}):(0,a.jsx)("div",{className:(0,N.cn)("p-6",n),children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[(0,a.jsx)(D.A,{className:"h-5 w-5 text-yellow-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-yellow-800",children:d}),(0,a.jsx)("p",{className:"text-xs text-yellow-700 mt-1",children:"Use the section controls above to configure basic settings."})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content"}),(0,a.jsx)("textarea",{value:String((null==(s=l.settings)?void 0:s.content)||""),onChange:e=>i({settings:{...l.settings,content:e.target.value}}),placeholder:"Enter content for this section...",className:"w-full p-3 border border-gray-200 rounded-lg",rows:4})]})]})})}function eM(e){var s,t,l;let{section:r,onUpdate:i,className:n}=e,c=(null==(s=r.settings)?void 0:s.style)||"solid",d=(null==(t=r.settings)?void 0:t.color)||"#d1d5db",o=(null==(l=r.settings)?void 0:l.thickness)||1;return(0,a.jsx)("div",{className:(0,N.cn)("p-6",n),children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Style"}),(0,a.jsxs)("select",{value:c,onChange:e=>i({settings:{...r.settings,style:e.target.value}}),className:"w-full p-2 border border-gray-200 rounded",children:[(0,a.jsx)("option",{value:"solid",children:"Solid"}),(0,a.jsx)("option",{value:"dashed",children:"Dashed"}),(0,a.jsx)("option",{value:"dotted",children:"Dotted"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color"}),(0,a.jsx)("input",{type:"color",value:d,onChange:e=>i({settings:{...r.settings,color:e.target.value}}),className:"w-full h-10 border border-gray-200 rounded"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Thickness (px)"}),(0,a.jsx)("input",{type:"number",value:o,onChange:e=>i({settings:{...r.settings,thickness:parseInt(e.target.value)||1}}),min:1,max:10,className:"w-full p-2 border border-gray-200 rounded"})]})]}),(0,a.jsxs)("div",{className:"border-t pt-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preview"}),(0,a.jsx)("hr",{style:{borderStyle:c,borderColor:d,borderWidth:"".concat(o,"px 0 0 0")}})]})]})})}function e$(e){var s;let{section:t,onUpdate:l,className:r}=e,i=(null==(s=t.settings)?void 0:s.height)||40;return(0,a.jsx)("div",{className:(0,N.cn)("p-6",r),children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Height (px)"}),(0,a.jsx)("input",{type:"number",value:i,onChange:e=>l({settings:{...t.settings,height:parseInt(e.target.value)||40}}),min:10,max:200,className:"w-full p-2 border border-gray-200 rounded"})]}),(0,a.jsxs)("div",{className:"border-t pt-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preview"}),(0,a.jsxs)("div",{className:"w-full bg-gray-100 border border-gray-200 rounded flex items-center justify-center text-xs text-gray-500",style:{height:"".concat(i,"px")},children:[i,"px spacer"]})]})]})})}function eH(e){let{section:s,isPreview:t=!1,onUpdate:l,className:r}=e;switch(s.type){case"text-input":return(0,a.jsx)(ef,{section:s,isPreview:t,onUpdate:l,className:r});case"multiple-choice":return(0,a.jsx)(ek,{section:s,isPreview:t,onUpdate:l,className:r});case"rating-scale":return(0,a.jsx)(eI,{section:s,isPreview:t,onUpdate:l,className:r});case"email-capture":var i;return(0,a.jsx)(ef,{section:{...s,settings:{...s.settings,inputType:"email",content:(null==(i=s.settings)?void 0:i.content)||"Enter your email address",placeholder:"your@email.com",validation:{pattern:"^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$",message:"Please enter a valid email address"}}},isPreview:t,onUpdate:l,className:r});case"contact-form":return(0,a.jsxs)("div",{className:(0,N.cn)("space-y-6",r),children:[(0,a.jsx)(ef,{section:{...s,id:"".concat(s.id,"-name"),title:"Name",settings:{content:"What's your name?",placeholder:"Enter your full name",inputType:"text",required:!0,maxLength:100}},isPreview:t,onUpdate:async e=>{await l({settings:{...s.settings,nameField:e.settings}})}}),(0,a.jsx)(ef,{section:{...s,id:"".concat(s.id,"-email"),title:"Email",settings:{content:"What's your email address?",placeholder:"your@email.com",inputType:"email",required:!0,validation:{pattern:"^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$",message:"Please enter a valid email address"}}},isPreview:t,onUpdate:async e=>{await l({settings:{...s.settings,emailField:e.settings}})}}),(0,a.jsx)(ef,{section:{...s,id:"".concat(s.id,"-phone"),title:"Phone",settings:{content:"What's your phone number? (Optional)",placeholder:"+1 (555) 123-4567",inputType:"phone",required:!1,validation:{pattern:"^[\\+]?[1-9][\\d\\s\\-\\(\\)]{7,15}$",message:"Please enter a valid phone number"}}},isPreview:t,onUpdate:async e=>{await l({settings:{...s.settings,phoneField:e.settings}})}})]});default:return(0,a.jsx)(e_,{section:s,isPreview:t,onUpdate:l,className:r})}}function eZ(e){var s,t,r;let{section:i,onUpdate:n,onDelete:c,onDuplicate:o,onConfigure:m,onTypeChange:x,className:u,isCollapsible:h=!0,initiallyCollapsed:p=!1}=e,[g,j]=(0,l.useState)(!1),[b,v]=(0,l.useState)(p),[f,y]=(0,l.useState)(!1),{attributes:w,listeners:S,setNodeRef:C,transform:k,transition:A,isDragging:E}=(0,q.gl)({id:i.id,data:{type:"campaign-section",section:i}}),T={transform:P.Ks.Transform.toString(k),transition:A},z=d(i.type),I=(null==z?void 0:z.category)==="input"||["multiple-choice","text-input","rating-scale","email-capture","contact-form"].includes(i.type),D=async e=>{if(e.trim()!==i.title){y(!0);try{await n(i.id,{title:e.trim()})}catch(e){throw e}finally{y(!1)}}},J=async e=>{if(e!==i.type){y(!0);try{let s=d(e),t={type:e,settings:(null==s?void 0:s.defaultSettings)||{}};await n(i.id,t),null==x||x(i.id,e)}catch(e){console.error("Failed to update section type:",e)}finally{y(!1)}}},O=async()=>{y(!0);try{await n(i.id,{isVisible:!i.isVisible})}catch(e){console.error("Failed to update visibility:",e)}finally{y(!1)}},U=async e=>{y(!0);try{await n(i.id,{settings:{...i.settings,required:e}})}catch(e){console.error("Failed to update required status:",e)}finally{y(!1)}},_=async e=>{y(!0);try{await n(i.id,{settings:{...i.settings,buttonLabel:e.trim()}})}catch(e){throw e}finally{y(!1)}},B=async e=>{y(!0);try{await n(i.id,{settings:{...i.settings,content:e}})}catch(e){throw e}finally{y(!1)}},M=!!(null==(s=i.settings)?void 0:s.required),$=(null==(t=i.settings)?void 0:t.buttonLabel)||"Next",H=(null==(r=i.settings)?void 0:r.content)||"";return(0,a.jsxs)(F.Zp,{ref:C,style:T,className:(0,N.cn)("transition-all duration-200 overflow-hidden",E&&"opacity-50 shadow-lg scale-105 rotate-2",!i.isVisible&&"opacity-60","hover:shadow-md",u),children:[(0,a.jsx)(ed,{section:i,isPreview:g,isCollapsed:b,onNameChange:D,onTypeChange:J,onPreviewToggle:()=>j(!g),onVisibilityToggle:O,onDelete:()=>{confirm('Are you sure you want to delete "'.concat(i.title,'"?'))&&c(i.id)},onConfigure:()=>null==m?void 0:m(i.id),onCollapseToggle:()=>h&&v(!b),dragHandleProps:{...w,...S}}),(0,a.jsx)("div",{className:(0,N.cn)("transition-all duration-200",b&&"h-0 overflow-hidden"),children:b?(0,a.jsxs)("div",{className:"p-4 text-center text-gray-500 text-sm",children:[(0,a.jsx)(L.A,{className:"h-4 w-4 mx-auto mb-2"}),"Section collapsed - click to expand"]}):["text-input","multiple-choice","rating-scale","email-capture","contact-form"].includes(i.type)?(0,a.jsx)(eH,{section:i,isPreview:g,onUpdate:e=>n(i.id,e)}):["info","text-block","image-block","hero","content","video","divider","spacer"].includes(i.type)?(0,a.jsx)(e_,{section:i,isPreview:g,onUpdate:e=>n(i.id,e)}):g?(()=>{switch(i.type){case"multiple-choice":return(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-medium mb-4",children:[H||"Your question text here...",M&&(0,a.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,a.jsx)("div",{className:"space-y-2",children:["Option 1","Option 2","Option 3"].map((e,s)=>(0,a.jsxs)("label",{className:"flex items-center space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[(0,a.jsx)("input",{type:"radio",name:"preview-".concat(i.id),className:"h-4 w-4"}),(0,a.jsx)("span",{children:e})]},s))})]});case"text-input":return(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-medium mb-4",children:[H||"Your question text here...",M&&(0,a.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,a.jsx)("input",{type:"text",placeholder:"Type your answer here...",className:"w-full p-3 border border-gray-200 rounded-lg",disabled:!0})]});case"text-block":return(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)("div",{className:"prose max-w-none",children:H||"Your content text here..."})});case"email-capture":return(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-medium mb-4",children:[H||"Enter your email address",M&&(0,a.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,a.jsx)("input",{type:"email",placeholder:"your@email.com",className:"w-full p-3 border border-gray-200 rounded-lg",disabled:!0})]});default:return(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"text-center text-gray-500",children:[(0,a.jsx)(V.A,{className:"h-8 w-8 mx-auto mb-2"}),(0,a.jsxs)("p",{className:"text-sm",children:["Preview for ",(null==z?void 0:z.name)||i.type]}),(0,a.jsx)("p",{className:"text-xs mt-1",children:H||"No content configured"})]})})}})():(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[I?"Question Text":"Content",M&&(0,a.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,a.jsx)(R,{value:H,onSave:B,variant:"body",placeholder:I?"Enter your question text...":"Enter your content...",className:"min-h-[60px] p-3 border border-gray-200 rounded-lg w-full",showEditIcon:!1,showSaveStatus:!0,multiline:!0,maxLength:1e3})]}),"multiple-choice"===i.type&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Answer Options"}),(0,a.jsx)("div",{className:"space-y-2",children:["Option 1","Option 2","Option 3"].map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"w-6 h-6 rounded-full border border-gray-300 flex items-center justify-center text-xs font-medium",children:s+1}),(0,a.jsx)("input",{type:"text",defaultValue:e,className:"flex-1 p-2 border border-gray-200 rounded text-sm",placeholder:"Option ".concat(s+1)})]},s))})]}),i.settings&&Object.keys(i.settings).length>0&&(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Current Settings:"}),(0,a.jsx)("div",{className:"space-y-1 text-xs text-gray-600",children:Object.entries(i.settings).slice(0,5).map(e=>{let[s,t]=e;return(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("span",{className:"capitalize",children:[s.replace(/([A-Z])/g," $1"),":"]}),(0,a.jsx)("span",{className:"font-medium",children:String(t)})]},s)})})]})]})})}),!b&&(0,a.jsx)(eu,{section:i,isQuestion:I,isRequired:M,buttonLabel:$,onRequiredChange:I?U:void 0,onButtonLabelChange:_,showButtonPreview:!0}),f&&(0,a.jsx)("div",{className:"absolute inset-0 bg-white bg-opacity-50 flex items-center justify-center z-10",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-blue-600",children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Saving..."})]})})]})}var eQ=t(42103);function eW(e){let{sections:s,onSectionUpdate:t,onSectionDelete:l,onSectionDuplicate:r,onSectionConfigure:i,onSectionTypeChange:n,className:c,showCollapsedSections:d=!0}=e,{isOver:o,setNodeRef:m}=(0,C.zM)({id:"campaign-canvas",data:{type:"canvas"}}),x=0===s.length,u=s.map(e=>e.id);return(0,a.jsx)("div",{ref:m,className:(0,N.cn)("h-full rounded-lg transition-all duration-200",o?"bg-blue-50 border-2 border-blue-300 border-dashed":"bg-gray-50 border-2 border-gray-200 border-dashed",x&&"flex items-center justify-center",c),children:x?(0,a.jsxs)("div",{className:"text-center p-8",children:[(0,a.jsx)("div",{className:(0,N.cn)("mx-auto w-16 h-16 rounded-full flex items-center justify-center mb-4 transition-colors",o?"bg-blue-100":"bg-gray-100"),children:o?(0,a.jsx)(eS.A,{className:"h-8 w-8 text-blue-600"}):(0,a.jsx)(eD.A,{className:"h-8 w-8 text-gray-400"})}),(0,a.jsx)("h3",{className:(0,N.cn)("text-lg font-medium mb-2 transition-colors",o?"text-blue-900":"text-gray-900"),children:o?"Drop section here":"Start building your campaign"}),(0,a.jsx)("p",{className:(0,N.cn)("text-sm max-w-md mx-auto transition-colors",o?"text-blue-700":"text-gray-500"),children:o?"Release to add this section to your campaign":"Drag sections from the left panel to begin creating your lead magnet campaign. Start with questions, add content, and finish with results."}),o&&(0,a.jsx)("div",{className:"mt-6 flex justify-center space-x-2",children:[void 0,void 0,void 0].map((e,s)=>(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-bounce",style:{animationDelay:"".concat(.1*s,"s")}},s))})]}):(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)(q.gB,{items:u,strategy:q._G,children:(0,a.jsx)("div",{className:"space-y-4",children:s.map(e=>(0,a.jsx)(eZ,{section:e,onUpdate:t,onDelete:l,onDuplicate:r,onConfigure:i,onTypeChange:n,isCollapsible:d},e.id))})}),o&&(0,a.jsx)("div",{className:"mt-4 border-2 border-blue-300 border-dashed rounded-lg p-6 bg-blue-50",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(eS.A,{className:"h-6 w-6 text-blue-600 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-sm text-blue-700 font-medium",children:"Drop here to add section"})]})}),s.length>0&&!o&&(0,a.jsx)("div",{className:"mt-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(eQ.A,{className:"h-5 w-5 text-blue-500 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"text-sm text-blue-700",children:[(0,a.jsx)("p",{className:"font-medium mb-2",children:"Advanced Canvas Controls:"}),(0,a.jsxs)("ul",{className:"space-y-1 text-xs",children:[(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Click section names"})," to edit inline with auto-save"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Switch section types"})," using the dropdown in each section"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Toggle Preview mode"})," to see how sections look to users"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Collapse sections"})," to focus on specific areas"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Set questions as required"})," using the bottom bar toggle"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Customize button labels"})," for each section"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Drag sections"})," by the grip handle to reorder"]})]})]})]})})]})})}function eG(){let{user:e,loading:s}=(0,i.A)(),t=(0,r.useRouter)(),c=(0,r.useParams)(),o=null==c?void 0:c.id,[m,x]=(0,l.useState)(null),[u,h]=(0,l.useState)([]),[p,g]=(0,l.useState)(!0),[j,v]=(0,l.useState)(!1),[f,y]=(0,l.useState)(null),[N,S]=(0,l.useState)(null),k=(0,C.FR)((0,C.MS)(C.AN,{activationConstraint:{distance:8}}));(0,l.useEffect)(()=>{s||e||t.push("/auth/login")},[e,s,t]),(0,l.useEffect)(()=>{e&&o&&E()},[e,o]);let E=async()=>{try{g(!0),y(null);let e=await (0,n.jz)(o);if(!e.success)throw Error(e.error||"Failed to load campaign");if(!e.data)throw Error("Campaign not found");x(e.data),h([])}catch(e){console.error("Error loading campaign:",e),y(e instanceof Error?e.message:"An error occurred")}finally{g(!1)}},T=async e=>{if(m)try{v(!0);let s=await (0,n.SX)(m.id,{name:e});if(!s.success)throw Error(s.error||"Failed to update campaign name");x(s=>s?{...s,name:e}:null),X({title:"Campaign updated",description:"Campaign name updated successfully"})}catch(e){console.error("Error updating campaign name:",e),y(e instanceof Error?e.message:"Failed to update campaign name"),X({title:"Error",description:e instanceof Error?e.message:"Failed to update campaign name",variant:"destructive"})}finally{v(!1)}},L=async()=>{if(m)try{v(!0),y(null),await new Promise(e=>setTimeout(e,1e3)),console.log("Campaign saved:",m.id,{sections:u}),X({title:"Campaign saved",description:"All changes have been saved successfully"})}catch(s){console.error("Error saving campaign:",s);let e=s instanceof Error?s.message:"Failed to save campaign";y(e),X({title:"Save failed",description:e,variant:"destructive"})}finally{v(!1)}},P=async()=>{if(m)try{if(v(!0),y(null),"published"===m.status){let e=await (0,n.SX)(m.id,{status:"draft"});if(!e.success)throw Error(e.error||"Failed to unpublish campaign");x(e=>e?{...e,status:"draft",published_at:null}:null),X({title:"Campaign unpublished",description:"Campaign has been moved to draft status"})}else{let e=await (0,n.s2)(m.id);if(!e.success)throw Error(e.error||"Failed to publish campaign");x(e=>e?{...e,status:"published",published_at:new Date().toISOString()}:null),X({title:"Campaign published",description:"Campaign is now live and accepting responses"})}}catch(s){console.error("Error publishing/unpublishing campaign:",s);let e=s instanceof Error?s.message:"Failed to update campaign status";y(e),X({title:"Error",description:e,variant:"destructive"})}finally{v(!1)}},I=e=>{let s={id:"section-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),type:e.id,title:e.name,settings:e.defaultSettings||{},order:u.length+1,isVisible:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};h(e=>[...e,s]),X({title:"Section added",description:"".concat(e.name," section has been added to your campaign")})},J=async(e,s)=>{try{h(t=>t.map(t=>t.id===e?{...t,...s,updatedAt:new Date().toISOString()}:t)),s.title&&X({title:"Section updated",description:"Section title has been updated",duration:2e3})}catch(e){throw console.error("Error updating section:",e),X({title:"Update failed",description:e instanceof Error?e.message:"Failed to update section",variant:"destructive"}),e}},O=async(e,s)=>{try{var t;let a=d(s),l={type:s,settings:{...(null==(t=u.find(s=>s.id===e))?void 0:t.settings)||{},...null==a?void 0:a.defaultSettings}};await J(e,l),X({title:"Section type changed",description:"Section changed to ".concat((null==a?void 0:a.name)||s),duration:3e3})}catch(e){console.error("Error changing section type:",e),X({title:"Failed to change type",description:e instanceof Error?e.message:"Failed to change section type",variant:"destructive"})}};return s||p?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(b.A,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading campaign builder..."})]})}):e?f?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,a.jsx)("div",{className:"px-4 py-6 sm:px-0",children:(0,a.jsx)(F.Zp,{className:"border-red-200 bg-red-50",children:(0,a.jsx)(F.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3 text-red-800",children:[(0,a.jsx)(D.A,{className:"h-5 w-5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Error loading campaign"}),(0,a.jsx)("p",{className:"text-sm mt-1",children:f}),(0,a.jsx)("button",{onClick:E,className:"mt-2 text-sm underline hover:no-underline",children:"Try Again"})]})]})})})})})}):m?(0,a.jsx)(C.Mp,{sensors:k,collisionDetection:C.fp,onDragStart:e=>{var s,t;let{active:a}=e;(null==(s=a.data.current)?void 0:s.type)==="section-type"?S(a.data.current.sectionType):(null==(t=a.data.current)?void 0:t.type)==="campaign-section"&&S(a.data.current.section)},onDragEnd:e=>{var s,t,a,l;let{active:r,over:i}=e;if(S(null),i){if((null==(s=r.data.current)?void 0:s.type)==="section-type"&&(null==(t=i.data.current)?void 0:t.type)==="canvas")return void I(r.data.current.sectionType);if((null==(a=r.data.current)?void 0:a.type)==="campaign-section"&&(null==(l=i.data.current)?void 0:l.type)==="campaign-section"){let e=r.id,s=i.id;e!==s&&(h(t=>{let a=t.findIndex(s=>s.id===e),l=t.findIndex(e=>e.id===s);return(0,q.be)(t,a,l).map((e,s)=>({...e,order:s+1,updatedAt:new Date().toISOString()}))}),X({title:"Sections reordered",description:"Section order has been updated",duration:2e3}))}}},children:(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(w,{campaignName:m.name,campaignStatus:m.status,isPublished:"published"===m.status,isSaving:j,canPublish:!0,onCampaignNameChange:T,onSave:L,onPreview:()=>{if(!m)return;let e="/campaigns/".concat(m.id,"/preview");window.open(e,"_blank","noopener,noreferrer")},onPublish:P}),(0,a.jsx)("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"px-4 py-6 sm:px-0",children:[f&&(0,a.jsx)(F.Zp,{className:"mb-6 border-red-200 bg-red-50",children:(0,a.jsx)(F.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3 text-red-800",children:[(0,a.jsx)(D.A,{className:"h-5 w-5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Error"}),(0,a.jsx)("p",{className:"text-sm mt-1",children:f}),(0,a.jsx)("button",{onClick:()=>y(null),className:"mt-2 text-sm underline hover:no-underline",children:"Dismiss"})]})]})})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 h-[calc(100vh-200px)]",children:[(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsx)(F.Zp,{className:"h-full",children:(0,a.jsx)(z,{})})}),(0,a.jsx)("div",{className:"lg:col-span-3",children:(0,a.jsxs)(F.Zp,{className:"h-full",children:[(0,a.jsx)(F.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(F.ZB,{className:"text-lg",children:"Campaign Canvas"}),(0,a.jsx)(F.BT,{children:"Drag sections from the sidebar to build your campaign. Use the enhanced controls for inline editing, preview mode, and section management."})]}),u.length>0&&(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:[u.length," section",1!==u.length?"s":""," • ",u.filter(e=>e.isVisible).length," visible"]})]})}),(0,a.jsx)(F.Wu,{className:"h-[calc(100%-100px)]",children:(0,a.jsx)(eW,{sections:u,onSectionUpdate:J,onSectionDelete:e=>{h(s=>{let t=s.filter(s=>s.id!==e).map((e,s)=>({...e,order:s+1,updatedAt:new Date().toISOString()}));return X({title:"Section deleted",description:"Section has been removed from your campaign"}),t})},onSectionDuplicate:e=>{h(s=>{let t=s.find(s=>s.id===e);if(!t)return s;let a={...t,id:"section-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),title:"".concat(t.title," (Copy)"),order:s.length+1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return X({title:"Section duplicated",description:"A copy of the section has been created"}),[...s,a]})},onSectionConfigure:e=>{console.log("Configure section:",e),X({title:"Configuration",description:"Section configuration panel coming soon",duration:3e3})},onSectionTypeChange:O,className:"h-full",showCollapsedSections:!0})})]})})]})]})}),(0,a.jsx)(C.Hd,{children:N&&(0,a.jsx)(a.Fragment,{children:"name"in N&&"description"in N?(0,a.jsx)(A,{sectionType:N,className:"shadow-lg rotate-3 opacity-90"}):(0,a.jsx)(Q,{section:N,onUpdate:async()=>{},onDelete:()=>{},onDuplicate:()=>{},onConfigure:()=>{},className:"shadow-lg rotate-2 opacity-90"})})})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,a.jsx)("div",{className:"px-4 py-6 sm:px-0",children:(0,a.jsx)(F.Zp,{children:(0,a.jsx)(F.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-gray-600",children:"Campaign not found"}),(0,a.jsx)("button",{onClick:()=>t.push("/dashboard/campaigns"),className:"mt-2 text-blue-600 underline hover:no-underline",children:"Back to Campaigns"})]})})})})})}):null}},67133:(e,s,t)=>{"use strict";t.d(s,{Hr:()=>x,Ht:()=>p,SQ:()=>u,_2:()=>h,mB:()=>g,rI:()=>o,ty:()=>m});var a=t(95155),l=t(12115),r=t(9449),i=t(13052),n=t(5196),c=t(9428),d=t(53999);let o=r.bL,m=r.l9;r.YJ,r.ZL,r.Pb;let x=r.z6;l.forwardRef((e,s)=>{let{className:t,inset:l,children:n,...c}=e;return(0,a.jsxs)(r.ZP,{ref:s,className:(0,d.cn)("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",l&&"pl-8",t),...c,children:[n,(0,a.jsx)(i.A,{className:"ml-auto"})]})}).displayName=r.ZP.displayName,l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(r.G5,{ref:s,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...l})}).displayName=r.G5.displayName;let u=l.forwardRef((e,s)=>{let{className:t,sideOffset:l=4,...i}=e;return(0,a.jsx)(r.ZL,{children:(0,a.jsx)(r.UC,{ref:s,sideOffset:l,className:(0,d.cn)("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...i})})});u.displayName=r.UC.displayName;let h=l.forwardRef((e,s)=>{let{className:t,inset:l,...i}=e;return(0,a.jsx)(r.q7,{ref:s,className:(0,d.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",l&&"pl-8",t),...i})});h.displayName=r.q7.displayName,l.forwardRef((e,s)=>{let{className:t,children:l,checked:i,...c}=e;return(0,a.jsxs)(r.H_,{ref:s,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:i,...c,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(r.VF,{children:(0,a.jsx)(n.A,{className:"h-4 w-4"})})}),l]})}).displayName=r.H_.displayName;let p=l.forwardRef((e,s)=>{let{className:t,children:l,...i}=e;return(0,a.jsxs)(r.hN,{ref:s,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...i,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(r.VF,{children:(0,a.jsx)(c.A,{className:"h-2 w-2 fill-current"})})}),l]})});p.displayName=r.hN.displayName,l.forwardRef((e,s)=>{let{className:t,inset:l,...i}=e;return(0,a.jsx)(r.JU,{ref:s,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",l&&"pl-8",t),...i})}).displayName=r.JU.displayName;let g=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(r.wv,{ref:s,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",t),...l})});g.displayName=r.wv.displayName},77011:(e,s,t)=>{Promise.resolve().then(t.bind(t,18530))},82714:(e,s,t)=>{"use strict";t.d(s,{J:()=>i});var a=t(95155);t(12115);var l=t(40968),r=t(53999);function i(e){let{className:s,...t}=e;return(0,a.jsx)(l.b,{"data-slot":"label",className:(0,r.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",s),...t})}},89852:(e,s,t)=>{"use strict";t.d(s,{p:()=>i});var a=t(95155),l=t(12115),r=t(53999);let i=l.forwardRef((e,s)=>{let{className:t,type:l,...i}=e;return(0,a.jsx)("input",{type:l,className:(0,r.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...i})});i.displayName="Input"},99474:(e,s,t)=>{"use strict";t.d(s,{T:()=>r});var a=t(95155);t(12115);var l=t(53999);function r(e){let{className:s,...t}=e;return(0,a.jsx)("textarea",{"data-slot":"textarea",className:(0,l.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),...t})}}},e=>{var s=s=>e(e.s=s);e.O(0,[568,935,352,590,963,74,463,441,684,358],()=>s(77011)),_N_E=e.O()}]);