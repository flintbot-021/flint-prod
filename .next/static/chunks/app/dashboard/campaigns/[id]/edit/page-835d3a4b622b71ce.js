(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[990],{2241:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>F});var i=a(95155),t=a(12115),r=a(35695),l=a(97168),n=a(88482),c=a(89852),d=a(66220),o=a(99474),m=a(62533),h=a(76052),x=a(17712),p=a(51154),g=a(35169),u=a(85339),j=a(5196),y=a(48136),N=a(33127),v=a(381),f=a(92138),b=a(4229);let w=[{id:"basic",title:"Basic Information",description:"Update your campaign name and description"},{id:"theme",title:"Theme & Branding",description:"Customize the look and feel of your campaign"},{id:"settings",title:"Campaign Settings",description:"Configure completion and notification settings"},{id:"review",title:"Review & Save",description:"Review your changes and save the campaign"}];function F(){var e,s;let{user:a,loading:F}=(0,h.A)(),k=(0,r.useRouter)(),_=(0,r.useParams)(),C=null==_?void 0:_.id,[S,A]=(0,t.useState)(null),[B,E]=(0,t.useState)("basic"),[J,M]=(0,t.useState)(!1),[T,I]=(0,t.useState)(!0),[P,z]=(0,t.useState)(null),[O,R]=(0,t.useState)(null),[$,D]=(0,t.useState)({name:"",description:"",settings:{theme:{primary_color:"#3B82F6",secondary_color:"#10B981",background_color:"#FFFFFF",font_family:"Inter, sans-serif"},branding:{show_powered_by:!0},completion:{email_notifications:!0}}});(0,t.useEffect)(()=>{F||a||k.push("/auth/login")},[a,F,k]),(0,t.useEffect)(()=>{a&&C&&H()},[a,C]);let H=async()=>{try{I(!0),R(null);let[e,s]=await Promise.all([(0,x.jz)(C),(0,x.Rk)()]);if(!e.success)throw Error(e.error||"Failed to load campaign");if(!s.success)throw Error(s.error||"Failed to load profile");if(!e.data)throw Error("Campaign not found");A(e.data),z(s.data||null),D({name:e.data.name,description:e.data.description||"",settings:e.data.settings||{theme:{primary_color:"#3B82F6",secondary_color:"#10B981",background_color:"#FFFFFF",font_family:"Inter, sans-serif"},branding:{show_powered_by:!0},completion:{email_notifications:!0}}})}catch(e){console.error("Error loading campaign:",e),R(e instanceof Error?e.message:"An error occurred")}finally{I(!1)}},W=e=>{D(s=>({...s,...e}))},Z=e=>{D(s=>({...s,settings:{...s.settings,...e}}))},G=()=>w.findIndex(e=>e.id===B),U=async()=>{if(S)try{M(!0),R(null);let e=await (0,x.SX)(S.id,{name:$.name,description:$.description,settings:$.settings});if(!e.success)throw Error(e.error||"Failed to update campaign");k.push("/dashboard/campaigns")}catch(e){console.error("Error updating campaign:",e),R(e instanceof Error?e.message:"An error occurred")}finally{M(!1)}};return F||T?(0,i.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)(p.A,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Loading campaign..."})]})}):a?O?(0,i.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,i.jsx)("header",{className:"bg-white shadow",children:(0,i.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,i.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,i.jsxs)(l.$,{variant:"ghost",onClick:()=>k.push("/dashboard/campaigns"),className:"text-gray-600 hover:text-gray-900",children:[(0,i.jsx)(g.A,{className:"h-4 w-4 mr-2"}),"Back to Campaigns"]}),(0,i.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Edit Campaign"})]}),(0,i.jsx)(m.F,{variant:"compact"})]})})}),(0,i.jsx)("main",{className:"max-w-4xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,i.jsx)("div",{className:"px-4 py-6 sm:px-0",children:(0,i.jsx)(n.Zp,{className:"border-red-200 bg-red-50",children:(0,i.jsx)(n.Wu,{className:"pt-6",children:(0,i.jsxs)("div",{className:"flex items-center space-x-3 text-red-800",children:[(0,i.jsx)(u.A,{className:"h-5 w-5"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-medium",children:"Error loading campaign"}),(0,i.jsx)("p",{className:"text-sm mt-1",children:O}),(0,i.jsx)(l.$,{variant:"outline",size:"sm",className:"mt-2",onClick:H,children:"Try Again"})]})]})})})})})]}):(0,i.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,i.jsx)("header",{className:"bg-white shadow",children:(0,i.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,i.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,i.jsxs)(l.$,{variant:"ghost",onClick:()=>k.push("/dashboard/campaigns"),className:"text-gray-600 hover:text-gray-900",children:[(0,i.jsx)(g.A,{className:"h-4 w-4 mr-2"}),"Back to Campaigns"]}),(0,i.jsxs)("h1",{className:"text-2xl font-bold text-gray-900",children:["Edit Campaign: ",null==S?void 0:S.name]})]}),(0,i.jsx)(m.F,{variant:"compact"})]})})}),(0,i.jsx)("main",{className:"max-w-4xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,i.jsxs)("div",{className:"px-4 py-6 sm:px-0",children:[(0,i.jsx)("div",{className:"mb-8",children:(0,i.jsx)("div",{className:"flex items-center justify-between",children:w.map((e,s)=>{let a=e.id===B,t=G()>s,r=a||t;return(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"\n                        flex items-center justify-center w-10 h-10 rounded-full border-2 \n                        ".concat(r?"border-blue-600 bg-blue-600 text-white":"border-gray-300 bg-white text-gray-400","\n                      "),children:t?(0,i.jsx)(j.A,{className:"h-5 w-5"}):(0,i.jsx)("span",{className:"text-sm font-medium",children:s+1})}),(0,i.jsxs)("div",{className:"ml-3",children:[(0,i.jsx)("p",{className:"text-sm font-medium ".concat(r?"text-gray-900":"text-gray-500"),children:e.title}),(0,i.jsx)("p",{className:"text-xs ".concat(r?"text-gray-600":"text-gray-400"),children:e.description})]})]}),s<w.length-1&&(0,i.jsx)("div",{className:"\n                        flex-1 mx-4 h-0.5 \n                        ".concat(t?"bg-blue-600":"bg-gray-300","\n                      ")})]},e.id)})})}),O&&(0,i.jsx)(n.Zp,{className:"mb-6 border-red-200 bg-red-50",children:(0,i.jsx)(n.Wu,{className:"pt-6",children:(0,i.jsxs)("div",{className:"flex items-center space-x-3 text-red-800",children:[(0,i.jsx)(u.A,{className:"h-5 w-5"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-medium",children:"Error"}),(0,i.jsx)("p",{className:"text-sm mt-1",children:O})]})]})})}),(0,i.jsxs)(n.Zp,{className:"mb-6",children:[(0,i.jsxs)(n.aR,{children:[(0,i.jsxs)(n.ZB,{className:"flex items-center space-x-2",children:["basic"===B&&(0,i.jsx)(y.A,{className:"h-5 w-5"}),"theme"===B&&(0,i.jsx)(N.A,{className:"h-5 w-5"}),"settings"===B&&(0,i.jsx)(v.A,{className:"h-5 w-5"}),"review"===B&&(0,i.jsx)(j.A,{className:"h-5 w-5"}),(0,i.jsx)("span",{children:null==(e=w.find(e=>e.id===B))?void 0:e.title})]}),(0,i.jsx)(n.BT,{children:null==(s=w.find(e=>e.id===B))?void 0:s.description})]}),(0,i.jsx)(n.Wu,{children:(()=>{var e,s,a,t,r,l,n,m,h,x,p,g,u,j,y,N,v,f,b,w;switch(B){case"basic":return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(d.J,{htmlFor:"name",children:"Campaign Name *"}),(0,i.jsx)(c.p,{id:"name",value:$.name,onChange:e=>W({name:e.target.value}),placeholder:"Enter your campaign name",className:"text-lg"}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Give your lead magnet campaign a clear, descriptive name"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(d.J,{htmlFor:"description",children:"Description"}),(0,i.jsx)(o.T,{id:"description",value:$.description,onChange:e=>W({description:e.target.value}),placeholder:"Describe what your campaign is about (optional)",rows:4}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Help your team understand the purpose of this campaign"})]})]});case"theme":return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(d.J,{htmlFor:"primary-color",children:"Primary Color"}),(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)("input",{type:"color",id:"primary-color",value:(null==(e=$.settings.theme)?void 0:e.primary_color)||"#3B82F6",onChange:e=>Z({theme:{...$.settings.theme,primary_color:e.target.value}}),className:"w-12 h-12 rounded border border-gray-300"}),(0,i.jsx)(c.p,{value:(null==(s=$.settings.theme)?void 0:s.primary_color)||"#3B82F6",onChange:e=>Z({theme:{...$.settings.theme,primary_color:e.target.value}}),placeholder:"#3B82F6",className:"flex-1"})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(d.J,{htmlFor:"secondary-color",children:"Secondary Color"}),(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)("input",{type:"color",id:"secondary-color",value:(null==(a=$.settings.theme)?void 0:a.secondary_color)||"#10B981",onChange:e=>Z({theme:{...$.settings.theme,secondary_color:e.target.value}}),className:"w-12 h-12 rounded border border-gray-300"}),(0,i.jsx)(c.p,{value:(null==(t=$.settings.theme)?void 0:t.secondary_color)||"#10B981",onChange:e=>Z({theme:{...$.settings.theme,secondary_color:e.target.value}}),placeholder:"#10B981",className:"flex-1"})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(d.J,{htmlFor:"background-color",children:"Background Color"}),(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)("input",{type:"color",id:"background-color",value:(null==(r=$.settings.theme)?void 0:r.background_color)||"#FFFFFF",onChange:e=>Z({theme:{...$.settings.theme,background_color:e.target.value}}),className:"w-12 h-12 rounded border border-gray-300"}),(0,i.jsx)(c.p,{value:(null==(l=$.settings.theme)?void 0:l.background_color)||"#FFFFFF",onChange:e=>Z({theme:{...$.settings.theme,background_color:e.target.value}}),placeholder:"#FFFFFF",className:"flex-1"})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(d.J,{htmlFor:"font-family",children:"Font Family"}),(0,i.jsxs)("select",{id:"font-family",value:(null==(n=$.settings.theme)?void 0:n.font_family)||"Inter, sans-serif",onChange:e=>Z({theme:{...$.settings.theme,font_family:e.target.value}}),className:"w-full p-2 border border-gray-300 rounded-md",children:[(0,i.jsx)("option",{value:"Inter, sans-serif",children:"Inter"}),(0,i.jsx)("option",{value:"system-ui, sans-serif",children:"System UI"}),(0,i.jsx)("option",{value:"Georgia, serif",children:"Georgia"}),(0,i.jsx)("option",{value:"Times New Roman, serif",children:"Times New Roman"}),(0,i.jsx)("option",{value:"Arial, sans-serif",children:"Arial"}),(0,i.jsx)("option",{value:"Helvetica, sans-serif",children:"Helvetica"})]})]})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("h3",{className:"text-lg font-medium",children:"Branding Options"}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)("input",{type:"checkbox",id:"show-powered-by",checked:(null==(m=$.settings.branding)?void 0:m.show_powered_by)||!1,onChange:e=>Z({branding:{...$.settings.branding,show_powered_by:e.target.checked}}),className:"rounded"}),(0,i.jsx)(d.J,{htmlFor:"show-powered-by",children:'Show "Powered by Flint" branding'})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(d.J,{children:"Theme Preview"}),(0,i.jsxs)("div",{className:"p-6 rounded-lg border-2",style:{backgroundColor:(null==(h=$.settings.theme)?void 0:h.background_color)||"#FFFFFF",borderColor:(null==(x=$.settings.theme)?void 0:x.primary_color)||"#3B82F6",fontFamily:(null==(p=$.settings.theme)?void 0:p.font_family)||"Inter, sans-serif"},children:[(0,i.jsx)("h3",{style:{color:(null==(g=$.settings.theme)?void 0:g.primary_color)||"#3B82F6"},className:"text-xl font-bold mb-2",children:"Sample Campaign Title"}),(0,i.jsx)("p",{className:"text-gray-600 mb-4",children:"This is how your campaign will look with the selected theme settings."}),(0,i.jsx)("button",{style:{backgroundColor:(null==(u=$.settings.theme)?void 0:u.secondary_color)||"#10B981",color:"#FFFFFF"},className:"px-4 py-2 rounded font-medium",children:"Sample Button"})]})]})]});case"settings":return(0,i.jsx)("div",{className:"space-y-6",children:(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("h3",{className:"text-lg font-medium",children:"Completion Settings"}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)("input",{type:"checkbox",id:"email-notifications",checked:(null==(j=$.settings.completion)?void 0:j.email_notifications)||!1,onChange:e=>Z({completion:{...$.settings.completion,email_notifications:e.target.checked}}),className:"rounded"}),(0,i.jsx)(d.J,{htmlFor:"email-notifications",children:"Send email notifications when leads complete the campaign"})]}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"When enabled, you'll receive an email notification each time someone completes your campaign."})]})});case"review":return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg",children:[(0,i.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Campaign Summary"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(d.J,{className:"text-sm font-medium text-gray-500",children:"Campaign Name"}),(0,i.jsx)("p",{className:"text-lg font-medium",children:$.name})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(d.J,{className:"text-sm font-medium text-gray-500",children:"Description"}),(0,i.jsx)("p",{className:"text-sm text-gray-700",children:$.description||"No description provided"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(d.J,{className:"text-sm font-medium text-gray-500",children:"Email Notifications"}),(0,i.jsx)("p",{className:"text-sm",children:(null==(y=$.settings.completion)?void 0:y.email_notifications)?"Enabled":"Disabled"})]})]}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(d.J,{className:"text-sm font-medium text-gray-500",children:"Theme Colors"}),(0,i.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,i.jsx)("div",{className:"w-6 h-6 rounded border border-gray-300",style:{backgroundColor:null==(N=$.settings.theme)?void 0:N.primary_color}}),(0,i.jsx)("div",{className:"w-6 h-6 rounded border border-gray-300",style:{backgroundColor:null==(v=$.settings.theme)?void 0:v.secondary_color}}),(0,i.jsx)("div",{className:"w-6 h-6 rounded border border-gray-300",style:{backgroundColor:null==(f=$.settings.theme)?void 0:f.background_color}})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(d.J,{className:"text-sm font-medium text-gray-500",children:"Font Family"}),(0,i.jsx)("p",{className:"text-sm",children:null==(b=$.settings.theme)?void 0:b.font_family})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(d.J,{className:"text-sm font-medium text-gray-500",children:"Powered By Branding"}),(0,i.jsx)("p",{className:"text-sm",children:(null==(w=$.settings.branding)?void 0:w.show_powered_by)?"Shown":"Hidden"})]})]})]})]}),S&&(0,i.jsxs)("div",{className:"bg-blue-50 p-6 rounded-lg",children:[(0,i.jsx)("h3",{className:"text-lg font-medium mb-4 text-blue-900",children:"Changes Summary"}),(0,i.jsxs)("div",{className:"space-y-2 text-sm",children:[$.name!==S.name&&(0,i.jsxs)("p",{className:"text-blue-800",children:[(0,i.jsx)("span",{className:"font-medium",children:"Name:"}),' "',S.name,'" → "',$.name,'"']}),$.description!==(S.description||"")&&(0,i.jsxs)("p",{className:"text-blue-800",children:[(0,i.jsx)("span",{className:"font-medium",children:"Description:"})," Updated"]}),JSON.stringify($.settings)!==JSON.stringify(S.settings)&&(0,i.jsxs)("p",{className:"text-blue-800",children:[(0,i.jsx)("span",{className:"font-medium",children:"Settings:"})," Theme and preferences updated"]}),$.name===S.name&&$.description===(S.description||"")&&JSON.stringify($.settings)===JSON.stringify(S.settings)&&(0,i.jsx)("p",{className:"text-gray-600",children:"No changes detected"})]})]})]});default:return null}})()})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)(l.$,{variant:"outline",onClick:()=>{let e=G();e>0&&E(w[e-1].id)},disabled:0===G(),children:[(0,i.jsx)(g.A,{className:"h-4 w-4 mr-2"}),"Previous"]}),(0,i.jsx)("div",{className:"flex items-center space-x-3",children:"review"!==B?(0,i.jsxs)(l.$,{onClick:()=>{let e=G();e<w.length-1&&E(w[e+1].id)},disabled:!(()=>{switch(B){case"basic":return $.name.trim().length>0;case"theme":case"settings":return!0;default:return!1}})(),children:["Next",(0,i.jsx)(f.A,{className:"h-4 w-4 ml-2"})]}):(0,i.jsx)(l.$,{onClick:U,disabled:J,className:"bg-blue-600 hover:bg-blue-700",children:J?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(p.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(b.A,{className:"h-4 w-4 mr-2"}),"Save Changes"]})})})]})]})})]}):null}},33127:(e,s,a)=>{"use strict";a.d(s,{A:()=>i});let i=(0,a(90602).A)("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]])},48136:(e,s,a)=>{"use strict";a.d(s,{A:()=>i});let i=(0,a(90602).A)("building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])},51154:(e,s,a)=>{"use strict";a.d(s,{A:()=>i});let i=(0,a(90602).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},82170:(e,s,a)=>{Promise.resolve().then(a.bind(a,2241))}},e=>{var s=s=>e(e.s=s);e.O(0,[935,352,463,98,441,684,358],()=>s(82170)),_N_E=e.O()}]);